"use strict";(()=>{var se={Limit:e=>{let{technical:r}=se,n=r.convert(e);return{plus:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++)n=r.add(n,o[l]);return this},minus:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++)n=r.sub(n,o[l]);return this},multiply:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++)n=r.mult(n,o[l]);return this},divide:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++)n=r.div(n,o[l]);return this},power:function(s){return n=r.pow(n,s),this},log:function(s=2.718281828459045){return n=r.log(n,s),this},abs:function(){return n[0]=Math.abs(n[0]),this},trunc:function(){return n=r.trunc(n),this},floor:function(){return n=r.floor(n),this},ceil:function(){return n=r.ceil(n),this},round:function(){return n=r.round(n),this},isNaN:()=>isNaN(n[0])||isNaN(n[1]),isFinite:()=>isFinite(n[0])&&isFinite(n[1]),lessThan:s=>r.less(n,r.convert(s)),lessOrEqual:s=>r.lessOrEqual(n,r.convert(s)),moreThan:s=>r.more(n,r.convert(s)),moreOrEqual:s=>r.moreOrEqual(n,r.convert(s)),notEqual:s=>r.notEqual(n,r.convert(s)),equal:(...s)=>{let o=r.convertAll(s),l=r.equal(n,o[0]);for(let c=1;c<o.length;c++){if(!l)return!1;l=r.equal(o[c-1],o[c])}return l},max:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++){if(isNaN(o[l][0])){n=[NaN,NaN];break}r.less(n,o[l])&&(n=o[l])}return this},min:function(...s){let o=r.convertAll(s);for(let l=0;l<o.length;l++){if(isNaN(o[l][0])){n=[NaN,NaN];break}r.more(n,o[l])&&(n=o[l])}return this},format:(s={})=>r.format(n,s),toNumber:()=>Number(r.convertBack(n)),toString:()=>r.convertBack(n),toArray:()=>r.prepare(n)}},LimitAlt:{abs:e=>e[0]==="-"?e.substring(1):e,isNaN:e=>e.includes("NaN"),isFinite:e=>!e.includes("Infinity")&&!e.includes("NaN"),clone:e=>[e[0],e[1]],sort:(e,r=!1)=>{if(e.length<2)return;let n=se.technical.convertAll(e),s=r?se.technical.moreOrEqual:se.technical.lessOrEqual,o=[[0]];e:for(let u=1;u<n.length;u++){let m=o[o.length-1];if(s(n[u-1],n[u])){do if(m.push(u),u++,u>=n.length)break e;while(s(n[u-1],n[u]));o.push([u])}else{do if(m.push(u),u++,u>=n.length){m.reverse();break e}while(s(n[u],n[u-1]));m.reverse(),o.push([u])}}let l=u=>{if(u.length===1)return u[0];let m=[],h;for(h=0;h<u.length-1;h+=2){m.push([]);let y=m[m.length-1],v=u[h],p=u[h+1],S=0,T=0;for(;S<v.length||T<p.length;)T>=p.length||S<v.length&&s(n[v[S]],n[p[T]])?(y.push(v[S]),S++):(y.push(p[T]),T++)}return h===u.length-1&&m.push(u[h]),m=l(m),m};o=l(o);let c=e.slice(0);e.length=0;for(let u=0;u<c.length;u++)e.push(c[o[u]])}},technical:{add:(e,r)=>{if(r[0]===0)return e;if(e[0]===0)return r;if(!isFinite(e[0])||!isFinite(r[0])){let o=e[0]+r[0];return isNaN(e[0])||isNaN(r[0])||isNaN(o)?[NaN,NaN]:[o,1/0]}let n=e[1]-r[1];if(Math.abs(n)>15)return n>0?e:r;n===0?e[0]+=r[0]:n>0?e[0]+=r[0]/10**n:(r[0]+=e[0]/10**-n,e=r);let s=Math.abs(e[0]);if(s===0)e[1]=0;else if(s>=10)e[0]/=10,e[1]++;else if(s<1){let o=-Math.floor(Math.log10(s));e[0]*=10**o,e[1]-=o}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},sub:(e,r)=>(r[0]*=-1,se.technical.add(e,r)),mult:(e,r)=>e[0]===0||r[0]===0?[0,0]:(e[1]+=r[1],e[0]*=r[0],Math.abs(e[0])>=10&&(e[0]/=10,e[1]++),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),div:(e,r)=>r[0]===0?[NaN,NaN]:e[0]===0?[0,0]:(e[1]-=r[1],e[0]/=r[0],Math.abs(e[0])<1&&(e[0]*=10,e[1]--),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),pow:(e,r)=>{if(r===0)return e[0]===0||isNaN(e[0])?[NaN,NaN]:[1,0];if(e[0]===0)return r<0?[NaN,NaN]:[0,0];if(!isFinite(r))return e[1]===0&&(e[0]===1||e[0]===-1&&!isNaN(r))?[1,0]:r===-1/0&&e[1]>=0||r===1/0&&e[1]<0?[0,0]:isNaN(r)||isNaN(e[0])?[NaN,NaN]:[1/0,1/0];let n=e[0]<0?Math.abs(r)%2:null;if(n!==null){if(Math.floor(r)!==r)return[NaN,NaN];e[0]*=-1}let s=r*(Math.log10(e[0])+e[1]);if(!isFinite(s))return isNaN(e[0])?[NaN,NaN]:s===-1/0?[0,0]:[n===1?-1/0:1/0,1/0];let o=Math.floor(s);return e[0]=10**(s-o),e[1]=o,e[0]=Math.round(e[0]*1e14)/1e14,e[0]===10&&(e[0]=1,e[1]++),n===1&&(e[0]*=-1),e},log:(e,r)=>{if(Math.abs(r)===1||e[0]===-1&&e[1]===0)return[NaN,NaN];if(e[0]===1&&e[1]===0)return[0,0];if(r===0)return[NaN,NaN];if(e[0]===0)return isNaN(r)?[NaN,NaN]:[Math.abs(r)>1?-1/0:1/0,1/0];if(!isFinite(r))return[NaN,NaN];if(!isFinite(e[0]))return isNaN(e[0])||e[0]===-1/0?[NaN,NaN]:[Math.abs(r)<1?-1/0:1/0,1/0];let n=e[0]<0;if(n){if(r>0)return[NaN,NaN];e[0]*=-1}let s=e[1]<0,o=Math.log10(Math.abs(Math.log10(e[0])+e[1])),l=Math.floor(o);if(e[0]=10**(o-l),e[1]=l,s&&(e[0]*=-1),r!==10){e[0]/=Math.log10(Math.abs(r));let c=Math.abs(e[0]);if(c<1||c>=10){let u=Math.floor(Math.log10(c));e[0]/=10**u,e[1]+=u}}if(r<0||n){if(e[1]<0)return[NaN,NaN];let c=e[1]<16?Math.abs(Math.round(e[0]*1e14)/10**(14-e[1]))%2:0;if(r<0&&!n){if(c!==0)return[NaN,NaN]}else if(c!==1)return[NaN,NaN]}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},less:(e,r)=>e[0]===0||r[0]===0||e[1]===r[1]?e[0]<r[0]:e[0]>0&&r[0]>0?e[1]<r[1]:e[0]<0&&r[0]>0?!0:r[0]<0&&e[0]>0?!1:e[1]>r[1],lessOrEqual:(e,r)=>e[0]===0||r[0]===0||e[1]===r[1]?e[0]<=r[0]:e[0]>0&&r[0]>0?e[1]<r[1]:e[0]<0&&r[0]>0?!0:r[0]<0&&e[0]>0?!1:e[1]>r[1],more:(e,r)=>e[0]===0||r[0]===0||e[1]===r[1]?e[0]>r[0]:e[0]>0&&r[0]>0?e[1]>r[1]:e[0]<0&&r[0]>0?!1:r[0]<0&&e[0]>0?!0:e[1]<r[1],moreOrEqual:(e,r)=>e[0]===0||r[0]===0||e[1]===r[1]?e[0]>=r[0]:e[0]>0&&r[0]>0?e[1]>r[1]:e[0]<0&&r[0]>0?!1:r[0]<0&&e[0]>0?!0:e[1]<r[1],equal:(e,r)=>e[1]===r[1]?e[0]===r[0]:!1,notEqual:(e,r)=>e[1]!==r[1]?!0:e[0]!==r[0],trunc:e=>e[1]<0?[0,0]:(e[1]===0?e[0]=Math.trunc(e[0]):e[1]<=14&&(e[0]=Math.trunc(e[0]*10**e[1])/10**e[1]),e),floor:e=>e[1]<0?[e[0]<0?-1:0,0]:(e[1]===0?e[0]=Math.floor(e[0]):e[1]<=14&&(e[0]=Math.floor(e[0]*10**e[1])/10**e[1]),e),ceil:e=>e[1]<0?[e[0]<0?0:1,0]:(e[1]===0?e[0]=Math.ceil(e[0]):e[1]<=14&&(e[0]=Math.ceil(e[0]*10**e[1])/10**e[1]),e),round:e=>e[1]<0?[e[1]===-1?Math.round(e[0]/10):0,0]:(e[1]===0?e[0]=Math.round(e[0]):e[1]<=14&&(e[0]=Math.round(e[0]*10**e[1])/10**e[1]),e),format:(e,r)=>{let[n,s]=e;if(!isFinite(n)||!isFinite(s))return se.technical.convertBack(e);if((s>=1e4||s<=-1e4)&&r.type!=="input"){let u=r.digits!==void 0?r.digits:2,m=Math.floor(Math.log10(Math.abs(s))),h=Math.abs(Math.round(s/10**(m-u))/10**u);return h===10&&(h=1,m++),n<0&&(h*=-1),`${r.padding===!0?h.toFixed(u).replace(".",t.separator[1]):`${h}`.replace(".",t.separator[1])}e${s<0?"-":""}e${m}`}if(s>=6||s<-3){let u=r.digits!==void 0?r.digits:2,m=s,h=Math.round(n*10**u)/10**u;return Math.abs(h)===10&&(h=1,m++),h=r.padding===!0?h.toFixed(u):`${h}`,r.type!=="input"?`${h.replace(".",t.separator[1])}e${m}`:`${h}e${m}`}let o=s>=3?0:r.digits!==void 0?r.digits:s<0?4:2,l=Math.round(n*10**(o+s))/10**o,c=o>0&&r.padding===!0?l.toFixed(o):`${l}`;return r.type==="input"?c:l>=1e3?c.replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0]):c.replace(".",t.separator[1])},convert:e=>{let r;if(typeof e!="object"||e===null){typeof e!="string"&&(e=`${e}`);let s=e.indexOf("e");r=s===-1?[Number(e),0]:[Number(e.slice(0,s)),Number(e.slice(s+1))]}else r=[e[0],e[1]];if(!isFinite(r[0]))return isNaN(r[0])?[NaN,NaN]:[r[0],1/0];let n=Math.abs(r[0]);if(n===0)return[0,0];if(n<1||n>=10){let s=Math.floor(Math.log10(n));r[0]/=10**s,r[1]+=s,Math.abs(r[0])<1&&(r[0]*=10,r[1]--)}return r[0]=Math.round(r[0]*1e14)/1e14,Math.abs(r[0])===10&&(r[0]=1,r[1]++),r},convertAll:e=>{let r=[],{convert:n}=se.technical;for(let s=0;s<e.length;s++)r[s]=n(e[s]);return r},prepare:e=>isFinite(e[0])&&isFinite(e[1])?e:e[0]===0||e[1]===-1/0?[0,0]:isNaN(e[0])||isNaN(e[1])?[NaN,NaN]:[e[0]<0?-1/0:1/0,1/0],convertBack:e=>(e=se.technical.prepare(e),isFinite(e[0])?e[1]===0?`${e[0]}`:`${e[0]}e${e[1]}`:`${e[0]}`)}},{Limit:Lt,LimitAlt:zt}=se,f=Lt;var oe=(e,r=null)=>{switch(e){case"stage":return r==="Advanced"?t.inflation.vacuum||i.strangeInfo.instability>0:r==="Structures"||r===null;case"Elements":case"research":return t.stage.resets<1&&t.discharge.current<4?!1:r==="Elements"||e==="Elements"?i.stageInfo.activeAll.includes(4)&&t.upgrades[4][1]===1:r==="Researches"||r===null;case"strangeness":return t.strange[0].total===0?!1:r==="Milestones"?t.strangeness[5][8]>=1||!t.inflation.vacuum:r==="Matter"||r===null;case"settings":return r==="History"?t.strange[0].total>0:r==="Settings"||r==="Stats"||r===null}return!1},pt=(e,r)=>{if(i.buildingsInfo.maxActive[r]<e+1)return!1;if(r===1)return e>=1;if(r===2)return e===6?t.strangeness[2][8]>=1:e>=1;if(r===3){if(t.accretion.rank===0)return!1;if(e===1)return!0;if(e===2)return t.upgrades[3][2]===1;if(e===3)return t.upgrades[3][4]===1;if(e===4)return t.upgrades[3][6]===1;if(e===5)return t.upgrades[3][11]===1&&t.strangeness[3][8]>=1&&t.accretion.rank>=5}else if(r===4){if(t.collapse.mass<i.collapseInfo.unlockB[e])return!1;if(e===1)return!0;if(e===2)return t.researchesExtra[4][0]>=1;if(e===3)return t.researchesExtra[4][0]>=2;if(e===4)return t.researchesExtra[4][0]>=3;if(e===5)return t.strangeness[4][9]>=1&&t.collapse.stars[2]>0}else if(r===5){if(e<3&&t.collapse.mass<i.collapseInfo.unlockG[e])return!1;if(e===1)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===2)return t.inflation.vacuum||t.milestones[3][0]>=7;if(e===3)return t.strangeness[5][6]>=1}return!1},Ee=(e,r,n)=>{switch(n){case"upgrades":if(i.upgradesInfo[r].maxActive<e+1)return!1;if(r===1)return e===0||e===1?t.inflation.vacuum:e>5?t.discharge.current>=3:!0;if(r===2)return e===7?t.strangeness[2][2]>=3:!0;if(r===3)return t.accretion.rank<i.accretionInfo.rankU[e]||t.accretion.rank===0?!1:e===8?t.strangeness[3][2]>=3:!0;if(r===4)return t.collapse.mass<i.collapseInfo.unlockU[e]?!1:e===2?t.upgrades[4][1]===1:e===3?t.strangeness[4][2]>=1&&t.upgrades[4][2]===1&&t.collapse.stars[1]>0:!0;if(r===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=7;if(e===2)return t.inflation.vacuum?t.collapse.mass>=1e6:t.buildings[5][3].true>=1}break;case"researches":if(i.researchesInfo[r].maxActive<e+1)return!1;if(r===1)return t.discharge.current>=4;if(r===2)return!0;if(r===3)return t.accretion.rank>=i.accretionInfo.rankR[e]&&t.accretion.rank!==0;if(r===4)return t.collapse.mass<i.collapseInfo.unlockR[e]?!1:e===3?(t.collapse.stars[0]>0||t.buildings[5][3].true>=1)&&t.strangeness[4][2]>=2:e===4?t.collapse.stars[2]>0||t.buildings[5][3].true>=1:!0;if(r===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=6;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=7}break;case"researchesExtra":if(i.researchesExtraInfo[r].maxActive<e+1)return!1;if(r===1)return e===1?t.researchesExtra[1][2]>=2:e===4?t.accretion.rank>=6:t.discharge.current>=5;if(r===2)return t.vaporization.clouds[0]===0?!1:e===3?t.accretion.rank>=6:!0;if(r===3)return t.accretion.rank<i.accretionInfo.rankE[e]||t.accretion.rank===0?!1:e===4?t.researchesExtra[1][2]>=2:!0;if(r===4)return e===1?t.collapse.stars[0]>0||t.buildings[5][3].true>=1:e===2?(t.collapse.stars[0]>0||t.buildings[5][3].true>=1)&&t.strangeness[4][2]>=3:!0;break;case"ASR":return r===1?t.upgrades[1][5]>=1:r===3?t.accretion.rank!==0:!0;case"elements":return e>=27?t.upgrades[4][3]===1:e>=11?t.collapse.stars[1]>0||t.buildings[5][3].true>=1:e>=6?t.upgrades[4][2]===1:t.upgrades[4][1]===1;case"strangeness":if(i.strangenessInfo[r].maxActive<e+1)return!1;if(t.inflation.vacuum){if(r===1){if(e===9)return t.challenges.void[1]>=1;if(e===10)return t.challenges.void[1]>=2;if(e===11)return t.challenges.void[4]>=2}else if(r===2){if(e===9)return t.challenges.void[2]>=1;if(e===10)return t.challenges.void[2]>=2&&t.strangeness[1][11]>=1}else if(r===3){if(e===9)return t.challenges.void[4]>=4;if(e===10)return t.challenges.void[1]>=3}else if(r===4){if(e===10)return t.challenges.void[4]>=3}else if(r===5){if(e===6)return!1;if(e===8)return t.challenges.void[4]>=1;if(e===9)return t.strangeness[5][5]>=1;if(e===10)return!1}return!0}return(r===1||r===4)&&e<8||(r===2||r===3)&&e<7?!0:t.milestones[4][0]>=8}return!1},be=(e,r,n)=>{switch(n){case"structures":if(r===5&&e===3)return!1;break;case"upgrades":if(r===1){if(e===5)return!1}else if(r===2){if(e===2)return!1}else{if(r===4)return!1;if(r===5&&e===2)return t.inflation.vacuum}break;case"researches":if(r===1&&e===3)return!1;break;case"researchesExtra":if(r===1){if(e===2)return!1}else if(r===2){if(e<=2)return!1}else if(r===4&&e===0)return!1;break;case"elements":if(e===26||e===27)return!1}return!0},ht=(e,r)=>{if(t.inflation.vacuum){if(t.strangeness[5][8]<1||t.challenges.active!==0)return!1}else if(t.strange[0].total===0||r===5&&t.strangeness[5][8]<1)return!1;let n=i.milestonesInfo[r].need[e];if(n[0]===0)return!1;if(r===1){if(e===0)return f(t.buildings[1][t.inflation.vacuum?1:0].current).moreOrEqual(n);if(e===1)return f(t.discharge.energy).moreOrEqual(n)}else if(r===2){if(e===0)return f(t.inflation.vacuum?t.vaporization.clouds:t.buildings[2][1].current).moreOrEqual(n);if(e===1)return f(t.buildings[2][2].current).moreOrEqual(n)}else if(r===3){if(e===0)return f(t.buildings[3][0].current).moreOrEqual(n);if(e===1)return f(t.buildings[3][4].true+t.buildings[3][5].true).moreThan(n)}else if(r===4){if(e===0)return f(t.inflation.vacuum?t.buildings[4][0].current:t.collapse.mass).moreOrEqual(n);if(e===1)return f(t.collapse.stars[2]).moreOrEqual(n)}else if(r===5){if(e===0)return f(i.collapseInfo.trueStars).moreOrEqual(n);if(e===1)return f(t.buildings[5][3].current).moreOrEqual(n)}return!1};var Me=e=>{let{buildings:r}=b,{buildingsInfo:n,upgradesInfo:s,researchesInfo:o,researchesExtraInfo:l,strangenessInfo:c}=i;if(e){C.footerStatsHTML[1][0]=["Energy%20mass.png","stage1borderImage cyanText","Mass"],n.hoverText[2][0]="Tritium",n.hoverText[3][0]="Preons hardcap",r[1][0].current=[5.476,-3],r[2][0].current=[0,0],r[3][0].current=[9.76185667392,-36];let u=[6,7,6,6,4];n.maxActive.splice(1,u.length,...u),n.name[1][0]!=="Mass"&&(C.buildingHTML[1].unshift("Preon.png","Quarks.png"),n.name[1].unshift("Mass","Preons"),n.hoverText[1].unshift("Mass","Preons")),n.startCost[1]=[0,.005476,6,3,24,3],n.firstCost[1]=[0,.005476,6,3,24,3],i.dischargeInfo.energyType[1]=[0,1,3,5,10,20],n.type[2][1]="improving",n.type[3][1]="delaying",n.increase[5][1]=4,n.increase[5][2]=4;let m=[36,48,60,90,150,400,2e3,4e3,2e4,7e4];s[1].startCost.splice(0,m.length,...m),s[5].startCost[2]=1e200;let h=[2400,6e3,24e3,3e4,24e3,3e4],y=[400,2e3,6e3,24e3,12e3,12e3];o[1].startCost.splice(0,h.length,...h),o[1].scaling.splice(0,y.length,...y),l[1].maxActive=5,l[2].maxActive=4,l[3].maxActive=5,i.accretionInfo.rankCost[5]=247e29,i.ASRInfo.costRange[1]=[4e3,1e4,16e3,24e3,32e3],i.ASRInfo.costRange[3][3]=247e29;let v=[2,1,4,24,2,1,2,4,36],p=[2.4,4,6,300,4,2.4,2,2,1];c[1].startCost.splice(0,v.length,...v),c[1].scaling.splice(0,p.length,...p);let S=[1,2,16,2,24,2,4,36],T=[1.8,1.8,2,4,500,2,2,1];c[2].startCost.splice(0,S.length,...S),c[2].scaling.splice(0,T.length,...T);let I=[1,2,3,9,24,3,12,36],H=[1.8,2.8,2,1,200,2.3,2,1];c[3].startCost.splice(0,I.length,...I),c[3].scaling.splice(0,H.length,...H);let z=[1,3,5,5,6,24,3,4,36],A=[1.8,2.8,2.4,4,16,400,2.3,2,1];c[4].startCost.splice(0,z.length,...z),c[4].scaling.splice(0,A.length,...A);let d=[4,16,2e3,8,10,64,1500,60,1500,180],x=[1,5,1,1.8,1.8,1,5,2,1,1];c[5].startCost.splice(0,d.length,...d),c[5].scaling.splice(0,x.length,...x),c[1].maxActive=12,c[2].maxActive=11,c[3].maxActive=11,c[4].maxActive=11,c[5].maxActive=11,a("milestonesWelcome").innerHTML='Milestones, can only be done when inside the <span class="darkvioletText">Void</span>';let k=B("#milestone1Stage2Div > img");i.milestonesInfo[2].name[0]="Distant Clouds",k.src=k.src.replace("Drop.png","Clouds.png"),k.alt="Clouds",i.milestonesInfo[3].name[0]="Center of gravity",B("#stageHistory > h4").textContent="Stage resets:",a("strange10Stage2").style.display="",a("strange9Stage3").style.display="",a("strange10Stage3").style.display="",a("strange11Stage4").style.display="",a("strangeBoostMain").style.display="",a("strange9Stage1").style.display="",a("strange8Stage2").style.display="",a("strange8Stage3").style.display="",a("strange9Stage4").style.display="",a("strange6Stage5").style.display="";for(let E=2;E<=5;E++)a(`strangenessSection${E}`).style.display="",a(`milestone1Stage${E}Div`).style.display="",a(`milestone2Stage${E}Div`).style.display="";for(let E of ue("vacuum"))E.style.display="";a("vacuumBoost").style.display="none",a("stageInstant").style.display="none",a("unknownStructures").style.display="none"}else{C.footerStatsHTML[1][0]=["Quarks.png","stage1borderImage cyanText","Quarks"],n.hoverText[2][0]="Moles",n.hoverText[3][0]="Mass",r[1][0].current=[3,0],r[2][0].current=[2.8,-3],r[3][0].current=[1,-19],n.name[1][0]==="Mass"&&(C.buildingHTML[1].splice(0,2),n.name[1].splice(0,2),n.hoverText[1].splice(0,2));let u=[4,6,5,5,4];n.maxActive.splice(1,u.length,...u),n.startCost[1]=[0,3,24,3],n.firstCost[1]=[0,3,24,3],i.dischargeInfo.energyType[1]=[0,1,5,20],n.type[2][1]="producing",n.type[3][1]="producing",n.increase[5][1]=2,n.increase[5][2]=2;let m=[0,0,9,12,36,300,800,2e3,4e3,22e3];s[1].startCost.splice(0,m.length,...m),s[5].startCost[2]=1e100,s[1].maxActive=10,s[2].maxActive=8,s[3].maxActive=13,s[4].maxActive=4,s[5].maxActive=3;let h=[1e3,2500,6e3,8e3,8e3,6e3],y=[250,500,2e3,8e3,4e3,6e3];o[1].startCost.splice(0,h.length,...h),o[1].scaling.splice(0,y.length,...y),o[1].maxActive=6,o[2].maxActive=6,o[3].maxActive=9,o[4].maxActive=5,o[5].maxActive=2,l[1].maxActive=0,l[2].maxActive=3,l[3].maxActive=4,l[4].maxActive=3,l[5].maxActive=0,i.accretionInfo.rankCost[5]=0,i.ASRInfo.costRange[1]=[6e3,12e3,18e3],i.ASRInfo.costRange[3][3]=2e30;let v=[1,1,3,6,6,1,2,2,12],p=[1.5,2,3.5,0,4,.75,2,4,0];c[1].startCost.splice(0,v.length,...v),c[1].scaling.splice(0,p.length,...p);let S=[1,2,2,1,6,2,2,12],T=[.4,.5,2.5,3,0,1,4,0];c[2].startCost.splice(0,S.length,...S),c[2].scaling.splice(0,T.length,...T);let I=[1,1,2,8,6,2,8,12],H=[.75,1.5,2,0,0,1,8,0];c[3].startCost.splice(0,I.length,...I),c[3].scaling.splice(0,H.length,...H);let z=[1,1,3,2,4,6,3,3,12],A=[1,2,2.5,3,28,0,1,5.5,0];c[4].startCost.splice(0,z.length,...z),c[4].scaling.splice(0,A.length,...A);let d=[120,16,80,10,10,40,800,20,40,60],x=[60,0,0,8,10,0,1600,20,0,0];c[5].startCost.splice(0,d.length,...d),c[5].scaling.splice(0,x.length,...x),c[1].maxActive=9,c[2].maxActive=8,c[3].maxActive=8,c[4].maxActive=9,c[5].maxActive=10,a("milestonesWelcome").innerHTML='Any reached Milestone will award 1 <span class="greenText">Strange quark</span>';let k=B("#milestone1Stage2Div > img");i.milestonesInfo[2].name[0]="A Nebula of Drops",k.src=k.src.replace("Clouds.png","Drop.png"),k.alt="Drop of water",i.milestonesInfo[3].name[0]="Cluster of Mass",B("#stageHistory > h4").textContent="Interstellar Stage resets:",a("vacuumBoost").style.display="",a("strange9Stage5").style.display="",a("strange10Stage5").style.display="",a("stageInstant").style.display="",a("rankStat0").style.display="";for(let E of ue("vacuum"))E.style.display="none";for(let E=0;E<i.challengesInfo.name.length;E++)a(`challenge${E+1}`).style.display="none";for(let E=1;E<c.length;E++)for(let L=c[E].maxActive+1;L<=c[E].startCost.length;L++)a(`strange${L}Stage${E}`).style.display="none"}for(let u=1;u<=3;u++){let m=r[u][0].current;r[u][0].total=M(m),r[u][0].trueTotal=M(m),r[u][0].highest=M(m)}},yt=async()=>{if(t.inflation.vacuum)return void R("This cannot be undone");let e=i.strangeInfo.instability;if(e<5)return void R(`Universe is still stable. Vacuum state is false. ${5-e} more`);!await V("This will not be possible to undo. Confirm?")||(await R("Universe is too unstable. Vacuum instability is imminent"),t.inflation.vacuum=!0,t.stage.true<6&&(t.stage.true=6),t.stage.current=1,t.stage.active=1,Me(!0),vt())},bt=()=>{let{milestones:e}=t,r='<h4 class="darkvioletText">Unknown Structures:</h4>';e[1][0]>=6&&(r+='<img src="Used_art/Preon.png" alt="Unknown Structure" loading="lazy">'),e[2][1]>=6&&(r+='<img src="Used_art/Ocean.png" alt="Unknown Structure" loading="lazy">'),e[3][1]>=7&&(r+='<img src="Used_art/Subsatellite.png" alt="Unknown Structure" loading="lazy">'),e[4][1]>=8&&(r+='<img src="Used_art/Quasi%20star.png" alt="Unknown Structure" loading="lazy">');let n=a("unknownStructures");n.style.display=i.strangeInfo.instability>0?"":"none",n.innerHTML!==r&&(n.innerHTML=r)};var q=(e,r=null)=>{if(r===null){let n=i.tab;if(a(`${n}Tab`).style.display="none",a(`${n}TabBtn`).classList.remove("tabActive"),Object.hasOwn(i.tabList,`${n}Subtabs`))for(let o of i.tabList[`${n}Subtabs`])a(`${n}SubtabBtn${o}`).style.display="none";i.tab=e;let s=0;if(a(`${e}Tab`).style.display="",a(`${e}TabBtn`).classList.add("tabActive"),Object.hasOwn(i.tabList,`${e}Subtabs`))for(let o of i.tabList[`${e}Subtabs`])oe(e,o)?(a(`${e}SubtabBtn${o}`).style.display="",s++):i.subtab[`${e}Current`]===o&&q(e,i.tabList[`${e}Subtabs`][0]);a("subtabs").style.display=s>1?"":"none",i.screenReader[0]&&(a("SRTab").textContent=`Current tab is '${e}'${s>1?` and subtab is '${i.subtab[`${e}Current`]}'`:""}`)}else{let n=i.subtab[`${e}Current`];a(`${e}Subtab${n}`).style.display="none",a(`${e}SubtabBtn${n}`).classList.remove("tabActive"),i.subtab[`${e}Current`]=r,a(`${e}Subtab${r}`).style.display="",a(`${e}SubtabBtn${r}`).classList.add("tabActive"),i.screenReader[0]&&(a("SRTab").textContent=`Current subtab is '${r}', part of '${e}' tab`)}if(i.lastActive!==null)ie(i.lastActive),i.lastActive=null;else if(i.tab==="research"&&i.subtab.researchCurrent==="Elements"||e==="Elements"){let n=t.stage.active;if(n!==4&&n!==5)if(e==="research"&&r===null){q("research","Researches");return}else i.lastActive=n,ie(4)}ae(),K()},Be=()=>Math.min(7200*t.stage.true+Math.max(t.inflation.vacuum?t.stage.resets*28800:(t.stage.resets-4)*7200,0),172800),Ue=()=>t.strange[0].total>0?172800:86400,He=()=>6-t.strangeness[2][6],Le=()=>(1+t.stage.best/10)*(t.strangeness[4][7]+1),De=(e=1,r=0)=>{let{auto:n,buildings:s}=t.toggles,{vacuum:o}=t.inflation,{maxActive:l,type:c}=i.buildingsInfo,{autoU:u,autoR:m,autoE:h,elements:y}=i.automatization,v;if(r>0){let p=Math.min(e,r);v=p,r-=p}else{let{time:p}=t,S=Date.now();if(v=(S-p.updated)/1e3,p.updated=S,i.lastSave+=v,t.stage.export=Math.min(t.stage.export+v,Ue()),v<0){p.offline+=v;return}else if(p.offline<0)p.offline=Math.min(p.offline+v,0);else if(v>e)e<v/1e3&&(e=v/1e3),r=v-e,v=e;else if(p.offline>0&&t.toggles.normal[0]&&t.strangeness[1][7]>=2){let T=Math.min(Math.max(p.offline/3600,1)*v,p.offline);p.offline-=Math.min(T*He(),p.offline),v+=T}}t.stage.time+=v,t.inflation.age+=v,o&&n[0]&&fe(5,!0);for(let p=0;p<t.strangeness[5][10];p++)wt(p,v);le();for(let p of i.stageInfo.activeAll){!o&&n[0]&&fe(p,!0),p===4?(n[4]&&qe(!0),y.length!==0&&At()):p===3?n[3]&&Fe(!0):p===2?n[2]&&ze(!0):p===1&&n[1]&&Oe(!0),u[p].length!==0&&xt(p),m[p].length!==0&&rt("researches",p),h[p].length!==0&&rt("researchesExtra",p);for(let S=l[p]-1;S>=1;S--)s[p][S]&&t.ASR[p]>=S&&we(S,p,!0),c[p][S]==="producing"&&ve(S-1,p,v);if(p===1)t.upgrades[1][8]===1&&ve(o?5:3,1,v);else if(p===5){let S=t.researches[5][0];S>=1&&ve(1,5,v),S>=2&&ve(2,5,v),S>=3&&ve(3,5,v)}}r>0&&De(e,r)},K=()=>{let{tab:e,subtab:r}=i,n=t.stage.active,s=t.buildings[n];if(i.footer){if(n===1)a("footerStat1Span").textContent=f(s[0].current).format({padding:!0}),a("footerStat2Span").textContent=g(t.discharge.energy);else if(n===2)a("footerStat1Span").textContent=f(t.vaporization.clouds).format({padding:!0}),a("footerStat2Span").textContent=f(s[0].current).format({padding:!0}),a("footerStat3Span").textContent=f(s[1].current).format({padding:s[2].current[0]>0});else if(n===3)a("footerStat1Span").textContent=f(s[0].current).format({padding:!0});else if(n===4||n===5){let o=t.buildings[4];a("footerStat1Span").textContent=g(t.collapse.mass,{padding:!0}),a("footerStat2Span").textContent=f(o[0].current).format({padding:!0}),n===5&&(a("footerStat3Span").textContent=f(o[1].current).plus(o[2].current,o[3].current,o[4].current,o[5].current).format({padding:!0}))}}if(e==="stage")if(r.stageCurrent==="Structures"){let{buildingsInfo:o}=i,l=t.stage.resets<1&&t.discharge.current<1?1:t.toggles.shop.howMany;for(let c=1;c<o.maxActive[n];c++){let u=a(`building${c}True`);if(a(`building${c}Cur`).textContent=f(s[c].current).format({padding:u.style.display!=="none"}),a(`building${c}Prod`).textContent=f(o.producing[n][c]).format({padding:!0}),u.textContent=`[${g(s[c].true)}]`,n===4&&t.collapse.mass<i.collapseInfo.unlockB[c]||n===5&&c<3&&t.collapse.mass<i.collapseInfo.unlockG[c]){a(`building${c}`).classList.remove("availableBuilding"),a(`building${c}Btn`).textContent=`Unlocked at ${g(i.collapseInfo[n===4?"unlockB":"unlockG"][c])} Mass`,a(`building${c}BuyX`).textContent="Locked";continue}let m,h,y=!1;if(n===5&&c===3)m="Mass",h=t.collapse.mass;else{let S=c-1,T=n;n===1?c===1&&t.inflation.vacuum&&(y=t.strangeness[1][10]>=1):n===2?c!==1&&(S=1):n>=3&&(S=0,n===5&&(T=4)),m=o.name[T][S],h=t.buildings[T][S].current}let v=1,p=$e(c,n);if(l!==1){let S=o.increase[n][c],T=o.firstCost[n][c];if(y)v=l===-1?Math.max(Math.floor(f(h).divide(T).log(S).toNumber())-s[c].true+1,1):l,v>1&&(p=f(S).power(v+s[c].true-1).multiply(T).toArray());else{let I=f(S).power(s[c].true).minus("1").divide(S-1).multiply(T).toArray();v=l===-1?Math.max(Math.floor(f(I).plus(h).multiply(S-1).divide(T).plus("1").log(S).toNumber())-s[c].true,1):l,v>1&&(p=f(S).power(v+s[c].true).minus("1").divide(S-1).multiply(T).minus(I).toArray())}}a(`building${c}`).classList[f(p).lessOrEqual(h)?"add":"remove"]("availableBuilding"),a(`building${c}Btn`).textContent=`Need: ${f(p).format({padding:!0})} ${m}`,a(`building${c}BuyX`).textContent=g(v)}if(n===1){st();let c=a("dischargeEffect",!1);c!==null&&(c.textContent=g(i.upgradesInfo[1].effect[5])),a("reset1Button").textContent=`Next goal is ${g(i.dischargeInfo.next)} Energy`}else if(n===2)Ie(),a("reset1Button").textContent=i.vaporizationInfo.get[0]!==0?`Reset for ${f(i.vaporizationInfo.get).format({padding:!0})} Clouds`:`Waiting for ${g(i.vaporizationInfo.effect2U2(),{padding:!0})} Drops`;else if(n===3){let c=i.accretionInfo.rankCost[t.accretion.rank];c!==0&&(a("reset1Button").textContent=`Next Rank is ${g(c)} Mass`)}else if(n===4){let{collapse:c}=t,{collapseInfo:u}=i;Pe(),a("reset1Button").textContent=`Collapse to ${g(u.newMass,{padding:!0})} Mass`;for(let m=1;m<=3;m++)a(`starSpecial${m}Cur`).textContent=g(c.stars[m-1]),a(`starSpecial${m}Get`).textContent=g(u.starCheck[m-1])}if(a("stageTime").textContent=g(t.stage.time,{type:"time"}),t.time.offline>0&&t.toggles.normal[0]&&t.strangeness[1][7]>=2){let c=Math.max(t.time.offline/3600,1);a("offlineBoostEffect").textContent=`+${g(c*1,{digits:0})} seconds`,a("offlineBoostWaste").textContent=`${g(c*He(),{digits:0})} seconds`}i.lastUpgrade[n]>=0&&F(i.lastUpgrade[n],"upgrades")}else r.stageCurrent==="Advanced"&&(t.inflation.vacuum||(a("vacuumEffect").textContent=g(i.strangeInfo.instability)),a("universeAge").textContent=g(t.inflation.age,{type:"time"}));else if(e==="research"||e==="Elements"){let o=e==="Elements"?e:r.researchCurrent;o==="Researches"?i.lastResearch[n][0]>=0&&F(i.lastResearch[n][0],i.lastResearch[n][1]):o==="Elements"&&i.lastElement>=1&&F(i.lastElement,"elements")}else if(e==="strangeness"){if(r.strangenessCurrent==="Matter"){let o=i.strangeInfo.gain(n)/1e12**t.strangeness[5][10];a("strangeGain").textContent=`${g(o)} ${i.strangeInfo.name[t.strangeness[5][10]]}`,a("strangeTime").textContent=`${g(o/t.stage.time,{padding:!0})} per second`,a("strangeBoost").textContent=i.strangeInfo.stageBoost[n]!==null?g(i.strangeInfo.stageBoost[n],{padding:!0}):"none",a("strange0Cur").textContent=g(t.strange[0].current),a("strange1Cur").textContent=g(t.strange[1].current)}}else if(e==="settings"){if(r.settingsCurrent==="Settings")a("exportGain").textContent=g(t.stage.export*Le()/86400/1e12**t.strangeness[5][10],{padding:!0}),i.lastSave>=1&&(a("isSaved").textContent=`${g(i.lastSave,{type:"time"})} ago`),a("massShiftCur").textContent=g(i.inflationInfo.massCap),a("massShiftMin").textContent=g(Se(!1)),a("massShiftMax").textContent=g(Se());else if(r.settingsCurrent==="Stats"){let o=Ue();if(a("firstPlay").textContent=`${new Date(t.time.started).toLocaleString()} (${g((Date.now()-t.time.started)/1e3,{type:"time"})} ago)`,a("stageResetsCount").textContent=g(t.stage.resets),a("stageBestGain").textContent=g(t.stage.best),a("offlineStat").textContent=g(Math.max(t.time.offline,0),{type:"time"}),a("maxOfflineStat").textContent=g(Be(),{type:"time"}),a("maxExportStat").textContent=g(Le()*o/86400/1e12**t.strangeness[5][10]),a("maxExportTime").textContent=g(o,{type:"time"}),n===1)a("maxEnergyStat").textContent=g(t.discharge.energyMax),a("dischargeStat").textContent=g(t.discharge.current+i.dischargeInfo.bonus),a("dischargeStatTrue").textContent=`[${g(t.discharge.current)}]`,t.strangeness[1][11]<1&&(a("energySpent").textContent=g(i.dischargeInfo.energyTrue-t.discharge.energy)),t.inflation.vacuum&&(a("preonCapStat").textContent=f(i.inflationInfo.preonCap).format({padding:!0}),a("preonCapTill").textContent=f(i.inflationInfo.preonTrue).divide(i.inflationInfo.preonCap).format({padding:!0}));else if(n===2){Ie();let u=i.vaporizationInfo,m=u.cloudEffect();a("cloudsEffectCurrent").textContent=f(m).format({padding:!0}),a("cloudsEffectAfter").textContent=`x${f(u.cloudEffect(!0)).divide(m).format({padding:!0})}`;let h=u.rainEffect();if(a("rainEffectCurrent").textContent=g(h,{padding:!0}),a("rainEffectAfter").textContent=`x${g(u.rainEffect(!0)/h,{padding:!0})}`,a("maxCloudsStat").textContent=f(t.vaporization.cloudsMax).format(),t.inflation.vacuum){let y=t.buildings[1][5];s[0].total=f(y.total).divide("6.02214076e23").toArray(),s[0].trueTotal=f(y.trueTotal).divide("6.02214076e23").toArray(),s[0].highest=f(y.highest).divide("6.02214076e23").toArray(),a("oceanWorldEffect").textContent=g(u.oceanWorld(),{padding:!0})}}else if(n===3){if(a("effectiveRank").textContent=g(i.accretionInfo.effective),t.inflation.vacuum){let u=t.buildings[1][0];s[0].total=f(u.total).multiply("1.78266192e-33").toArray(),s[0].trueTotal=f(u.trueTotal).multiply("1.78266192e-33").toArray(),s[0].highest=f(u.highest).multiply("1.78266192e-33").toArray(),a("dustCapStat").textContent=f(i.inflationInfo.dustCap).format({padding:!0}),a("dustCapTill").textContent=f(i.inflationInfo.dustTrue).divide(i.inflationInfo.dustCap).format({padding:!0})}}else if(n===4||n===5){if(Pe(),a("maxSolarMassStat").textContent=g(t.collapse.massMax),t.inflation.vacuum&&(a("mainCapStat").textContent=f(i.buildingsInfo.producing[1][1]).multiply("8.96499278339628e-67",i.inflationInfo.massCap).format({padding:!0}),a("mainCapLimit").textContent=g(i.inflationInfo.massCap,{type:"time"})),n===4){let{starEffect:u,massEffect:m}=i.collapseInfo,h=m();a("starMassStatCurrent").textContent=g(h,{padding:!0}),a("starMassStatAfter").textContent=`x${g(m(!0)/h,{padding:!0})}`;for(let y=0;y<=2;y++){let v=u[y]();a(`star${y+1}StatCurrent`).textContent=g(v,{padding:!0}),a(`star${y+1}StatAfter`).textContent=`x${g(u[y](!0)/v,{padding:!0})}`}}else if(n===5){a("starsStatTrue").textContent=g(i.collapseInfo.trueStars);let u=t.buildings[4];s[0].current=f(u[1].current).plus(u[2].current,u[3].current,u[4].current,u[5].current).toArray(),s[0].total=f(u[1].total).plus(u[2].total,u[3].total,u[4].total,u[5].total).toArray(),s[0].trueTotal=f(u[1].trueTotal).plus(u[2].trueTotal,u[3].trueTotal,u[4].trueTotal,u[5].trueTotal).toArray(),s[0].highest=f(u[1].highest).plus(u[2].highest,u[3].highest,u[4].highest,u[5].highest).toArray()}}for(let u=0;u<s.length;u++)a(`building${u}StatTotal`).textContent=f(s[u].total).format(),a(`building${u}StatTrueTotal`).textContent=f(s[u].trueTotal).format(),a(`building${u}StatHighest`).textContent=f(s[u].highest).format();let{strange:l}=t,c=Math.floor(l[1].current*1e12);for(let u=0;u<l.length;u++)a(`strange${u}StatTotal`).textContent=g(l[u].total);a("strange0StatProd").textContent=g(c),a("strange1StatProd").textContent=g(Math.max(1,(c-l[0].current)/600),{padding:!0})}}},ae=()=>{let{tab:e,subtab:r}=i,n=t.stage.active;if(i.footer&&!t.toggles.normal[2]){let s=a("ElementsTabBtn",!1);s!==null&&(s.style.display=t.upgrades[4][1]===1?"":"none")}if(n===1?(i.footer&&t.stage.resets<1&&(a("footerStat2").style.display=t.discharge.energyMax>=(t.inflation.vacuum?36:9)?"":"none",a("researchTabBtn").style.display=t.discharge.current>=4?"":"none"),!t.events[0]&&t.upgrades[1][6]===1&&ne(0,0)):n===2?(i.footer&&(a("footerStat1").style.display=t.upgrades[2][2]===1?"":"none"),t.events[0]||(Ie(),f(i.vaporizationInfo.get).plus(t.vaporization.clouds).moreThan("1e4")&&ne(1,0))):n===3?!t.events[0]&&f(t.buildings[3][0].current).moreOrEqual("5e29")&&ne(2,0):n===4&&!t.events[0]&&t.elements[1]>0&&ne(3,0),e==="stage")if(r.stageCurrent==="Structures"){let s=t.buildings[n],o=t.stage.resets>=1||t.discharge.current>=1,l=t.ASR[n];if(!t.inflation.vacuum){let c=n>=4?"Return back to start":n===t.stage.current?"Enter next Stage":"Reset this Stage",u=(n>=4?t.strange[0].total===0:n===t.stage.current)?"Not ready for more":"Not ready for reset";a("stageReset").textContent=(n>=4?t.events[1]&&t.stage.current>=5:fe(n))?c:u}a("toggleBuy").style.display=o?"":"none",a("autoWaitInput").style.display=t.strangeness[1][7]>=1?"":"none",a("toggleBuilding0").style.display=t.strangeness[1][7]>=1?"":"none",a("offlineBoost").style.display=t.time.offline>0&&t.toggles.normal[0]&&t.strangeness[1][7]>=2?"":"none",a("offlineWarning").style.display=t.time.offline>0&&t.time.offline>=Be()?"":"none";for(let c=1;c<i.buildingsInfo.maxActive[n];c++)a(`building${c}True`).style.display=f(s[c].current).notEqual(s[c].true)?"":"none",a(`toggleBuilding${c}`).style.display=l>=c?"":"none",a(`building${c}BuyDiv`).style.display=o?"":"none";if(n===1){let c=t.discharge.current>=3;a("reset1Main").style.display=t.upgrades[1][5]===1?"":"none",a("building2").style.display=f(s[1].trueTotal).moreOrEqual(t.inflation.vacuum?"4":"11")?"":"none",a("building3").style.display=f(s[2].trueTotal).moreOrEqual("2")?"":"none",t.inflation.vacuum&&(a("building4").style.display=f(s[3].trueTotal).moreOrEqual("8")?"":"none",a("building5").style.display=f(s[4].trueTotal).moreOrEqual("2")?"":"none"),a("upgrade7").style.display=c?"":"none",a("upgrade8").style.display=c?"":"none",a("upgrade9").style.display=c?"":"none",a("upgrade10").style.display=c?"":"none",t.stage.resets<1&&(a("upgrades").style.display=t.discharge.energyMax>=(t.inflation.vacuum?36:9)?"":"none"),t.stage.true<2&&(a("resetStage").style.display=t.upgrades[1][9]===1?"":"none",a("stageTimeMain").style.display=t.upgrades[1][9]===1?"":"none")}else if(n===2)a("reset1Main").style.display=t.upgrades[2][2]===1?"":"none",a("building2").style.display=f(s[1].trueTotal).moreOrEqual("200")?"":"none",a("building3").style.display=f(s[1].trueTotal).moreOrEqual("4e6")?"":"none",a("building4").style.display=f(s[1].trueTotal).moreOrEqual("4e17")?"":"none",a("building5").style.display=f(s[1].trueTotal).moreOrEqual("4e22")?"":"none",a("upgrade2").style.display=s[2].trueTotal[0]>0?"":"none",a("upgrade3").style.display=s[3].trueTotal[0]>0?"":"none",a("upgrade4").style.display=s[2].trueTotal[0]>0?"":"none",a("upgrade5").style.display=s[2].trueTotal[0]>0?"":"none",a("upgrade6").style.display=s[3].trueTotal[0]>0?"":"none",a("upgrade7").style.display=s[4].trueTotal[0]>0?"":"none",a("upgrade8").style.display=s[5].trueTotal[0]>0&&t.strangeness[2][2]>=3?"":"none",t.inflation.vacuum&&(a("building6").style.display=t.strangeness[2][8]>=1&&f(s[1].trueTotal).moreOrEqual("8e24")?"":"none");else if(n===3){let c=t.accretion.rank,u=t.upgrades[3];a("buildings").style.display=c>=1?"":"none",a("building2").style.display=u[2]===1?"":"none",a("building3").style.display=u[4]===1?"":"none",a("building4").style.display=u[6]===1?"":"none",t.inflation.vacuum&&(a("building5").style.display=c>=5&&u[11]===1&&t.strangeness[3][8]>=1?"":"none"),a("upgrades").style.display=c>=1?"":"none",a("upgrade3").style.display=c>=2?"":"none",a("upgrade4").style.display=s[2].trueTotal[0]>0?"":"none",a("upgrade5").style.display=c>=3?"":"none",a("upgrade6").style.display=c>=4||u[4]===1?"":"none",a("upgrade7").style.display=c>=4?"":"none",a("upgrade8").style.display=c>=4?"":"none",a("upgrade9").style.display=c>=4&&t.strangeness[3][2]>=3?"":"none",a("upgrade10").style.display=c>=4?"":"none",a("upgrade11").style.display=c>=5?"":"none",a("upgrade12").style.display=c>=5?"":"none",a("upgrade13").style.display=c>=5?"":"none"}else if(n===4){let c=t.researchesExtra[4][0];a("starsSpecial").style.display=s[2].trueTotal[0]>0?"":"none",a("starSpecial2").style.display=s[3].trueTotal[0]>0?"":"none",a("starSpecial3").style.display=s[4].trueTotal[0]>0?"":"none",a("reset1Main").style.display=t.upgrades[4][0]===1?"":"none",a("building2").style.display=c>=1?"":"none",a("building3").style.display=c>=2?"":"none",a("building4").style.display=c>=3?"":"none",t.inflation.vacuum&&(a("building5").style.display=t.strangeness[4][9]>=1&&(t.collapse.stars[2]>0||t.buildings[5][3].true>0)?"":"none"),a("upgrade4").style.display=t.strangeness[4][2]>=1?"":"none"}else if(n===5){if(!t.inflation.vacuum){let c=t.milestones[2][0]>=6,u=t.milestones[3][0]>=7;a("buildings").style.display=c||u?"":"none",a("building1").style.display=c?"":"none",a("building2").style.display=u?"":"none",a("upgrades").style.display=c||u?"":"none",a("upgrade1").style.display=c?"":"none",a("upgrade2").style.display=u?"":"none"}a("building3").style.display=t.strangeness[5][6]>=1?"":"none",a("upgrade3").style.display=s[3].true>=1?"":"none"}}else r.stageCurrent==="Advanced"&&t.inflation.vacuum&&(a("challenge1").style.display=t.strangeness[5][0]>=1?"":"none");else if(e==="research"||e==="Elements"){let s=e==="Elements"?e:r.researchCurrent;if(s==="Researches")if(n===1)a("stageResearch").style.display=t.discharge.current>=4?"":"none",t.inflation.vacuum&&(a("researchExtra2").style.display=t.researchesExtra[1][2]>=2?"":"none",a("researchExtra4").style.display=t.researchesExtra[1][2]>=1?"":"none",a("researchExtra5").style.display=t.accretion.rank>=6?"":"none",a("extraResearch").style.display=t.discharge.current>=5?"":"none");else if(n===2){let o=t.buildings[2];a("extraResearch").style.display=t.vaporization.clouds[0]>0?"":"none",a("research2").style.display=o[2].trueTotal[0]>0?"":"none",a("research3").style.display=o[2].trueTotal[0]>0?"":"none",a("research4").style.display=o[2].trueTotal[0]>0?"":"none",a("research5").style.display=o[3].trueTotal[0]>0?"":"none",a("research6").style.display=o[4].trueTotal[0]>0?"":"none",a("researchExtra3").style.display=o[5].trueTotal[0]>0?"":"none",a("researchExtra4").style.display=t.accretion.rank>=6?"":"none"}else if(n===3){let o=t.accretion.rank;a("stageResearch").style.display=o>=1?"":"none",a("research3").style.display=t.buildings[3][2].trueTotal[0]>0?"":"none",a("research4").style.display=t.buildings[3][2].trueTotal[0]>0?"":"none",a("research5").style.display=o>=3?"":"none",a("research6").style.display=o>=3?"":"none",a("research7").style.display=o>=4||t.upgrades[3][4]===1?"":"none",a("research8").style.display=o>=4?"":"none",a("research9").style.display=o>=5?"":"none",a("extraResearch").style.display=o>=2?"":"none",a("researchExtra2").style.display=o>=3?"":"none",a("researchExtra3").style.display=o>=4?"":"none",a("researchExtra4").style.display=o>=5?"":"none",t.inflation.vacuum&&(a("researchExtra5").style.display=o>=3&&t.researchesExtra[1][2]>=2?"":"none")}else if(n===4){let o=t.collapse.stars,l=t.buildings[5][3].true>=1;a("research4").style.display=(l||o[0]>0)&&t.strangeness[4][2]>=2?"":"none",a("research5").style.display=l||o[2]>0?"":"none",a("researchExtra2").style.display=l||o[0]>0?"":"none",a("researchExtra3").style.display=(l||o[0]>0)&&t.strangeness[4][2]>=3?"":"none"}else n===5&&(t.inflation.vacuum||(a("stageResearch").style.display=t.milestones[2][0]>=6||t.milestones[3][0]>=7?"":"none",a("research1").style.display=t.milestones[2][0]>=6?"":"none",a("research2").style.display=t.milestones[3][0]>=7?"":"none"));else if(s==="Elements"){let o=t.collapse.stars[1]>0||t.buildings[5][3].true>=1,l=t.upgrades[4],c=a("elementsGrid");c.style.display=l[2]===1?"":"flex";for(let u=6;u<=10;u++)a(`element${u}`).style.display=l[2]===1?"":"none";l[2]===1&&!o?c.classList.add("Elements10App"):c.classList.remove("Elements10App");for(let u=11;u<=26;u++)a(`element${u}`).style.display=o?"":"none";a("element27").style.display=l[3]===1?"":"none",a("element28").style.display=l[3]===1?"":"none"}}else if(e==="strangeness")if(r.strangenessCurrent==="Matter"){let s=t.inflation.vacuum,o=t.strangeness[5][5]>=1;if(a("strange1").style.display=t.strangeness[5][10]>=1?"":"none",a("strange4Stage5").style.display=(s?o:t.milestones[2][0]>=6)?"":"none",a("strange5Stage5").style.display=(s?o:t.milestones[3][0]>=7)?"":"none",a("strange8Stage5").style.display=(s?o:t.milestones[2][0]>=6||t.milestones[3][0]>=7)?"":"none",a("strange7Stage5").style.display=!s&&o?"":"none",s){let l=t.challenges.void;a("strange10Stage1").style.display=l[1]>=1?"":"none",a("strange11Stage1").style.display=l[1]>=2?"":"none",a("strange12Stage1").style.display=l[4]>=2?"":"none",a("strange10Stage2").style.display=l[2]>=1?"":"none",a("strange11Stage2").style.display=l[2]>=2?"":"none",a("strange10Stage3").style.display=l[4]>=4?"":"none",a("strange11Stage3").style.display=l[1]>=3?"":"none",a("strange11Stage4").style.display=l[4]>=3?"":"none",a("strange9Stage5").style.display=l[4]>=1?"":"none",a("strange10Stage5").style.display=o?"":"none",a("strange11Stage5").style.display=l[3]>=5?"":"none"}else{let l=t.milestones[4][0]>=8;a("strangeBoostMain").style.display=l?"":"none",a("strange9Stage1").style.display=l?"":"none",a("strange8Stage2").style.display=l?"":"none",a("strange8Stage3").style.display=l?"":"none",a("strange9Stage4").style.display=l?"":"none",a("strangenessSection5").style.display=l?"":"none",a("strange6Stage5").style.display=t.milestones[2][0]>=6||t.milestones[3][0]>=7?"":"none"}}else r.strangenessCurrent==="Milestones"&&(t.inflation.vacuum||(a("milestone1Stage5Div").style.display=t.strangeness[5][8]>=1?"":"none",a("milestone2Stage5Div").style.display=t.strangeness[5][8]>=1&&t.strangeness[5][6]>=1?"":"none"));else if(e==="settings"){if(r.settingsCurrent==="Settings"){let{strangeness:s}=t,o=t.stage.true;a("toggleAuto0").style.display=s[5][2]>=1?"":"none",a("toggleAuto0Main").style.display=s[5][2]>=1?"":"none",a("exportSpecial").style.display=t.strange[0].total>0?"":"none",a("exportType").textContent=i.strangeInfo.name[s[5][10]],a("saveNameMatter").style.display=s[5][10]>=1?"":"none",a("allStructuresHotkey").style.display=s[1][7]>=1?"":"none",a("toggle0").style.display=s[1][7]>=2?"":"none",a("offlineHotkey").style.display=s[1][7]>=2?"":"none",a("autoToggle5").style.display=s[3][6]>=1?"":"none",a("autoToggle6").style.display=s[3][6]>=2?"":"none",a("autoToggle7").style.display=s[3][6]>=3?"":"none",a("autoToggle8").style.display=s[4][4]>=2?"":"none",a("toggleAuto1").style.display=s[1][3]>=1?"":"none",a("toggleAuto2").style.display=s[2][4]>=1?"":"none",a("toggleAuto2Main").style.display=s[2][4]>=1?"":"none",a("toggleAuto3").style.display=s[3][4]>=1?"":"none",a("toggleAuto3Main").style.display=s[3][9]>=1?"":"none",a("toggleAuto4").style.display=s[4][5]>=1?"":"none",a("toggleAuto4Main").style.display=s[4][5]>=1?"":"none",a("stageReward").textContent=i.strangeInfo.name[s[5][10]],a("collapseGalaxy").style.display=s[5][6]>=2?"":"none",o<2&&(a("resetToggles").style.display=t.discharge.current>=1?"":"none"),o<3&&(a("vaporizationToggleReset").style.display=t.vaporization.clouds[0]>0?"":"none"),o<4&&(a("rankToggleReset").style.display=t.accretion.rank>=2?"":"none"),o<5&&(a("collapseToggleReset").style.display=t.collapse.mass>.01235?"":"none",a("elementsAsSubtab").style.display=t.upgrades[4][1]===1?"":"none"),o<7&&(a("switchTheme6").style.display=o===6&&s[5][0]>=1?"":"none")}else if(r.settingsCurrent==="History"){let s=t.history.stage.best,o=s[0]/1e12**s[2];a("stageBestReset1").textContent=`${g(o)} ${i.strangeInfo.name[s[2]]}`,a("stageBestReset2").textContent=g(s[1],{type:"time"}),a("stageBestReset3").textContent=`${g(o/s[1],{padding:!0})} per second`,Pt()}else if(r.settingsCurrent==="Stats"){let{strange:s}=t,o=t.buildings[n];a("maxExportStats").style.display=s[0].total>0?"":"none",a("maxExportType").textContent=i.strangeInfo.name[t.strangeness[5][10]],a("stageBest").style.display=s[0].total>0?"":"none",a("stageResets").style.display=t.stage.resets>0?"":"none";for(let l=1;l<i.buildingsInfo.maxActive[n];l++)a(`building${l}Stats`).style.display=o[l].trueTotal[0]>0?"":"none";a("strangeAllStats").style.display=s[0].total>0?"":"none";for(let l=1;l<s.length;l++)a(`strange${l}Stats`).style.display=s[l].total>0?"":"none";if(a("strange0StatProdDiv").style.display=t.strangeness[5][10]>=1?"":"none",a("solarMassStats").style.display=n===4||n===5?"":"none",t.inflation.vacuum||bt(),n===1)a("energyTrue").style.display=t.strangeness[1][11]<1&&t.discharge.energyMax>=(t.inflation.vacuum?36:9)?"":"none",a("energyStats").style.display=t.discharge.energyMax>=(t.inflation.vacuum?36:9)?"":"none",a("dischargeStats").style.display=t.discharge.current+i.dischargeInfo.bonus>0?"":"none",a("dischargeStatTrue").style.display=i.dischargeInfo.bonus>0?"":"none";else if(n===2)a("cloudsEffect").style.display=t.upgrades[2][2]===1?"":"none",a("rainEffect").style.display=t.researchesExtra[2][1]>=1?"":"none",a("cloudsStats").style.display=t.vaporization.cloudsMax[0]>0?"":"none",a("oceanWorld").style.display=t.strangeness[2][9]>=1?"":"none";else if(n===3){t.inflation.vacuum&&(a("rankStat0").style.display=t.strangeness[2][9]>=1?"":"none");for(let l=1;l<i.accretionInfo.rankImage.length;l++)a(`rankStat${l}`).style.display=t.accretion.rank>=l?"":"none"}else n===4&&(a("star1Stats").style.display=o[2].trueTotal[0]>0?"":"none",a("star2Stats").style.display=o[3].trueTotal[0]>0?"":"none",a("star3Stats").style.display=o[4].trueTotal[0]>0?"":"none")}}},F=(e,r)=>{if(r==="elements"){let{elementsInfo:s}=i;i.lastElement=e,a("elementText").textContent=`${s.name[e]}.`,a("elementEffect").textContent=t.elements[e]>=1||t.collapse.show>=e&&e!==0?s.effectText[e]():"Effect is not yet known.",a("elementCost").textContent=t.elements[e]>=1?"Obtained.":t.elements[e]>0?"Awaiting Collapse.":`${g(s.startCost[e])} ${i.stageInfo.priceName}.`;return}let n=t.stage.active;if(r==="upgrades"){let s=i.upgradesInfo[n];i.lastUpgrade[n]=e,a("upgradeText").textContent=`${s.name[e]}.`,a("upgradeEffect").textContent=s.effectText[e](),a("upgradeCost").textContent=t.upgrades[n][e]>=1?"Created.":n===4&&i.collapseInfo.unlockU[e]>t.collapse.mass?`Unlocked at ${g(i.collapseInfo.unlockU[e])} Mass.`:`${g(s.startCost[e])} ${i.stageInfo.priceName}.`}else if(r==="researches"||r==="researchesExtra"){let s=i[`${r}Info`][n];i.lastResearch[n]=[e,r],r==="researchesExtra"&&n===4&&e===0&&(s.name[0]=["Nova","Supernova","Hypernova"][Math.min(t.researchesExtra[4][0],2)]),a("researchText").textContent=`${s.name[e]}.`,a("researchEffect").textContent=s.effectText[e](),a("researchCost").textContent=t[r][n][e]>=s.max[e]?"Maxed.":n===4&&r==="researches"&&i.collapseInfo.unlockR[e]>t.collapse.mass?`Unlocked at ${g(i.collapseInfo.unlockR[e])} Mass.`:`${g(s.cost[e])} ${i.stageInfo.priceName}.`}else if(r==="ASR"){let s=Math.min(t.ASR[n]+1,i.ASRInfo.max[n]);i.lastResearch[n]=[0,"ASR"],a("researchText").textContent="Structure Automation.",a("researchEffect").textContent=`Automatically make ${t.buildings[n][s].highest[0]>0?i.buildingsInfo.name[n][s]:"(unknown)"}.
(Auto will wait until ${g(t.strangeness[1][7]<1?2:t.toggles.shop.wait[n])} times of the Structure cost)`,a("researchCost").textContent=t.ASR[n]>=i.ASRInfo.max[n]?"Maxed.":`${g(i.ASRInfo.cost[n])} ${i.stageInfo.priceName}.`}},ge=(e,r,n)=>{let s=a(`${n}Stage`);if(s.style.color=i.stageInfo.textColor[r],s.textContent=`${i.stageInfo.word[r]}. `,n==="strangeness"){let o=i.strangenessInfo[r];a("strangenessText").textContent=`${o.name[e]}.`,a("strangenessEffect").textContent=o.effectText[e](),a("strangenessCost").textContent=t.strangeness[r][e]>=o.max[e]?"Maxed.":`${g(o.cost[e])} Strange quarks.`}else{let o=i.milestonesInfo[r];a("milestonesText").textContent=`${o.name[e]}. (${g(t.milestones[r][e])})`,t.inflation.vacuum?a("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${o.needText[e]()}</span></p>
            <p class="darkvioletText">Effect: <span class="greenText">${o.rewardText[e]()}</span></p>`:o.need[e][0]!==0?a("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${o.needText[e]()}</span></p>
            <p class="darkvioletText">Unlock: <span class="greenText">Main reward unlocked after ${o.scalingOld[e].length-t.milestones[r][e]} more completions.</span></p>`:a("milestonesMultiline").innerHTML=`<p class="darkvioletText">Reward: <span class="greenText">${o.rewardText[e]()}</span></p>`}},me=e=>{let r=a("challengeMultiline"),n;if(e===-1)n=`<h3 class="orchidText">Vacuum state: <span ${t.inflation.vacuum?'class="greenText">true':'class="redText">false'}</span></h3>`;else{let{challengesInfo:s}=i,o=`${s.color[e]}Text`;n=`<h3 class="${o} bigWord">${s.name[e]}${t.challenges.active===e?', <span class="greenText">active</span>':""}</h3>
        <p class="whiteText">${s.description[e]}</p>
        <div><h4 class="${o} bigWord">Effect:</h4>
        <p>${s.effectText[e]()}</p></div>`}if(e===0){let s=t.challenges.void;a("voidRewards").style.display="",a("voidRewardSubmerged").style.display=s[1]>=3?"":"none",a("voidRewardAccretion").style.display=s[1]>=2?"":"none",a("voidRewardInterstellar").style.display=s[3]>=5?"":"none"}else a("voidRewards").style.display="none";r.innerHTML!==n&&(r.innerHTML=n)},St=e=>{let r=i.challengesInfo.needText[0][e],n=i.challengesInfo.rewardText[0][e],s=t.challenges.void[e],o="";for(let c=0;c<r.length;c++)o+=`<div><p><span class="${s>c?"greenText":"redText"}">\u2192</span> ${r[c]}</p>
        <p><span class="${s>c?"greenText":"redText"}">Reward:</span> ${s>c?n[c]:"Not yet unlocked"}</p></div>`;let l=a("voidRewardsDivText");l.innerHTML!==o&&(l.innerHTML=o)},Z=(e,r,n)=>{if(n==="upgrades"){if(r!==t.stage.active)return;let s="",o=a(`upgrade${e+1}`);t.upgrades[r][e]>=1?(r===1?s="green":r===2?s="darkgreen":r===3?s="#0000b1":r===4?s="#1f1f8f":r===5&&(s="#990000"),o.tabIndex=i.screenReader[1]?-1:0):o.tabIndex=0,o.style.backgroundColor=s}else{let s=a(`element${e}`);t.elements[e]>=1?(s.classList.remove("awaiting"),s.classList.add("created"),s.tabIndex=i.screenReader[1]?-1:0):t.elements[e]>0?(s.classList.add("awaiting"),s.classList.remove("created"),s.tabIndex=0):(s.classList.remove("awaiting"),s.classList.remove("created"),s.tabIndex=0)}},_=(e,r,n)=>{let s,o,l,c;if(n==="researches"||n==="researchesExtra"){if(r!==t.stage.active)return;s=i[`${n}Info`][r].max[e],o=t[n][r][e];let u=n==="researches"?"":"Extra";l=a(`research${u}${e+1}Level`),a(`research${u}${e+1}Max`).textContent=`${s}`,c=B(`#research${u}${e+1} > input`)}else if(n==="ASR"){if(r!==t.stage.active)return;s=i.ASRInfo.max[r],o=t.ASR[r],l=a("ASRLevel"),a("ASRMax").textContent=`${s}`,c=B("#ASR > input")}else s=i.strangenessInfo[r].max[e],o=t.strangeness[r][e],l=a(`strange${e+1}Stage${r}Level`),a(`strange${e+1}Stage${r}Max`).textContent=`${s}`,c=B(`#strange${e+1}Stage${r} > input`);l.textContent=`${o}`,o>=s?(l.style.color="var(--green-text-color)",c.tabIndex=i.screenReader[1]?-1:0):o===0?(l.style.color="",c.tabIndex=0):(l.style.color="var(--orchid-text-color)",c.tabIndex=0)},Pt=()=>{let e=i.historyStorage.stage,r="";if(e.length>0)for(let s=0;s<e.length;s++){let o=e[s][0]/1e12**e[s][2];r+=`<li class="whiteText"><span class="greenText">${g(o)} ${i.strangeInfo.name[e[s][2]]}</span>, <span class="blueText">${g(e[s][1],{type:"time"})}</span>, <span class="darkorchidText">${g(o/e[s][1],{padding:!0})} per second</span></li>`}else r='<li class="redText">Reference list is empty</li>';let n=a("stageResetsList");n.innerHTML!==r&&(n.innerHTML=r)},g=(e,r={})=>{if(typeof e!="number")return f(e).format(r);let n=r.type!==void 0?r.type:"number";switch(n){case"input":case"number":{if(!isFinite(e))return`${e}`;let s=Math.abs(e);if(s>=1e6||s<.001&&s>0){let o=r.digits!==void 0?r.digits:2,l=Math.floor(Math.log10(s)),c=Math.round(e/10**(l-o))/10**o;Math.abs(c)===10&&(c=1,l++);let u=r.padding===!0?c.toFixed(o):`${c}`;return n==="input"?`${u}e${l}`:`${u.replace(".",t.separator[1])}e${l}`}else{let o=s>=1e3?0:r.digits!==void 0?r.digits:s<1?4:2,l=Math.round(e*10**o)/10**o,c=r.padding===!0?l.toFixed(o):`${l}`;return n==="input"?c:l>=1e3?c.replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0]):c.replace(".",t.separator[1])}}case"time":return e>86399999?`${Math.round(e/31556952)} years`:e>3599999?`${Math.round(e/86400)} days`:e>59999?`${Math.round(e/3600)} hours`:e>999?`${Math.round(e/60)} minutes`:`${Math.round(e)} seconds`}},O=(e="normal")=>{let{stageInfo:r,buildingsInfo:n}=i,{active:s,current:o,true:l,resets:c}=t.stage,u=t.inflation.vacuum;r.activeAll=[u?1:o];let m=r.activeAll;if(u)t.researchesExtra[1][2]>=2&&t.challenges.active!==0&&m.push(2),t.researchesExtra[1][2]>=1&&m.push(3),t.accretion.rank>=6&&t.challenges.active!==0&&(m.push(4),t.strangeness[5][5]>=1&&t.challenges.active!==0&&m.push(5));else{o===4?t.milestones[5][0]>=6&&m.push(5):o===5&&m.unshift(4);for(let d=t.strangeness[5][0];d>=1;d--)o!==d&&m.unshift(d)}for(let d=1;d<=6;d++){for(let x of ue(`stage${d}Only`))x.style.display=s===d?"":"none";for(let x of ue(`stage${d}Include`))x.style.display=m.includes(d)?"":"none";for(let x of ue(`stage${d}Unlock`))x.style.display=l>=d?"":"none"}if(a("stageSelect").style.display=m.length>1?"":"none",t.strange[0].total===0&&(a("strangenessTabBtn").style.display="none"),u)a("stageReset").textContent=o>=5?"Return back to start":"Not ready for reset",c<1?o<5&&(a("resetStage").style.display="none",a("stageTimeMain").style.display="none",a("stageToggleReset").style.display="none",a("stageSwitchHotkey").style.display="none"):(a("dischargeToggleReset").style.display="",a("vaporizationToggleReset").style.display="",a("rankToggleReset").style.display="",a("collapseToggleReset").style.display="");else for(let d=2;d<=4;d++)a(`strangenessSection${d}`).style.display=c>=d+3?"":"none",a(`milestone1Stage${d}Div`).style.display=c>=d+3?"":"none",a(`milestone2Stage${d}Div`).style.display=c>=d+3?"":"none";let h=a("stageWord");if(h.textContent=r.word[o],h.style.color=r.textColor[o],e==="soft"){K(),ae();return}else if(i.screenReader[0]){a("reset1Main").setAttribute("aria-label",`${["","Discharge","Vaporization","Rank","Collapse",""][s]} reset (hotkey ${["","D","V","R","C"][s]})`);for(let d=1;d<n.maxActive[s];d++)a(`building${d}`).setAttribute("aria-label",`${n.name[s][d]} (hotkey ${d})`);a("extraResearch").setAttribute("aria-label",`${["","Energy","Cloud","Rank","Collapse",""][s]} researches`),a("SRStage").textContent=`Current Active Stage is '${r.word[s]}'${e==="reload"&&t.challenges.active!==0?`, also inside '${i.challengesInfo.name[t.challenges.active-1]}' challenge`:""}`}for(let d of["upgrade","research","element"])a(`${d}Text`).textContent="Hover to see.",a(`${d}Effect`).textContent="Hover to see.",a(`${d}Cost`).textContent="Resource.";if(e==="reload"){for(let d=1;d<=5;d++)i.lastUpgrade[d]=-1,i.lastResearch[d][0]=-1;i.lastElement=-1;for(let d of["strangeness","milestones"])a(`${d}Stage`).textContent="",a(`${d}Text`).textContent="Hover to see.";a("strangenessEffect").textContent="Hover to see.",a("strangenessCost").textContent="Strange quarks.",a("milestonesMultiline").innerHTML='<p class="orchidText">Requirement: <span class="greenText">Hover to see.</span></p><p class="darkvioletText">Unlock: <span class="greenText">Hover to see.</span></p>',me(-1),i.lastActive=null;for(let d=0;d<i.elementsInfo.startCost.length;d++)Z(d,4,"elements");le(),de("all"),J("researches","all"),J("researchesExtra","all"),pe()}for(let d=n.maxActive[s];d<C.longestBuilding;d++)a(`building${d}Stats`).style.display="none",a(`building${d}`).style.display="none";for(let d=i.upgradesInfo[s].maxActive;d<C.longestUpgrade;d++)a(`upgrade${d+1}`).style.display="none";for(let d=i.researchesInfo[s].maxActive;d<C.longestResearch;d++)a(`research${d+1}`).style.display="none";for(let d=i.researchesExtraInfo[s].maxActive;d<C.longestResearchExtra;d++)a(`researchExtra${d+1}`).style.display="none";for(let d=C.footerStatsHTML[s].length;d<C.longestFooterStats;d++)a(`footerStat${d+1}`).style.display="none";let y=[],v=[],p=[],S=[];s===1?(y.push(3,4,5,6),v.push(1,2,3,4,5,6),S.push(1,2),u?(y.unshift(1,2),p.push(1,3)):(a("upgrade1").style.display="none",a("upgrade2").style.display="none",a("extraResearch").style.display="none")):s===2?(y.push(1),v.push(1,2),p.push(1,2),S.push(2,3)):s===3?(a("reset1Main").style.display="",y.push(1,2),v.push(1,2),p.push(1),S.push(1)):s===4?(a("extraResearch").style.display="",y.push(1,2,3),v.push(1,2,3),p.push(1),S.push(1,2)):s===5&&(a("reset1Main").style.display="none",a("extraResearch").style.display="none",S.push(1,2,3),u&&(a("building2").style.display="",y.push(1,2),v.push(1,2))),a("autoWaitInput").value=g(t.toggles.shop.wait[s],{type:"input"}),a("reset1Text").innerHTML=C.resetHTML[s],s===3&&Ce();let T=C.buildingHTML[s];for(let d=1;d<n.maxActive[s];d++)a(`building${d}Image`).src=`Used_art/${T[d-1]}`,a(`building${d}StatName`).textContent=n.name[s][d],a(`building${d}Name`).textContent=n.name[s][d],B(`#building${d}ProdDiv > span`).textContent=n.type[s][d],a(`building${d}ProdDiv`).title=n.hoverText[s][d-1],D(d,"buildings");a("building0StatName").textContent=n.name[s][0],D(0,"buildings");let I=C.upgradeHTML[s];for(let d=0;d<i.upgradesInfo[s].maxActive;d++){let x=a(`upgrade${d+1}`);y.includes(d+1)&&(x.style.display=""),x.src=`Used_art/${I[d][0]}`,x.alt=I[d][1],Z(d,s,"upgrades")}let H=C.researchHTML[s];for(let d=0;d<i.researchesInfo[s].maxActive;d++){let x=a(`research${d+1}`);v.includes(d+1)&&(x.style.display=""),x.className=H[d][2];let k=a(`research${d+1}Image`);k.src=`Used_art/${H[d][0]}`,k.alt=H[d][1],_(d,s,"researches")}if(s!==5){let d=C.researchExtraHTML[s];for(let x=0;x<i.researchesExtraInfo[s].maxActive;x++){let k=a(`researchExtra${x+1}`);p.includes(x+1)&&(k.style.display=""),k.className=d[x][2];let E=a(`researchExtra${x+1}Image`);E.src=`Used_art/${d[x][0]}`,E.alt=d[x][1],_(x,s,"researchesExtra")}B("#extraResearch > div").className=C.researchExtraDivHTML[s][1],B("#extraResearch > img").src=`Used_art/${C.researchExtraDivHTML[s][0]}`}_(0,s,"ASR");let z=C.footerStatsHTML[s];for(let d=0;d<z.length;d++)S.includes(d+1)&&(a(`footerStat${d+1}`).style.display=""),B(`#footerStat${d+1} > img`).src=`Used_art/${z[d][0]}`,B(`#footerStat${d+1} > p`).className=z[d][1],a(`footerStat${d+1}Name`).textContent=z[d][2];r.priceName=["","Energy","Drops","Mass","Elements","Elements"][s];let A=document.body.style;s===1?(A.removeProperty("--stage-text-color"),A.removeProperty("--stage-button-color"),A.removeProperty("--stage-button-border"),A.removeProperty("--image-border-main"),A.removeProperty("--image-stage-outer")):(A.setProperty("--stage-text-color",r.textColor[s]),A.setProperty("--stage-button-color",r.buttonBackgroundColor[s]),A.setProperty("--stage-button-border",r.buttonBorderColor[s]),A.setProperty("--image-border-main",`url("Used_art/Stage${s} border.png")`),A.setProperty("--image-stage-outer",r.imageBorderColor[s])),a("currentSwitch").textContent=r.word[s],i.lastActive===null&&q(oe(i.tab)?i.tab:"stage"),nt()},Ce=()=>{let e=a("rankName",!1);if(e===null)return;let r=t.accretion.rank;a("rankMessage",!1).textContent=r===0?"Might need more than just water... Increase Rank with Mass.":`Increase it with Mass. (Return back to ${t.inflation.vacuum?"Preons":"Dust"}, but unlock something new)`,i.accretionInfo.rankCost[r]===0&&(a("reset1Button").textContent="Max Rank achieved"),a("rankImage",!1).src=`Used_art/${i.accretionInfo.rankImage[r]}`,e.textContent=i.accretionInfo.rankName[r],r===0?e.style.color="var(--blue-text-color)":r===1?e.style.color="var(--cyan-text-color)":r===5?e.style.color="var(--darkviolet-text-color)":r===6?e.style.color="var(--orange-text-color)":e.style.color="var(--gray-text-color)"};var xe=(e,r)=>{if(e==="galaxy"){let{elements:n}=t;for(let s=1;s<n.length;s++)!be(s,4,"elements")||(n[s]=0,Z(s,4,"elements"));pe(),t.collapse.mass=.01235,t.collapse.stars=[0,0,0]}for(let n of r){if(n===2){if(t.strangeness[2][10]>=1&&e!=="vaporization"&&e!=="discharge")continue;i.researchesInfo[2].effect[0]=0,i.researchesInfo[2].effect[1]=0}else n===4&&(i.collapseInfo.trueStars=0);let s=t.buildings[n];s[0].current=M(b.buildings[n][0].current),s[0].total=M(b.buildings[n][0].total);for(let u=1;u<i.buildingsInfo.maxActive[n];u++)!be(u,n,"structures")||(s[u].true=0,s[u].current=[0,0],s[u].total=[0,0]);if(e==="discharge")continue;let o=t.upgrades[n];for(let u=0;u<i.upgradesInfo[n].maxActive;u++)!be(u,n,"upgrades")||(o[u]=0,Z(u,n,"upgrades"));if(de(n),e==="vaporization")continue;let l=t.researches[n];for(let u=0;u<i.researchesInfo[n].maxActive;u++)!be(u,n,"researches")||(l[u]=0,_(u,n,"researches"),Te(u,n,"researches"));if(J("researches",n),e==="rank")continue;let c=t.researchesExtra[n];for(let u=0;u<i.researchesExtraInfo[n].maxActive;u++)!be(u,n,"researchesExtra")||(c[u]=0,_(u,n,"researchesExtra"),Te(u,n,"researchesExtra"));J("researchesExtra",n)}if(t.inflation.vacuum||e==="discharge")if(t.strangeness[1][11]<1){let n=e==="galaxy"?i.dischargeInfo.getEnergy(3,5):0;t.discharge.energy=n,i.dischargeInfo.energyTrue=n}else ce();le(),r.includes(t.stage.active)&&K(),ae()},Ge=(e,r="normal")=>{for(let n of e){let s=t.buildings[n],o=b.buildings[n];for(let l=1;l<i.buildingsInfo.maxActive[n];l++)s[l].true=0,s[l].current=[0,0],s[l].total=[0,0],s[l].trueTotal=[0,0];if(s[0].current=M(o[0].current),s[0].total=M(o[0].total),s[0].trueTotal=M(o[0].trueTotal),t.upgrades[n]=M(b.upgrades[n]),t.researches[n]=M(b.researches[n]),t.researchesExtra[n]=M(b.researchesExtra[n]),t.ASR[n]=t.strangeness[n][[6,5,5,6,7][n-1]],de(n),i.lastUpgrade[n]=-1,i.lastResearch[n][0]=-1,n===1)t.discharge.current=0,t.discharge.energy=0,i.dischargeInfo.energyTrue=0;else if(n===2)t.vaporization.clouds=[0,0],i.researchesInfo[2].effect[0]=0,i.researchesInfo[2].effect[1]=0;else if(n===3)t.inflation.vacuum?t.accretion.rank=1:(t.accretion.rank=0,s[0].current=[5.97,27]);else if(n===4){i.collapseInfo.trueStars=0,t.collapse.mass=.01235,t.collapse.stars=[0,0,0],t.elements=M(b.elements),t.elements[0]=t.strangeness[4][10]>=1?1:0,pe();for(let l=0;l<t.elements.length;l++)Z(l,4,"elements");i.lastElement=-1}else n===5&&t.strangeness[5][6]>=2&&t.ASR[5]++}for(let n of e){for(let s=0;s<i.researchesInfo[n].maxActive;s++)w(s,n,"researches");for(let s=0;s<i.researchesExtraInfo[n].maxActive;s++)w(s,n,"researchesExtra");w(0,n,"ASR"),J("researches",n),J("researchesExtra",n)}if(le(),r!==!1&&(i.lastActive=null,O(r),r==="soft")){let n=t.stage.active;for(let s=0;s<i.upgradesInfo[n].maxActive;s++)Z(s,n,"upgrades");n===3&&Ce()}},vt=()=>{for(let e=1;e<=5;e++){let r=t.buildings[e],n=b.buildings[e];for(let s=1;s<n.length;s++)r[s].true=0,r[s].current=[0,0],r[s].total=[0,0],r[s].trueTotal=[0,0],r[s].highest=[0,0];r[0].current=M(n[0].current),r[0].total=M(n[0].total),r[0].trueTotal=M(n[0].trueTotal),r[0].highest=M(n[0].highest),t.upgrades[e]=M(b.upgrades[e]),t.researches[e]=M(b.researches[e]),t.researchesExtra[e]=M(b.researchesExtra[e]),t.strangeness[e]=M(b.strangeness[e]),t.milestones[e]=M(b.milestones[e]),t.ASR[e]=0}t.discharge.energy=0,t.discharge.energyMax=0,t.discharge.current=0,i.dischargeInfo.energyTrue=0,t.vaporization.clouds=[0,0],t.vaporization.cloudsMax=[0,0],i.researchesInfo[2].effect[0]=0,i.researchesInfo[2].effect[1]=0,t.inflation.vacuum?t.accretion.rank=1:(t.accretion.rank=0,t.buildings[3][0].current=[5.97,27]),i.collapseInfo.trueStars=0,t.collapse.mass=.01235,t.collapse.massMax=.01235,t.collapse.stars=[0,0,0],t.collapse.show=0,t.elements=M(b.elements),i.historyStorage.stage=[],t.history.stage.best=[0,1,0],t.stage.resets=0,t.stage.best=0,t.stage.time=0;for(let e=0;e<t.strange.length;e++)t.strange[e].current=0,t.strange[e].total=0;ee(),he();for(let e=1;e<=5;e++){for(let r=0;r<i.researchesInfo[e].maxActive;r++)w(r,e,"researches");for(let r=0;r<i.researchesExtraInfo[e].maxActive;r++)w(r,e,"researchesExtra");w(0,e,"ASR")}for(let e=1;e<b.strangeness.length;e++)for(let r=0;r<i.strangenessInfo[e].maxActive;r++)w(r,e,"strangeness");for(let e=1;e<b.milestones.length;e++)for(let r=0;r<b.milestones[e].length;r++)ke(r,e);O("reload")};var le=()=>{let{upgradesInfo:e,researchesInfo:r,researchesExtraInfo:n,dischargeInfo:s,vaporizationInfo:o,milestonesInfo:l}=i,{buildings:c,upgrades:u,researches:m,researchesExtra:h,strangeness:y,discharge:v}=t,p=i.buildingsInfo.producing,S=i.strangeInfo.stageBoost,T=i.stageInfo.activeAll,I=t.inflation.vacuum,H=t.challenges.active===0,z=Math.max(v.energy,1);if(T.includes(1)){let A=I?3:1,d=I?4:2,x=I?5:3;s.bonus=y[1][2]/2,S[1]!==null&&(s.bonus+=S[1]);let k=4+m[1][4]+y[1][0];e[1].effect[5]=H?(k-1)/2+1:k,e[1].effect[7]=(102+m[1][1])/100,n[1].effect[4]=1+e[1].effect[5]/100;let E=e[1].effect[5]**(v.current+s.bonus)*1.3**y[1][9];I&&(E*=l[1].reward[0]);let L=[c[1][x].current],U=.2*E;if(I&&u[1][4]===1&&(U*=5),u[1][7]===1&&L.push(f(e[1].effect[7]).power(c[1][x].true).toArray()),p[1][x]=f(U).multiply(...L).toArray(),e[1].effect[9]=z>4e4?(z/4e4)**.4*4e4:z,r[1].effect[2]=20+y[1][5],r[1].effect[5]=(v.current+s.bonus)**(1.25+m[1][5]/4),n[1].effect[1]=h[1][1]>=4?1.1:h[1][1]>=3?1.2:(20-3*h[1][1])/10,f(p[1][x]).moreThan("1")){let j=r[1].effect[2]**m[1][2];u[1][9]===1&&(j*=e[1].effect[9]),m[1][5]>=1&&(j*=r[1].effect[5]),e[1].effect[8]=f(p[1][x]).log(n[1].effect[1]).multiply(j).toArray()}else e[1].effect[8]=[0,0];let P=[c[1][d].current],W=(I?.2:.6)*E;I?u[1][3]===1&&(W*=5):u[1][4]===1&&(W*=5),u[1][7]===1&&P.push(f(e[1].effect[7]).power(c[1][d].true).toArray()),p[1][d]=f(W).multiply(...P).toArray();let X=[c[1][A].current],re=(I?.2:.4)*E;if(u[1][0]===1&&(re*=5),!I&&u[1][3]===1&&(re*=5),u[1][7]===1&&X.push(f(e[1].effect[7]).power(c[1][A].true).toArray()),p[1][A]=f(re).multiply(...X).toArray(),I){let j=[c[1][2].current];u[1][7]===1&&j.push(f(e[1].effect[7]).power(c[1][2].true).toArray()),p[1][2]=f(.2*E).multiply(...j).toArray();let dt=[c[1][1].current];u[1][7]===1&&dt.push(f(e[1].effect[7]).power(c[1][1].true).toArray()),p[1][1]=f(.001*E).multiply(...dt).toArray(),f(p[1][1]).moreThan("1")&&(p[1][1]=f(p[1][1]).power(.15).toArray())}}if(T.includes(2)){let A=c[2][5].true,d=c[2][4].true,x=c[2][3].true,k=c[2][2].true;u[2][8]===1&&(A+=c[2][6].true),u[2][7]===1&&(d+=A),e[2].effect[6]=1+m[2][5],u[2][6]===1&&(x+=d*e[2].effect[6]),e[2].effect[5]=1+m[2][4],u[2][5]===1&&(k+=x*e[2].effect[5]),c[2][5].current=f(A).toArray(),c[2][4].current=f(d).toArray(),c[2][3].current=f(x).toArray(),c[2][2].current=f(k).toArray(),p[2][6]=f(Math.max(2*c[2][6].true,1)).toArray();let E=[p[2][6]],L=o.rainEffect();n[2].effect[2]=(L-1)/16+1;let U=2*A;h[2][2]>=1&&(U*=n[2].effect[2]),p[2][5]=f(U).multiply(...E).max("1").toArray(),p[2][4]=f(2*d).multiply(p[2][5]).max("1").toArray(),p[2][3]=f(2*x).multiply(p[2][4]).max("1").toArray();let P=[p[2][3],o.cloudEffect()];e[2].effect[3]=(1+m[2][2]/2)/100,e[2].effect[4]=(1+m[2][3]/2)/100,o.tension=u[2][3]===1?f(c[2][0].current).max("1").power(e[2].effect[3]).toNumber():1,o.stress=u[2][4]===1?f(c[2][1].current).max("1").power(e[2].effect[4]).toNumber():1;let W=(H?.02:2)*k*o.tension*o.stress*L*1.5**y[2][1];if(u[2][1]===1&&(H?P.push(f("1.01").power((k-c[2][2].true)**.7+c[2][2].true).toArray()):(P.push(f("1.02").power((k-c[2][2].true)**.7+Math.min(c[2][2].true,200)).toArray()),c[2][2].true>200&&P.push(f("1.01").power(c[2][2].true-200).toArray()))),m[2][1]>=1){if(r[2].effect[1]!==m[2][1]){let j=r[2].scaling[1];r[2].effect[1]=Math.min(m[2][1],Math.max(Math.floor(f(c[2][1].total).multiply(j-1).divide(r[2].startCost[1]).plus("1").log(j).toNumber()),0))}W*=2**r[2].effect[1]}I&&(W*=l[2].reward[1]),S[2]!==null&&(W*=S[2]),p[2][2]=f(W).multiply(...P).toArray();let X=[];if(H)X.push(f(c[2][1].current).moreThan("1")?f(c[2][1].current).power(.1).toArray():c[2][1].current);else if(I){let j=f(c[2][1].current).minus(c[2][1].true).toArray();X.push(f(j).moreThan("1")?f(j).power(.2).plus(c[2][1].true).toArray():c[2][1].current)}else X.push(c[2][1].current);u[2][0]===1&&X.push(f("1.04").power(c[2][1].true).toArray());let re=(I?1:2e-4)*1.5**y[2][0];m[2][0]>=1&&(r[2].effect[0]!==m[2][0]&&(r[2].effect[0]=Math.min(m[2][0],Math.max(Math.floor(f(c[2][1].total).divide(r[2].startCost[0]).log(r[2].scaling[0]).toNumber()+1),0))),re*=3**r[2].effect[0]),p[2][1]=f(re).multiply(...X).toArray(),I&&(p[2][1]=f(p[2][1]).plus("1").toArray(),e[1].effect[8]=f(e[1].effect[8]).multiply(p[2][1]).toArray())}if(T.includes(3)){i.accretionInfo.effective=(H?1:t.accretion.rank)+y[3][10]/1.25,I&&S[3]!==null&&(i.accretionInfo.effective+=S[3]),p[3][5]=f("1.1").power(c[3][5].true).toArray(),p[3][4]=f(u[3][12]===1?"1.14":"1.1").power(c[3][4].true).multiply(p[3][5]).toArray();let A=y[3][3]<1?[1,0]:I?f(p[3][4]).power(.2).toArray():p[3][4],d=[c[3][3].current,p[3][4]],x=.2*1.5**y[3][1];h[3][2]>=1&&(x*=2),u[3][8]===1&&d.push(f("1.02").power(c[3][3].true).toArray()),p[3][3]=f(x).multiply(...d).toArray();let k=[c[3][2].current,A];e[3].effect[3]=(102+m[3][4]/2)/100,r[3].effect[6]=f(c[3][0].current).power(m[3][6]/40).toArray();let E=3**m[3][2]*1.5**y[3][1];u[3][3]===1&&k.push(f(e[3].effect[3]).power(c[3][2].true).toArray()),u[3][4]===1&&(E*=3),m[3][6]>=1&&k.push(r[3].effect[6]),p[3][2]=f(E).multiply(...k).toArray();let L=[c[3][1].current,A];e[3].effect[0]=(101+m[3][1])/100,e[3].effect[1]=f(c[3][1].current).power((5+h[3][3])/100).toNumber(),e[3].effect[7]=2*1.5**m[3][7],e[3].effect[10]=8*2**m[3][8],n[3].effect[0]=1.1**h[3][0],n[3].effect[1]=(1+.1*h[3][1])**i.accretionInfo.effective;let U=(I?1:8e-20)*3**m[3][0]*2**m[3][3]*3**m[3][5]*n[3].effect[0]*1.5**y[3][0];I&&(U*=l[3].reward[0]),u[3][0]===1&&L.push(f(e[3].effect[0]).power(c[3][1].true).toArray()),u[3][1]===1&&(U*=e[3].effect[1]),u[3][2]===1&&(U*=2),u[3][5]===1&&(U*=3),u[3][7]===1&&(U*=e[3].effect[7]),u[3][9]===1&&(U*=2),u[3][10]===1&&(U*=e[3].effect[10]),h[3][1]>=1&&(U*=n[3].effect[1]),p[3][1]=f(U).multiply(...L).toArray(),I?(p[3][1]=f(p[3][1]).plus("1").toArray(),H?p[3][1]=f(p[3][1]).power(t.accretion.rank>=5?.84:.92).toArray():t.accretion.rank>=5&&(p[3][1]=f(p[3][1]).power(.92).toArray()),n[3].effect[4]=(n[3].effect[1]-1)/32*2**h[3][4]+1,h[3][4]>=1&&(p[2][2]=f(p[2][2]).multiply(n[3].effect[4]).toArray())):t.accretion.rank>=5&&(p[3][1]=f(p[3][1]).power(f(p[3][1]).lessThan("1")?1.1:.9).toArray())}else I&&(p[3][1]=[1,0]);if(T.includes(4)){let{elements:A}=t,{starEffect:d}=i.collapseInfo,x=i.elementsInfo.effect,k=H?.004:.005;h[4][1]>=1&&(k+=.001);let E=m[4][1]===0?0:1+Math.min(m[4][1],4);m[4][1]>4&&(E+=.5),m[4][1]>5&&(E+=m[4][1]/4-1.25),r[4].effect[1]=f(1+k*E).power(i.collapseInfo.trueStars).toArray();let L=[r[4].effect[1]],U=1.3+.15*m[4][2];I&&(U+=l[3].reward[1]),r[4].effect[0]=U**m[4][0],r[4].effect[4]=Je(t.collapse.stars[2]+3,m[4][4]>=2?2:3),A[23]===1&&(r[4].effect[4]*=t.collapse.mass**.1),x[12]=10-y[4][10],x[24]=I||t.milestones[1][1]>=6?.02:.01,x[28]=h[4][2]>=1?3:2;let P=r[4].effect[0]*i.collapseInfo.massEffect()*d[1]()*1.25**m[4][3]*1.5**y[4][0];m[4][4]>=1&&(P*=r[4].effect[4]),A[4]===1&&(P*=1.2),A[14]===1&&(P*=1.4),A[19]===1&&(P*=2),A[24]===1&&(P*=f(c[4][0].current).max("1").power(x[24]).toNumber()),A[28]===1&&(P*=x[28]),I&&(h[1][4]>=1&&(P*=n[1].effect[4]**(v.current+s.bonus)),h[2][3]>=1&&(P*=o.tension),h[2][3]>=2&&(P*=o.stress),P*=l[4].reward[0]),S[4]!==null&&(P*=S[4]);let W=f(P).multiply(...L).toArray();p[4][5]=f("1e12").multiply(c[4][5].current,W).toArray(),p[4][4]=f("2e9").multiply(c[4][4].current,W).toArray(),p[4][3]=f("3e7").multiply(c[4][3].current,W).toArray(),x[6]=h[4][2]>=1?2:1.5;let X=400*d[0]()*4**m[4][3];p[4][2]=f(X).multiply(c[4][2].current,W).toArray();let re=50;A[1]===1&&(re*=2),p[4][1]=f(re).multiply(c[4][1].current,W).toArray()}if(T.includes(5)){let A=I?2:10;I&&(u[5][2]===1&&(A+=1),A+=l[5].reward[1]),p[5][3]=f(A).power(c[5][3].true).toArray();let d=[c[5][2].current,p[5][3]],x=1.5*3**m[5][1];e[5].effect[1]=2*3**y[5][4],u[5][1]===1&&(x*=e[5].effect[1]),p[5][2]=f(x).multiply(...d).toArray();let k=[c[5][1].current,p[5][3]],E=4**m[5][0];e[5].effect[0]=3*2**y[5][3],u[5][0]===1&&(E*=e[5].effect[0]),p[5][1]=f(E).multiply(...k).toArray();let L=p[5][2];L[0]>0&&(p[4][4]=f(p[4][4]).multiply(L).toArray(),m[5][1]>=1&&(p[4][3]=f(p[4][3]).multiply(L).divide("3").toArray()),m[5][1]>=2&&(p[4][2]=f(p[4][2]).multiply(L).divide("9").toArray()),m[5][1]>=3&&(p[4][1]=f(p[4][1]).multiply(L).divide("27").toArray()))}if(I){let{inflationInfo:A}=i;A.preonTrue=p[1][1],A.dustTrue=p[3][1],A.dustCap=f(8e46*(Se()/A.massCap)*It()).toArray(),f(p[3][1]).moreThan(A.dustCap)&&(p[3][1]=A.dustCap),n[1].effect[3]=h[1][3]/20;let d=1e14*z**n[1].effect[3]*i.collapseInfo.starEffect[2]()*l[4].reward[1];t.elements[10]===1&&(d*=2),h[4][1]>=1&&(d*=i.collapseInfo.effect4RE1()),A.preonCap=f(d).multiply(p[3][1]).toArray(),f(p[1][1]).moreThan(A.preonCap)&&(p[1][1]=A.preonCap)}},we=(e,r=t.stage.active,n=!1)=>{if(!pt(e,r))return;let s=t.buildings[r][e],o,l,c="";r===1?(o=t.buildings[1][e-1],e===1&&t.inflation.vacuum&&t.strangeness[1][10]>=1&&(c="Free")):r===2?e===1&&t.inflation.vacuum?(c="Moles",o=t.buildings[1][5],l=f(o.current).divide("6.02214076e23").toArray()):o=t.buildings[2][e===1?0:1]:r===3?t.inflation.vacuum?(c="Mass",o=t.buildings[1][0],l=f(o.current).multiply("1.78266192e-33").toArray()):o=t.buildings[3][0]:(o=t.buildings[4][0],r===5&&e===3&&(c="Galaxy",l=t.collapse.mass)),l===void 0&&(l=o.current);let u=l;n&&s.true>0&&c!=="Free"&&c!=="Galaxy"&&(c==="Mass"&&t.strangeness[3][4]>=2&&f(i.inflationInfo.dustTrue).moreOrEqual(i.inflationInfo.dustCap)?u=f(i.inflationInfo.preonCap).multiply(i.inflationInfo.massCap,"-1.78266192e-33").plus(l).toArray():u=f(l).divide(t.strangeness[1][7]>=1?t.toggles.shop.wait[r]:"2").toArray());let m=$e(e,r);if(f(m).moreThan(u))return;let h=n?-1:t.stage.resets<1&&t.discharge.current<1?1:t.toggles.shop.howMany,y=1;if(h!==1){let v=i.buildingsInfo.increase[r][e],p=i.buildingsInfo.firstCost[r][e];if(c==="Free"){if(y=Math.floor(f(u).divide(p).log(v).toNumber())-s.true+1,h!==-1){if(y<h)return;y=h}}else{let S=f(v).power(s.true).minus("1").divide(v-1).multiply(p).toArray();if(y=Math.floor(f(u).plus(S).multiply(v-1).divide(p).plus("1").log(v).toNumber())-s.true,h!==-1){if(y<h)return;y=h}m=f(v).power(y+s.true).minus("1").divide(v-1).multiply(p).minus(S).toArray()}}if(!f(m).isFinite()){i.debug.errorGain&&(i.debug.errorGain=!1,N(`Error inside Structure creation (${f(m).isNaN()?"NaN":"Infinity"} detected, debug ${r}-${e})`),setTimeout(()=>{i.debug.errorGain=!0},6e4));return}s.true+=y,s.current=f(s.current).plus(y).toArray(),s.total=f(s.total).plus(y).toArray(),s.trueTotal=f(s.trueTotal).plus(y).toArray(),f(s.highest).lessThan(s.current)&&(s.highest=M(s.current)),c==="Galaxy"?(xe("galaxy",t.inflation.vacuum?[1,2,3,4,5]:[4,5]),w(0,4,"researches"),w(1,4,"researches"),w(2,4,"researches"),w(3,4,"researches")):(c!=="Free"&&(l=f(l).minus(m).toArray(),c==="Moles"?(o.current=f(l).multiply("6.02214076e23").toArray(),t.buildings[2][0].current=f(o.current).divide("6.02214076e23").toArray()):c==="Mass"?(o.current=f(l).divide("1.78266192e-33").toArray(),t.buildings[3][0].current=f(o.current).multiply("1.78266192e-33").toArray()):o.current=l),(t.inflation.vacuum||r===1)&&(ce(i.dischargeInfo.getEnergy(e,r)*y),Q(1,1))),r===1?e===5&&t.upgrades[1][8]===0&&t.inflation.vacuum&&(t.buildings[2][0].current=f(s.current).divide("6.02214076e23").toArray()):r===2?e!==1&&Q(1,2):r===3?e>=4&&Q(1,3):r===4?(i.collapseInfo.trueStars+=y,Q(0,5)):r===5&&e===3&&(Q(1,5),t.events[2]||ne(5,2)),le(),n||(K(),i.screenReader[0]&&(a("SRMain").textContent=`Made ${g(y)} '${i.buildingsInfo.name[r][e]}'`))},ce=(e=null)=>{let{discharge:r}=t;if(e===null){let{getEnergy:n,energyType:s}=i.dischargeInfo;e=0;for(let o=1;o<(t.inflation.vacuum?s.length:2);o++){let l=t.buildings[o];for(let c=1;c<s[o].length;c++)e+=n(c,o)*l[c].true}i.dischargeInfo.energyTrue=e,t.strangeness[1][11]>=1&&(r.energy=e)}else i.dischargeInfo.energyTrue+=e,r.energy+=e;r.energyMax<r.energy&&(r.energyMax=r.energy)},$e=(e,r)=>{let{buildingsInfo:n}=i;if(r===1){let s=10+3*t.researches[1][0];i.upgradesInfo[1].effect[6]=s/100;let o=140;if(t.upgrades[1][6]===1&&(o-=s),n.increase[1][e]=o/100,e===1){let l=n.startCost[1][1];!t.inflation.vacuum&&t.upgrades[1][2]===1&&(l/=10),n.firstCost[1][1]=l}else if(e===3){let l=n.startCost[1][3];t.upgrades[1][1]===1&&(l/=10),n.firstCost[1][3]=l}else if(e===4){let l=n.startCost[1][4];t.inflation.vacuum&&(t.upgrades[1][2]===1&&(l/=10),t.researchesExtra[1][0]>=1&&(l/=10)),n.firstCost[1][4]=l}}else if(r===3)n.firstCost[3][e]=n.startCost[3][e],!t.inflation.vacuum&&i.strangeInfo.stageBoost[3]!==null&&(n.firstCost[3][e]/=i.strangeInfo.stageBoost[3]),e===4&&(n.increase[3][4]=t.upgrades[3][11]===1?5:10);else if(r===4){let s=125+15*e;t.elements[2]===1&&(s-=10),t.elements[8]===1&&(s-=5),n.increase[4][e]=s/100;let o=n.startCost[4][e]/2**t.strangeness[4][1];t.elements[13]===1&&(o/=1e3),n.firstCost[4][e]=o}return f(n.increase[r][e]).power(t.buildings[r][e].true).multiply(n.firstCost[r][e]).toArray()},ve=(e,r,n)=>{let s;if(r===1&&e===(t.inflation.vacuum?5:3)?s=f(i.upgradesInfo[1].effect[8]).multiply(n).toArray():r===5?s=f(i.buildingsInfo.producing[5][1]).multiply(n).toArray():(s=f(i.buildingsInfo.producing[r][e+1]).multiply(n).toArray(),r===2&&e===1&&t.buildings[2][2].current[0]===0&&t.researchesExtra[2][1]>=1&&(s=f(s).plus(n*(i.vaporizationInfo.rainEffect()-1)).toArray())),s[0]===0)return;if(!f(s).isFinite()){i.debug.errorGain&&(i.debug.errorGain=!1,N(`Error inside income calculation (${f(s).isNaN()?"NaN":"Infinity"} detected, debug ${r}-${e})`),setTimeout(()=>{i.debug.errorGain=!0},6e4));return}let o=r;r===4?e=0:r===5&&(e>0&&(s=f(s).divide(4**e).toArray()),o=4,e++);let l=t.buildings[o][e];l.current=f(l.current).plus(s).toArray(),l.total=f(l.total).plus(s).toArray(),l.trueTotal=f(l.trueTotal).plus(s).toArray(),f(l.highest).lessThan(l.current)&&(l.highest=M(l.current)),r===1?t.inflation.vacuum?e===0?(t.buildings[3][0].current=f(l.current).multiply("1.78266192e-33").toArray(),Q(0,3)):e===1?Q(0,1):e===5&&(t.buildings[2][0].current=f(l.current).divide("6.02214076e23").toArray()):e===0&&Q(0,1):r===3&&e===0&&(t.accretion.rank<5&&f(l.current).moreThan("1e30")&&(l.current=[1,30]),Q(0,3))},ee=()=>{let{strangeness:e}=t,r=i.strangeInfo.stageBoost,n=t.strange[0].current+1;r[1]=e[1][8]<1?null:n**.08-1,r[2]=e[2][7]<1?null:n**.24,r[3]=e[3][7]<1?null:t.inflation.vacuum?n**.12-1:n**.8,r[4]=e[4][8]<1?null:n**.28,r[5]=e[5][9]<1?null:n**.06},wt=(e,r)=>{let n=t.strange[e],s=Math.floor(t.strange[e+1].current*1e12);if(n.current>=s)return;let o=Math.max(r,(s-n.current)*r/600);if(n.current+=o,n.total+=o,n.current>s){let l=n.current;n.current=s,n.total=Math.round(n.total-(l-n.current))}e===0&&ee()},Y=(e,r,n,s=!1)=>{if(!s&&!Ee(e,r,n))return!1;let o;if(n==="strangeness"?o=t.strange[0].current:r===1?o=t.discharge.energy:r===2?o=t.buildings[2][1].current:r===3?o=t.inflation.vacuum?f(t.buildings[1][0].current).multiply("1.78266192e-33").toArray():t.buildings[3][0].current:o=t.buildings[4][0].current,n==="upgrades"){if(t.upgrades[r][e]>=1)return!1;let l=i.upgradesInfo[r];if(f(o).lessThan(l.startCost[e]))return!1;t.upgrades[r][e]++,o=f(o).minus(l.startCost[e]).toArray(),r===4&&e===1&&i.tab==="research"&&t.toggles.normal[2]&&q("research"),!s&&i.screenReader[0]&&(a("SRMain").textContent=`New upgrade '${l.name[e]}', has been created`)}else if(n==="researches"||n==="researchesExtra"||n==="ASR"){let l=n==="researches"||n==="researchesExtra"?i[`${n}Info`][r]:i.ASRInfo,c=n==="researches"||n==="researchesExtra"?t[n][r]:t.ASR;if(c[e]>=l.max[e]||f(o).lessThan(l.cost[e]))return!1;c[e]++,o=f(o).minus(l.cost[e]).toArray(),n==="researches"?r===4&&e===2&&w(0,4,"researches",!0):n==="researchesExtra"&&(r===1?e===2&&(t.stage.current<4&&(t.stage.current=t.researchesExtra[1][2]>1?2:3),O("soft"),Re(1)):r===4&&e===2&&w(3,4,"researches",!0)),!s&&i.screenReader[0]&&(a("SRMain").textContent=`Research '${n==="ASR"?"Structure Automation":l.name[e]}' level increased, it is now ${c[e]} ${c[e]>=l.max[e]?"maxed":""}`)}else if(n==="elements"){let l=t.elements[e];if(l>=1)return!1;if(l===0){let c=i.elementsInfo.startCost[e];if(f(o).lessThan(c))return!1;o=f(o).minus(c).toArray()}else if(!s)return!1;t.collapse.show<e&&(t.collapse.show=e),l=t.strangeness[4][4]>=1||l===.5?1:.5,t.elements[e]=l,l===1&&(e===7||e===16||e===20||e===25?w(1,4,"researches",!0):e===9||e===17?w(0,4,"researches",!0):e===11?w(2,4,"researches",!0):e===26&&(t.stage.current<5&&(t.stage.current=5,t.stage.true<5&&(t.stage.true=5)),O("soft"))),!s&&i.screenReader[0]&&(a("SRMain").textContent=`New Element '${i.elementsInfo.name[e]}' ${t.elements[e]>=1?"obtained":"awaiting activation"}`)}else if(n==="strangeness"){let l=i.strangenessInfo[r];if(t.strangeness[r][e]>=l.max[e]||o<i.strangenessInfo[r].cost[e])return!1;t.strangeness[r][e]++,o-=l.cost[e],r===1?e===4?ce():e===6?(t.ASR[1]=Math.max(t.strangeness[1][6],t.ASR[1]),w(0,1,"ASR",!0)):e===11&&(ce(),w(3,1,"strangeness",!0),w(4,2,"strangeness",!0),w(4,3,"strangeness",!0),w(5,4,"strangeness",!0)):r===2?e===2?(w(4,2,"researches",!0),w(5,2,"researches",!0)):e===5?(t.ASR[2]=Math.max(t.strangeness[2][5],t.ASR[2]),w(0,2,"ASR",!0)):e===8&&(w(0,2,"ASR",!0),w(5,2,"strangeness",!0)):r===3?e===2?(w(0,3,"researchesExtra",!0),w(1,3,"researchesExtra",!0)):e===5?(t.ASR[3]=Math.max(t.strangeness[3][5],t.ASR[3]),w(0,3,"ASR",!0)):e===8?(w(0,3,"ASR",!0),w(5,3,"strangeness",!0)):e===9&&he():r===4?e===6?(t.ASR[4]=Math.max(t.strangeness[4][6],t.ASR[4]),w(0,4,"ASR",!0)):e===9?(w(0,4,"ASR",!0),w(6,4,"strangeness",!0)):e===10&&t.elements[0]!==1&&(t.elements[0]=1,Z(0,4,"elements")):r===5&&(e===0?t.inflation.vacuum||O("soft"):e===1?t.stage.input*=2:e===5?t.inflation.vacuum&&O("soft"):e===6||e===7?(t.ASR[5]=t.strangeness[5][7],t.strangeness[5][6]>=2&&t.ASR[5]++,w(0,5,"ASR",!0)):e===8?t.inflation.vacuum&&i.tab==="strangeness"&&q("strangeness"):e===10&&(t.stage.input/=1e12)),!s&&i.screenReader[0]&&(a("SRMain").textContent=`Strangeness of '${l.name[e]}' for ${i.stageInfo.word[r]} Stage is increased, level is now ${t.strangeness[r][e]}${t.strangeness[r][e]>=l.max[e]?"maxed":""}`)}if(n==="strangeness")t.strange[0].current=o,ee();else if(r===1)t.strangeness[1][11]<1&&(t.discharge.energy=f(o).toNumber());else if(r===2){if(t.buildings[2][1].current=o,t.buildings[2][2].current[0]===0&&f(t.buildings[2][1].current).lessThan(t.buildings[2][1].true)){let l=t.buildings[2][1].true;if(t.buildings[2][1].true=Math.floor(f(t.buildings[2][1].current).toNumber()),t.inflation.vacuum){let c=(l-t.buildings[2][1].true)*i.dischargeInfo.getEnergy(1,2);i.dischargeInfo.energyTrue-=c,t.discharge.energy-=c}else t.buildings[2][1].current[0]===0&&f(t.buildings[2][0].current).lessThan("2.8e-3")&&(t.buildings[2][0].current=[2.8,-3])}}else r===3?t.inflation.vacuum?(t.buildings[1][0].current=f(o).divide("1.78266192e-33").toArray(),t.buildings[3][0].current=f(t.buildings[1][0].current).multiply("1.78266192e-33").toArray()):t.buildings[3][0].current=o:t.buildings[4][0].current=o;return le(),n==="upgrades"||n==="elements"?Z(e,r,n):(Te(e,r,n),_(e,r,n)),s||(n==="strangeness"&&ge(e,r,n),K()),!0},Te=(e,r,n)=>{if(n==="researches"||n==="researchesExtra"){let s=i[`${n}Info`][r];if(s.cost[e]=r===1?s.startCost[e]+s.scaling[e]*t[n][r][e]:s.startCost[e]*s.scaling[e]**t[n][r][e],s.cost[e]<1){let o=10**(-Math.floor(Math.log10(s.cost[e]))+2);s.cost[e]=Math.round(s.cost[e]*o)/o}else s.cost[e]=Math.round(s.cost[e]*100)/100}else n==="ASR"?i.ASRInfo.cost[r]=i.ASRInfo.costRange[r][t.ASR[r]]:n==="strangeness"&&(i.strangenessInfo[r].cost[e]=t.inflation.vacuum?Math.floor(Math.round(i.strangenessInfo[r].startCost[e]*i.strangenessInfo[r].scaling[e]**t.strangeness[r][e]*100)/100):Math.floor(Math.round((i.strangenessInfo[r].startCost[e]+i.strangenessInfo[r].scaling[e]*t.strangeness[r][e])*100)/100))},w=(e,r,n,s=!1)=>{let o=null;n==="ASR"?r===1?o=t.inflation.vacuum?5:3:r===2?o=t.strangeness[2][8]>=1?6:5:r===3?o=t.strangeness[3][8]>=1?5:4:r===4?o=t.strangeness[4][9]>=1?5:4:r===5&&(o=t.strangeness[5][7],t.strangeness[5][6]>=2&&o++):n==="researches"?r===2?e===4?(o=2,t.strangeness[2][2]>=1&&o++):e===5&&(o=1,t.strangeness[2][2]>=2&&o++):r===4&&(e===0?(o=3+3*t.researches[4][2],t.elements[9]===1&&(o+=12),t.elements[17]===1&&(o+=24)):e===1?(o=2,t.elements[7]===1&&(o+=2),t.elements[16]===1&&o++,t.elements[20]===1&&o++,t.elements[25]===1&&o++):e===2?(o=1,t.elements[11]===1&&o++):e===3&&(o=1+t.researchesExtra[4][2])):n==="researchesExtra"?r===3&&(e===0?(o=12,t.accretion.rank>=3&&(o+=17),t.strangeness[3][2]>=1&&(o+=7)):e===1?(o=5,t.strangeness[3][2]>=2&&(o+=2)):e===4&&(o=t.accretion.rank-2)):n==="strangeness"&&(r===1?e===0?o=4+Math.min(t.challenges.void[3],4):e===2?o=2+Math.min(Math.floor(t.challenges.void[3]/2),2):e===3?o=t.strangeness[1][11]>=1?2:1:e===4?o=t.inflation.vacuum?2:1:e===6?o=t.inflation.vacuum?5:3:e===9&&(o=6+Math.min(t.challenges.void[3],4)):r===2?e===0?o=t.inflation.vacuum?6:9:e===1?o=6+Math.min(t.challenges.void[3],4):e===3?o=3+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?o=t.strangeness[1][11]>=1?2:1:e===5?o=t.strangeness[2][8]>=1?6:5:e===6&&(o=t.stage.true>=6?2:1):r===3?e===0?o=8+Math.min(t.challenges.void[3],4):e===1?o=4+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?o=t.strangeness[1][11]>=1?2:1:e===5?o=t.strangeness[3][8]>=1?5:4:e===10&&(o=2+Math.min(Math.floor(t.challenges.void[3]/2),2)):r===4?e===0?o=8+Math.min(t.challenges.void[3],4):e===1?o=4+Math.min(Math.floor(t.challenges.void[3]/2),2):e===4?o=t.stage.true>=6||t.events[2]?2:1:e===5?o=t.strangeness[1][11]>=1?2:1:e===6?o=t.strangeness[4][9]>=1?5:4:e===7&&(o=3+Math.min(t.challenges.void[3],4)):r===5&&(e===0?o=t.inflation.vacuum?1:3:e===1&&(o=1+Math.min(Math.floor(t.challenges.void[3]/2),2)))),o!==null&&(o<0&&(o=0),n==="ASR"?i.ASRInfo.max[r]=o:i[`${n}Info`][r].max[e]=o),Te(e,r,n),_(e,r,n),s&&(n==="researches"||n==="researchesExtra")&&J(n,[r,e])},de=e=>{if(!t.toggles.auto[5])return;let{autoU:r}=i.automatization;if(e==="all")for(let n=0;n<=5;n++){r[n]=[];for(let o=0;o<i.upgradesInfo[n].maxActive;o++)t.upgrades[n][o]<1&&r[n].push(o);let{startCost:s}=i.upgradesInfo[n];r[n].sort((o,l)=>s[o]-s[l])}else if(typeof e=="number"){r[e]=[];for(let s=0;s<i.upgradesInfo[e].maxActive;s++)t.upgrades[e][s]<1&&r[e].push(s);let{startCost:n}=i.upgradesInfo[e];r[e].sort((s,o)=>n[s]-n[o])}},xt=e=>{if(t.strangeness[3][6]<1||!t.toggles.auto[5])return;let r=i.automatization.autoU[e];for(let n=0;n<r.length;n++){let s=r[n];if(!!Ee(s,e,"upgrades"))if(Y(s,e,"upgrades",!0),t.upgrades[e][s]>=1)r.splice(n,1),n--;else break}},J=(e,r)=>{if(e==="researches"){if(!t.toggles.auto[6])return}else if(e==="researchesExtra"&&!t.toggles.auto[7])return;let{[e==="researches"?"autoR":"autoE"]:n}=i.automatization;if(r==="all")for(let s=0;s<=5;s++){let o=i[`${e}Info`][s];n[s]=[];for(let l=0;l<o.maxActive;l++)t[e][s][l]<o.max[l]&&n[s].push(l);n[s].sort((l,c)=>o.cost[l]-o.cost[c])}else if(typeof r=="number"){let s=i[`${e}Info`][r];n[r]=[];for(let o=0;o<s.maxActive;o++)t[e][r][o]<s.max[o]&&n[r].push(o);n[r].sort((o,l)=>s.cost[o]-s.cost[l])}else n[r[0]].some(s=>s===r[1])||n[r[0]].unshift(r[1])},rt=(e,r)=>{if(e==="researches"){if(t.strangeness[3][6]<2||!t.toggles.auto[6])return}else if(e==="researchesExtra"&&(t.strangeness[3][6]<3||!t.toggles.auto[7]))return;let n=i.automatization[e==="researches"?"autoR":"autoE"][r],s=i[`${e}Info`][r],o=!1;for(let l=0;l<n.length;l++){if(!Ee(n[l],r,e))continue;let c=Y(n[l],r,e,!0);if(t[e][r][n[l]]>=s.max[n[l]])n.splice(l,1),l--;else if(c)l--;else{if(s.cost[n[l]]>s.cost[n[l+1]]){o=!0;continue}break}}o&&n.sort((l,c)=>s.cost[l]-s.cost[c])},pe=()=>{if(!t.toggles.auto[8])return;let{elements:e}=i.automatization,{elements:r}=t;for(let s=1;s<i.elementsInfo.startCost.length;s++)r[s]===0&&e.push(s);let{startCost:n}=i.elementsInfo;e.sort((s,o)=>n[s]-n[o])},At=()=>{if(t.strangeness[4][4]<2||!t.toggles.auto[8])return;let{elements:e}=i.automatization,{elements:r}=t;for(let n=0;n<e.length;n++){let s=e[n];if(!Ee(s,4,"elements"))break;if(Y(s,4,"elements",!0),r[s]===1)e.splice(n,1),n--;else break}},D=(e,r,n=!1)=>{let s=r==="buildings"?t.toggles.buildings[t.stage.active]:t.toggles[r];if(n)if(r==="buildings")if(e===0){if(t.strangeness[1][7]<1)return;s[0]=!s[0];for(let c=1;c<s.length;c++)s[c]=s[0],D(c,"buildings")}else{let c=t.buildings[t.stage.active];if(e>=c.length)return;let u=!1;s[e]=!s[e];for(let m=1;m<i.buildingsInfo.maxActive[t.stage.active];m++)if(s[m]&&c[m].highest[0]>0){u=!0;break}s[0]!==u&&(s[0]=u,D(0,"buildings"))}else s[e]=!s[e];let o;r==="normal"?o=a(`toggle${e}`):r==="buildings"?o=a(`toggleBuilding${e}`):o=a(`toggleAuto${e}`);let l=r==="normal"?"":r==="buildings"&&e===0?"All ":"Auto ";s[e]?(o.style.color="",o.style.borderColor="",o.textContent=`${l}ON`):(o.style.color="var(--red-text-color)",o.style.borderColor="crimson",o.textContent=`${l}OFF`)},We=(e,r=!1)=>{let n=t.toggles.confirm;r&&(n[e]=n[e]==="All"?"Safe":n[e]==="Safe"?"None":"All");let s=a(`toggleConfirm${e}`);n[e]==="All"||n[e]==="Safe"?(s.style.color="",s.style.borderColor="",s.textContent=n[e]):(s.style.color="var(--red-text-color)",s.style.borderColor="crimson",s.textContent="None")},ye=(e="none")=>{let r=a("buyAnyInput"),n=t.toggles.shop;switch(e){case"1":n.howMany=1;break;case"max":n.howMany=-1;break;case"any":n.input=Math.max(Math.trunc(Number(r.value)),-1),n.input===0&&(n.input=1),n.howMany=n.input}a("buy1x").style.backgroundColor=n.howMany===1?"green":"",a("buyAny").style.backgroundColor=Math.abs(n.howMany)!==1?"green":"",a("buyMax").style.backgroundColor=n.howMany===-1?"green":"",(e==="none"||e==="any")&&(r.value=g(n.input,{type:"input"})),e!=="none"&&K()},fe=(e,r=!1)=>{let n=!1;if(e>=5)n=t.stage.current>=5;else{if(e===4)return!1;e===3?n=f(t.buildings[3][0].current).moreOrEqual("2.47e31"):e===2?n=f(t.buildings[2][1].current).moreOrEqual("1.194e29"):e===1&&(n=f(t.buildings[1][3].current).moreOrEqual("1.67e21"))}if(r&&n){if(t.strangeness[5][2]<1||e>=4&&i.strangeInfo.gain(e)/1e12**t.strangeness[5][10]<t.stage.input)return!1;it(e)}return n},Ve=async()=>{let{stage:e}=t,r=t.inflation.vacuum?6:e.active===4&&e.current===5&&t.events[1]?5:e.active;if(fe(r)){if(t.toggles.confirm[0]!=="None"){let n=r>=4&&t.strangeness[4][4]>=1&&t.elements[27]<1,s=t.challenges.active!==-1;if(t.toggles.confirm[0]!=="Safe"||s||n){let o;if(r===6?(o=`Ready to reset progress for ${g(i.strangeInfo.gain(r)/1e12**t.strangeness[5][10])} ${i.strangeInfo.name[t.strangeness[5][10]]}?`,n&&(o+=`
(Not all important Elements obtained)`),s&&(o+=`
(${i.challengesInfo.name[t.challenges.active]} is active)`)):r===5?(o=`Return back to Microworld for ${g(i.strangeInfo.gain(r))} Strange quarks?`,n&&(o+=`
(Not all important Elements obtained)`)):r!==e.current?o=`Reset this Stage for ${g(i.strangeInfo.gain(r))} Strange quarks?`:o="Ready to enter next Stage? Next one will be harder than current",!await V(o))return;if(!fe(r))return N("Stage reset canceled, requirements are no longer met")}}it(r)}else{if(e.resets<1&&(t.inflation.vacuum?e.current<5:t.discharge.current<6))return;if(r>=5)return void R('Awaiting "Iron" Element');if(r===4)return void R("Enter Intergalactic space first");if(r===3)return void R(`Self sustaining is not yet possible, obtain at least ${g(247e29)} Mass`);if(r===2)return void R(`Look's like more Mass expected, need even more Drops, around ${g(1194e26)} in total`);if(r===1)return void R(`Not enough to form a single Drop of water, need at least ${g(167e19)} Molecules`)}},it=e=>{let{stage:r}=t,n=r.time;r.resets++;let s="normal",o=t.inflation.vacuum?[1,2,3,4,5]:[e];if(t.inflation.vacuum?(r.active=1,r.current=1,r.time=0):e===r.current?(e<5?(r.current++,r.active===r.current-1?r.active=r.current:s="soft",r.current>r.true&&(r.true=r.current,t.events[0]=!1)):(r.current=1+t.strangeness[5][0],r.active===4&&r.current!==4||r.active===5?r.active=r.current:s="soft",o.unshift(4)),r.time=0):s=e===r.active?"soft":!1,r.true>=5){let l=i.strangeInfo.gain(e);l>r.best&&(r.best=l);let c=t.strangeness[5][10],u=l/1e12**c;if(t.strange[c].current+=u,t.strange[c].total+=u,ee(),e>=4){let m=i.historyStorage.stage,h=t.history.stage;m.unshift([l,n,c]),m.length>h.input[1]&&(m.length=h.input[1]),l/n>h.best[0]/h.best[1]&&(h.best=[l,n,c])}}Ge(o,s)},ie=e=>{if(t.stage.active===e){i.lastActive!==null?i.lastActive=null:i.screenReader[0]||a("stageSelect").classList.remove("active");return}!i.stageInfo.activeAll.includes(e)||((i.tab==="research"&&i.subtab.researchCurrent==="Elements"||i.tab==="Elements")&&e!==4&&e!==5&&q("research",i.tab==="research"?"Researches":null),t.stage.active=e,O(),t.events[1]||ne(4,1))},st=()=>{i.dischargeInfo.next=Math.round((10-2*t.researches[1][3]-t.strangeness[1][1]/2)**t.discharge.current)},Oe=(e=!1)=>{if(t.upgrades[1][5]<1||t.buildings[1][1].true<=0)return!1;st();let r=i.dischargeInfo,n=t.discharge.energy;return e?t.strangeness[1][3]<1?!1:n>=r.next?(at(t.strangeness[1][3]<2),!0):t.strangeness[1][11]>=1||n>=r.energyTrue?!1:(at(),!0):n<r.energyTrue||n>=r.next},Qe=async()=>{if(!Oe())return;let e=i.dischargeInfo,r=t.discharge.energy;if(t.toggles.confirm[1]!=="None"){let n=t.stage.active;if(t.toggles.confirm[1]!=="Safe"||n!==1){if(!await V(`${n===1?"This will reset all current Structures and Energy. ":`Discarge attempt while inside '${i.stageInfo.word[n]}'.
`}${r>=e.next?"Enough Energy to gain boost from a new goal":`Can regain at least ${g(e.energyTrue-r)} Energy`}, continue?`))return;if(!Oe())return N("Discharge canceled, requirements are no longer met")}}i.screenReader[0]&&(a("SRMain").textContent=`Structures and Energy were reset${r>=e.next?", also gained boost from reaching new goal":""}`),at()},at=(e=!0)=>{t.discharge.energy>=i.dischargeInfo.next&&t.discharge.current++,Re(1),e&&xe("discharge",t.inflation.vacuum?[1,2,3,4,5]:[1])},Ie=()=>{let e=f(t.buildings[2][1][t.researchesExtra[2][0]>=1?"total":"current"]).divide(i.vaporizationInfo.effect2U2()).toArray();f(e).moreOrEqual("1")?(e=t.inflation.vacuum?f(t.vaporization.clouds).power(2.5).plus(e).power(.4).minus(t.vaporization.clouds).multiply(i.milestonesInfo[2].reward[0]).toArray():f(t.vaporization.clouds).power(1/.6).plus(e).power(.6).minus(t.vaporization.clouds).toArray(),i.vaporizationInfo.get=e):i.vaporizationInfo.get=[0,0]},ze=(e=!1)=>{Ie();let r=i.vaporizationInfo;if(t.upgrades[2][2]<1||r.get[0]===0)return!1;if(e){let n=t.strangeness[2][4]<2;if(n&&(t.strangeness[2][4]<1||f(r.cloudEffect(!0)).multiply(r.rainEffect(!0)).divide(r.cloudEffect(),r.rainEffect()).lessThan(t.vaporization.input)))return!1;Et(n)}return!0},_e=async()=>{if(!ze())return;let e=i.vaporizationInfo,r=t.vaporization.clouds[0]>0?f(e.get).divide(t.vaporization.clouds).multiply("1e2").toArray():"1e2";if(t.toggles.confirm[2]!=="None"){let n=t.stage.active;if(t.toggles.confirm[2]!=="Safe"||n!==2||f(r).lessThan("1e2")){if(!await V(`${n===2?"Reset structures and upgrades":`Vaporization attempt while inside '${i.stageInfo.word[n]}'.
Confirm`} for ${f(e.get).format()} (+${f(r).format()}%) Clouds?`))return;if(!ze())return N("Vaporization canceled, requirements are no longer met")}}i.screenReader[0]&&(a("SRMain").textContent=`Progress were reset for ${f(e.get).format()} (+${f(r).format()}%) Clouds`),Et()},Et=(e=!0)=>{let{vaporization:r}=t;r.clouds=f(r.clouds).plus(i.vaporizationInfo.get).toArray(),f(r.cloudsMax).lessThan(r.clouds)&&(r.cloudsMax=M(r.clouds)),Q(0,2),Re(2),e&&xe("vaporization",t.inflation.vacuum?t.strangeness[2][10]>=1?[1,2]:[1,2,3,4,5]:[2])},Fe=(e=!1)=>{let r=i.accretionInfo.rankCost[t.accretion.rank];if(r===0)return!1;if(t.inflation.vacuum){if(f(t.buildings[1][0].current).multiply("1.78266192e-33").lessThan(r))return!1}else if(f(t.buildings[3][0].current).lessThan(r))return!1;if(e){if(t.strangeness[3][4]<1)return!1;Mt()}return!0},Ke=async()=>{if(!!Fe()){if(t.toggles.confirm[3]!=="None"&&t.accretion.rank!==0){let e=t.stage.active;if(t.toggles.confirm[3]!=="Safe"||e!==3){if(!await V(e===3?"Increasing Rank will reset structures, upgrades and Stage researches. But unlock something new":`Rank increase attempt while inside '${i.stageInfo.word[e]}'. Continue anyway?`))return;if(!Fe())return N("Rank increase canceled, requirements are no longer met")}}Mt(),i.screenReader[0]&&(a("SRMain").textContent=`Rank is now '${i.accretionInfo.rankName[t.accretion.rank]}'`)}},Mt=()=>{t.accretion.rank++,t.accretion.rank===6&&(t.stage.current=4,O("soft")),Re(3),xe("rank",t.inflation.vacuum?[1,2,3,4,5]:[3]),w(0,3,"researchesExtra",!0),w(4,3,"researchesExtra",!0),t.stage.active===3&&Ce()},Se=(e=!0)=>{let r=60;return e||t.strangeness[3][9]>=1&&(r/=1.5*t.strangeness[3][9]),r},he=()=>{let e=t.accretion.input,r=Se(!1);if(e<r||!isFinite(e))e=r;else{let n=Se();e>n&&(e=n)}i.inflationInfo.massCap=e},It=()=>{let{elements:e}=t,r=.004;return e[3]===1&&(r+=.002),e[5]===1&&(r+=2e-4*t.buildings[4][1].true),i.strangeInfo.stageBoost[5]!==null&&i.stageInfo.activeAll.includes(5)&&(r*=i.strangeInfo.stageBoost[5]),r*=e[15]===1?i.collapseInfo.trueStars:t.buildings[4][1].true,t.inflation.vacuum?r=r*80+1:(e[10]===1&&(r*=2),t.researchesExtra[4][1]>=1&&(r*=i.collapseInfo.effect4RE1()),r*=i.collapseInfo.starEffect[2]()),r},Pe=()=>{let e=t.buildings[4],{starCheck:r}=i.collapseInfo,{stars:n}=t.collapse;i.collapseInfo.newMass=t.inflation.vacuum?f(i.buildingsInfo.producing[1][1]).multiply(i.inflationInfo.massCap).min(t.buildings[1][0].current).multiply("8.96499278339628e-67").toNumber():It(),r[0]=e[2].true>0?Math.max(e[2].true+Math.floor(e[1].true*t.strangeness[4][3]/10)-n[0],0):0,r[1]=Math.max(e[3].true-n[1],0),r[2]=Math.max(e[4].true-n[2],0)},qe=(e=!1)=>{if(t.upgrades[4][0]<1)return!1;Pe();let r=i.collapseInfo;if(e){if(t.strangeness[4][5]<1)return!1;if(t.toggles.buildings[5][3]&&t.strangeness[5][6]>=2){let s=$e(3,5);if(f(s).lessOrEqual(r.newMass)&&f(s).moreThan(t.collapse.mass))return ot(),!0}let n=!0;if(t.strangeness[4][5]>=2){if(n=r.massEffect(!0)/r.massEffect()>=t.collapse.input,!n&&r.starCheck[0]<=0&&r.starCheck[1]<=0&&r.starCheck[2]<=0)return!1}else{let{starEffect:s}=r;if(r.massEffect(!0)/r.massEffect()*(s[0](!0)/s[0]())*(s[1](!0)/s[1]())*(s[2](!0)/s[2]())<t.collapse.input)return!1}return ot(n),!0}return r.newMass>t.collapse.mass||r.starCheck[0]>0||r.starCheck[1]>0||r.starCheck[2]>0||t.elements.includes(.5)},je=async()=>{if(!qe())return;let{newMass:e,starCheck:r}=i.collapseInfo,n=t.collapse.mass;if(t.toggles.confirm[4]!=="None"){let s=t.stage.active,o=n>=1e5&&t.strangeness[5][6]>=1,l=!o||f($e(3,5)).moreThan(e),c=t.inflation.vacuum&&e>n&&f(i.buildingsInfo.producing[1][1]).multiply(i.inflationInfo.massCap).moreThan(t.buildings[1][0].current);if(t.toggles.confirm[4]!=="Safe"||s!==4||l&&(c||o)){let u=s===4?"This will reset all researches and upgrades":`Collapse attempt while inside '${i.stageInfo.word[s]}'`;if(e>n?(u+=`
Solar mass will increase to ${g(e)}`,c&&(u+=`
(Hardcap is not reached)`),o&&(u+=`
(${l?"Not enough for":"Will be able to make"} a new Galaxy)`)):u+=`
Solar mass won't change`,(r[0]>0||r[1]>0||r[2]>0)&&(u+=`
Also will gain new Star remnants:`,r[0]>0&&(u+=`
'Red giants' - ${g(r[0])}`),r[1]>0&&(u+=`
'Neutron stars' - ${g(r[1])}`),r[2]>0&&(u+=`
'Black holes' - ${g(r[2])}`)),t.elements.includes(.5)){let m=0;for(let h=1;h<t.elements.length;h++)t.elements[h]===.5&&m++;u+=`
${g(m)} new Elements will become active`}if(s!==4&&(u+=`
Continue?`),!await V(u))return;if(!qe())return N("Collapse canceled, requirements are no longer met")}}if(i.screenReader[0]){let s=`Solar mass ${e>n?`is now ${g(e)}`:"haven't changed"}`;(r[0]>0||r[1]>0||r[2]>0)&&(s+=", also gained",r[0]>0&&(s+=` ${g(r[0])} Red giants`),r[1]>0&&(s+=`, ${g(r[1])} Neutron stars`),r[2]>0&&(s+=`, ${g(r[2])} Black holes`)),a("SRMain").textContent=s}ot()},ot=(e=!0)=>{let{collapseInfo:r}=i,{collapse:n}=t;if(e){if(t.elements.includes(.5))for(let s=1;s<t.elements.length;s++)t.elements[s]===.5&&Y(s,4,"elements",!0);r.newMass>n.mass&&(n.mass=r.newMass,n.massMax<n.mass&&(n.massMax=n.mass)),Q(0,4)}if(n.stars[0]+=r.starCheck[0],n.stars[1]+=r.starCheck[1],n.stars[2]+=r.starCheck[2],Q(1,4),Re(4),e){let s=t.inflation.vacuum?[1,2,3,4,5]:t.strangeness[5][5]<1?[4,5]:[4];xe("collapse",s),w(0,4,"researches"),w(3,4,"researches")}},lt=()=>{let{milestones:e}=t,r=0;e[1][0]>=6&&r++,e[2][1]>=6&&r++,e[3][1]>=7&&r++,e[4][1]>=8&&r++,e[5][1]>=6&&r++,i.strangeInfo.instability=r},ke=(e,r)=>{let{need:n,reward:s}=i.milestonesInfo[r],o=t.milestones[r][e];if(t.inflation.vacuum)r===1?e===0?(n[0]=f("1e80").power(o).multiply("1e80").toArray(),s[0]=1.04**o):e===1&&(n[1]=f(4e4+4e4*o).toArray(),s[1]=2*o):r===2?e===0?(n[0]=f("1e1").power(o).multiply("1e1").toArray(),s[0]=1.05**o):e===1&&(n[1]=f(80+80*o).toArray(),s[1]=1.02**o):r===3?e===0?(n[0]=f("1e3").power(o).multiply("1e-15").toArray(),s[0]=1.04**o):e===1&&(n[1]=f(4+4*o).toArray(),s[1]=o/400):r===4?e===0?(n[0]=f("1e4").power(o).multiply("1e4").toArray(),s[0]=1.06**o):e===1&&(n[1]=f(20+20*o).toArray(),s[1]=1.03**o):r===5&&(e===0?(n[0]=f(120+120*o).toArray(),s[0]=1.04**o):e===1&&(n[1]=f(2+2*o).toArray(),s[1]=o/40));else{let l=i.milestonesInfo[r].scalingOld[e];n[e]=o<l.length?f(l[o]).toArray():[0,0]}},Q=(e,r,n=0)=>{if(!ht(e,r)){n>0&&(N(`Milestone '${i.milestonesInfo[r].name[e]}' ${n>1?`${g(n)} new tiers`:"new tier"} reached
Total is now: ${g(t.milestones[r][e])}`),t.inflation.vacuum?r===1&&e===1&&(ce(),Q(1,1)):(t.strange[0].current+=n,t.strange[0].total+=n,lt(),ee()));return}t.milestones[r][e]++,ke(e,r),Q(e,r,n+1)},Re=e=>{if(t.challenges.active!==0)return;let r=t.challenges.void[e],n=1;if(e===1?n+=t.researchesExtra[1][2]:e===2?f(t.vaporization.clouds).moreThan("1e4")&&n++:e===3?n=t.accretion.rank-1:e===4&&(t.collapse.stars[0]>1&&n++,t.collapse.stars[1]>1&&n++,t.collapse.stars[2]>1&&n++),!(r>=n)){t.challenges.void[e]=n;for(let s=r;s<n;s++)N(`New Void reward achieved
Reward: ${i.challengesInfo.rewardText[0][e][s]}`);e===3&&r<4&&(w(0,1,"strangeness",!0),w(2,1,"strangeness",!0),w(9,1,"strangeness",!0),w(1,2,"strangeness",!0),w(3,2,"strangeness",!0),w(0,3,"strangeness",!0),w(1,3,"strangeness",!0),w(10,3,"strangeness",!0),w(0,4,"strangeness",!0),w(1,4,"strangeness",!0),w(7,4,"strangeness",!0),w(1,5,"strangeness",!0))}},Ct=async e=>{if(t.challenges.active===e){await V(`Leave the '${i.challengesInfo.name[e]}'?`)&&Bt(),me(e);return}if(!t.inflation.vacuum||e===0&&t.strangeness[5][0]<1||!await V(`Enter the '${i.challengesInfo.name[e]}'?
Stage reset will be forced`))return;let r=fe(5);t.challenges.active=e,r?it(5):(t.stage.time=0,t.stage.active=1,t.stage.current=1,Ge([1,2,3,4,5])),me(e),i.screenReader[0]&&(a("SRStage").textContent=`'${i.challengesInfo.name[e]}' is now active`)},Bt=()=>{t.challenges.active=-1,t.stage.time=0,t.stage.active=1,t.stage.current=1,Ge([1,2,3,4,5]),i.screenReader[0]&&(a("SRStage").textContent="Challenge is no longer active")};var C={resetHTML:["",'<span class="bigWord orangeText">Discharge</span>. Reset current Structures and Energy. Will also boost production by <span id="dischargeEffect" class="orangeText"></span>, if to reset with enough Energy.','<span class="bigWord grayText">Vaporization</span>. Structures, upgrades, will be reset. But in return gain <span class="grayText">Clouds</span>. It takes a lot to form more than one.','<img id="rankImage" src="Used_art/Missing.png" alt="">Current <span class="bigWord darkorchidText">Rank</span> is: <span id="rankName"></span>. <span id="rankMessage"></span>','<span class="bigWord orchidText">Collapse</span> - Everything will be lost, but at same time gained. Even remnants have their own unique strength and effects.',""],longestBuilding:7,buildingHTML:[[],["Preon.png","Quarks.png","Particle.png","Atom.png","Molecule.png"],["Drop.png","Puddle.png","Pond.png","Lake.png","Sea.png","Ocean.png"],["Cosmic%20dust.png","Planetesimal.png","Protoplanet.png","Natural%20satellite.png","Subsatellite.png"],["Brown%20dwarf.png","Orange%20dwarf.png","Red%20supergiant.png","Blue%20hypergiant.png","Quasi%20star.png"],["Nebula.png","Star%20cluster.png","Galaxy.png"]],longestUpgrade:13,upgradeHTML:[[],[["UpgradeQ1.png","Weak force"],["UpgradeQ2.png","Strong force"],["UpgradeQ3.png","Electron"],["UpgradeQ4.png","Proton"],["UpgradeQ5.png","Neutron"],["UpgradeQ6.png","Superposition"],["UpgradeQ7.png","Protium"],["UpgradeQ8.png","Deuterium"],["UpgradeQ9.png","Tritium"],["UpgradeQ10.png","Fusion"]],[["UpgradeW1.png","H2O"],["UpgradeW2.png","Spread"],["UpgradeW3.png","Vaporization"],["UpgradeW4.png","Tension"],["UpgradeW5.png","Stress"],["UpgradeW6.png","Stream"],["UpgradeW7.png","River"],["UpgradeW8.png","Tsunami"],["UpgradeW9.png","Tide"]],[["UpgradeA1.png","Motion"],["UpgradeA2.png","Gas"],["UpgradeA3.png","Micrometeoroid"],["UpgradeA4.png","Instability"],["UpgradeA5.png","Gravity"],["UpgradeA6.png","Pile"],["UpgradeA7.png","Orbit"],["UpgradeA8.png","Magma"],["UpgradeA9.png","Equilibrium"],["UpgradeA10.png","Atmosphere"],["UpgradeA11.png","Pebble"],["UpgradeA12.png","Tidal force"],["UpgradeA13.png","Ring"]],[["UpgradeS1.png","Collapse"],["UpgradeS2.png","Reaction"],["UpgradeS3.png","CNO"],["UpgradeS4.png","Helium fusion"]],[["UpgradeG1.png","Instability"],["UpgradeG2.png","Super cluster"],["UpgradeG3.png","Quasar"]]],longestResearch:9,researchHTML:[[],[["ResearchQ1.png","Protium+","stage1borderImage"],["ResearchQ2.png","Deuterium+","stage1borderImage"],["ResearchQ3.png","Tritium+","stage1borderImage"],["ResearchQ4.png","Discharge-","stage4borderImage"],["ResearchQ5.png","Discharge+","stage4borderImage"],["ResearchQ6.png","Discharge++","stage4borderImage"]],[["ResearchW1.png","H2O+","stage2borderImage"],["ResearchW2.png","H2O++","stage2borderImage"],["ResearchW3.png","Tension+","stage2borderImage"],["ResearchW4.png","Stress+","stage2borderImage"],["ResearchW5.png","Streams+","stage2borderImage"],["ResearchW6.png","Channel","stage2borderImage"]],[["ResearchA1.png","Mass+","stage3borderImage"],["ResearchA2.png","Adhesion","stage2borderImage"],["ResearchA3.png","Weathering","stage3borderImage"],["ResearchA4.png","Shattering","stage3borderImage"],["ResearchA5.png","Collision","stage3borderImage"],["ResearchA6.png","Binary","stage3borderImage"],["ResearchA7.png","Gravity+","stage1borderImage"],["ResearchA8.png","Layers","stage7borderImage"],["ResearchA9.png","Drag","stage1borderImage"]],[["ResearchS1.png","Orbit","stage5borderImage"],["ResearchS2.png","2 stars","stage5borderImage"],["ResearchS3.png","Protodisc","stage7borderImage"],["ResearchS4.png","Planetary nebula","stage5borderImage"],["ResearchS5.png","Gamma-rays","stage6borderImage"]],[["ResearchG1.png","Density","stage1borderImage"],["ResearchG2.png","Frequency","stage6borderImage"]]],longestResearchExtra:5,researchExtraDivHTML:[[],["Energy%20Researches.png","stage4borderImage"],["Cloud%20Researches.png","stage2borderImage"],["Rank%20Researches.png","stage6borderImage"],["Collapse%20Researches.png","stage6borderImage"],[]],researchExtraHTML:[[],[["ResearchEnergy1.png","Strong force+","stage1borderImage"],["ResearchEnergy2.png","Radiation+","stage5borderImage"],["ResearchEnergy3.png","Accretion","stage3borderImage"],["ResearchEnergy4.png","Preon Mass","stage1borderImage"],["ResearchEnergy5.png","Impulse","stage6borderImage"]],[["ResearchClouds1.png","Vaporization+","stage3borderImage"],["ResearchClouds2.png","Rain","stage2borderImage"],["ResearchClouds3.png","Storm","stage4borderImage"],["ResearchClouds4.png","Water Accretion","stage2borderImage"]],[["ResearchRank1.png","Ocean","stage3borderImage"],["ResearchRank2.png","Rank","stage3borderImage"],["ResearchRank3.png","Weight","stage3borderImage"],["ResearchRank4.png","Viscosity","stage2borderImage"],["ResearchRank5.png","Water Rank","stage2borderImage"]],[["ResearchCollapse1.png","Supernova","stage6borderImage"],["ResearchCollapse2.png","Mass transfer","stage7borderImage"],["ResearchCollapse3.png","White dwarf","stage1borderImage"]],[]],longestFooterStats:3,footerStatsHTML:[[],[["Energy%20mass.png","stage1borderImage cyanText","Mass"],["Energy.png","stage4borderImage orangeText","Energy"]],[["Clouds.png","stage3borderImage grayText","Clouds"],["Water.png","stage2borderImage blueText","Moles"],["Drop.png","stage2borderImage blueText","Drops"]],[["Mass.png","stage3borderImage grayText","Mass"]],[["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"],["Elements.png","stage4borderImage orangeText","Elements"]],[["Main_sequence%20mass.png","stage1borderImage cyanText","Mass"],["Elements.png","stage4borderImage orangeText","Elements"],["Stars.png","stage7borderImage redText","Stars"]]],cache:{imagesDiv:document.createElement("div"),idMap:new Map,classMap:new Map,queryMap:new Map}},$t=()=>{let{footerStatsHTML:e,buildingHTML:r,upgradeHTML:n,researchHTML:s,researchExtraHTML:o,researchExtraDivHTML:l}=C,c="";for(let u=1;u<=5;u++){for(let m=0;m<e[u].length;m++){if(u===2){if(m===2)continue}else if(u===5&&m<2)continue;c+=`<img src="Used_art/${e[u][m][0]}" loading="lazy">`}for(let m=0;m<r[u].length;m++)c+=`<img src="Used_art/${r[u][m]}" loading="lazy">`;for(let m=0;m<n[u].length;m++)c+=`<img src="Used_art/${n[u][m][0]}" loading="lazy">`;for(let m=0;m<s[u].length;m++)c+=`<img src="Used_art/${s[u][m][0]}" loading="lazy">`;for(let m=0;m<o[u].length;m++)c+=`<img src="Used_art/${o[u][m][0]}" loading="lazy">`;l[u].length>0&&(c+=`<img src="Used_art/${l[u][0]}" loading="lazy">`),c+=`<img src="Used_art/Stage${u}%20border.png" loading="lazy">`}C.cache.imagesDiv.innerHTML=c},Ne=e=>{e!==null&&(t.stage.true<e&&(e=null),e===6&&t.stage.true<7&&t.strangeness[5][0]<1&&(e=null)),i.theme=e,e===null?localStorage.removeItem("theme"):localStorage.setItem("theme",`${e}`),nt()},nt=()=>{var o;let e=document.body.style,r=(o=i.theme)!=null?o:t.stage.active;a("currentTheme").textContent=i.theme===null?"Default":i.stageInfo.word[r];let n="",s="";switch(e.setProperty("--transition-all","1s"),e.setProperty("--transition-buttons","700ms"),e.removeProperty("--background-color"),e.removeProperty("--window-color"),e.removeProperty("--window-border"),e.removeProperty("--footer-color"),e.removeProperty("--button-main-color"),e.removeProperty("--button-main-border"),e.removeProperty("--button-main-hover"),e.removeProperty("--building-can-buy"),e.removeProperty("--button-tab-border"),e.removeProperty("--button-tab-active"),e.removeProperty("--button-tab-elements"),e.removeProperty("--button-tab-strangeness"),e.removeProperty("--button-image-hover"),e.removeProperty("--button-footer-hover"),e.removeProperty("--button-delete-color"),e.removeProperty("--button-delete-hover"),e.removeProperty("--input-border-color"),e.removeProperty("--input-text-color"),e.removeProperty("--button-text-color"),e.removeProperty("--main-text-color"),e.removeProperty("--white-text-color"),e.removeProperty("--blue-text-color"),e.removeProperty("--orange-text-color"),e.removeProperty("--gray-text-color"),e.removeProperty("--orchid-text-color"),e.removeProperty("--darkorchid-text-color"),e.removeProperty("--darkviolet-text-color"),e.removeProperty("--red-text-color"),e.removeProperty("--green-text-color"),e.removeProperty("--yellow-text-color"),r){case 1:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="",a(`${l}Cost`).style.color="",l!=="upgrade"&&(a(`${l}Text`).style.color="");break;case 2:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="var(--green-text-color)",a(`${l}Cost`).style.color="var(--cyan-text-color)",l!=="upgrade"&&(a(`${l}Text`).style.color="");e.setProperty("--background-color","#070026"),e.setProperty("--window-color","#000052"),e.setProperty("--window-border","blue"),e.setProperty("--footer-color","#0000db"),e.setProperty("--button-main-color","blue"),e.setProperty("--button-main-border","#427be1"),e.setProperty("--button-main-hover","#1111b0"),e.setProperty("--button-tab-border","#376ac5"),e.setProperty("--button-tab-active","#990000"),e.setProperty("--button-image-hover","#2400d7"),e.setProperty("--input-border-color","#4747ff"),e.setProperty("--input-text-color","dodgerblue"),e.setProperty("--main-text-color","var(--blue-text-color)"),e.setProperty("--gray-text-color","#9b9b9b"),e.setProperty("--darkorchid-text-color","#c71bff"),e.setProperty("--darkviolet-text-color","#8b6bff"),e.setProperty("--green-text-color","#82cb3b"),e.setProperty("--red-text-color","#f70000"),t.stage.active===2&&(n="#3099ff",s="#3099ff");break;case 3:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="",a(`${l}Cost`).style.color="var(--green-text-color)",l!=="upgrade"&&(a(`${l}Text`).style.color="var(--orange-text-color)");e.setProperty("--background-color","#000804"),e.setProperty("--window-color","#2e1200"),e.setProperty("--window-border","#31373e"),e.setProperty("--footer-color","#221a00"),e.setProperty("--button-main-color","#291344"),e.setProperty("--button-main-border","#404040"),e.setProperty("--button-main-hover","#382055"),e.setProperty("--button-tab-border","#484848"),e.setProperty("--button-tab-active","#8d4c00"),e.setProperty("--button-tab-elements","var(--button-tab-active)"),e.setProperty("--button-image-hover","#5a2100"),e.setProperty("--button-footer-hover","#1a1a1a"),e.setProperty("--button-delete-color","#891313"),e.setProperty("--button-delete-hover","#a80b0b"),e.setProperty("--input-border-color","#8b4a00"),e.setProperty("--input-text-color","#e77e00"),e.setProperty("--main-text-color","var(--gray-text-color)"),e.setProperty("--white-text-color","#dfdfdf"),e.setProperty("--orange-text-color","#f58600"),e.setProperty("--green-text-color","#00db00"),t.stage.active===2&&(n="#3099ff",s="#3099ff");break;case 4:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="var(--green-text-color)",a(`${l}Cost`).style.color="var(--cyan-text-color)",l!=="upgrade"&&(a(`${l}Text`).style.color="var(--blue-text-color)");e.setProperty("--background-color","#140e04"),e.setProperty("--window-color","#4e0000"),e.setProperty("--window-border","#894800"),e.setProperty("--footer-color","#4e0505"),e.setProperty("--button-main-color","#6a3700"),e.setProperty("--button-main-border","#9f6700"),e.setProperty("--button-main-hover","#914b00"),e.setProperty("--building-can-buy","#007f95"),e.setProperty("--button-tab-border","#af5d00"),e.setProperty("--button-tab-active","#008297"),e.setProperty("--button-tab-elements","var(--button-tab-active)"),e.setProperty("--button-tab-strangeness","#00a500"),e.setProperty("--button-image-hover","#605100"),e.setProperty("--button-footer-hover","#212121"),e.setProperty("--button-delete-color","#8f0000"),e.setProperty("--button-delete-hover","#ad0000"),e.setProperty("--input-border-color","#008399"),e.setProperty("--input-text-color","#05c3c3"),e.setProperty("--button-text-color","#d9d900"),e.setProperty("--main-text-color","var(--orange-text-color)"),e.setProperty("--white-text-color","#e5e500"),e.setProperty("--blue-text-color","#2e96ff"),e.setProperty("--gray-text-color","#8b8b8b"),e.setProperty("--darkorchid-text-color","#c71bff"),e.setProperty("--darkviolet-text-color","#9457ff"),e.setProperty("--red-text-color","red"),e.setProperty("--green-text-color","#00e600"),e.setProperty("--yellow-text-color","var(--green-text-color)");break;case 5:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="var(--green-text-color)",a(`${l}Cost`).style.color="var(--red-text-color)",l!=="upgrade"&&(a(`${l}Text`).style.color="var(--orange-text-color)");e.setProperty("--background-color","#060010"),e.setProperty("--window-color","#001d42"),e.setProperty("--window-border","#35466e"),e.setProperty("--footer-color","#2f005c"),e.setProperty("--button-main-color","#4a008f"),e.setProperty("--button-main-border","#8a0049"),e.setProperty("--button-main-hover","#6800d6"),e.setProperty("--building-can-buy","#8603ff"),e.setProperty("--button-tab-border","#9d0054"),e.setProperty("--button-tab-active","#8500ff"),e.setProperty("--button-image-hover","#3b0080"),e.setProperty("--button-footer-hover","#1a1a1a"),e.setProperty("--button-delete-color","#800000"),e.setProperty("--button-delete-hover","#9b1212"),e.setProperty("--input-border-color","#3656a1"),e.setProperty("--input-text-color","#6a88cd"),e.setProperty("--button-text-color","#fc9cfc"),e.setProperty("--main-text-color","var(--darkorchid-text-color)"),e.setProperty("--white-text-color","#ff79ff"),e.setProperty("--orchid-text-color","#ff00f4"),e.setProperty("--darkorchid-text-color","#c000ff"),e.setProperty("--darkviolet-text-color","#9f52ff"),e.setProperty("--yellow-text-color","var(--darkviolet-text-color)");break;case 6:for(let l of["upgrade","research","element"])a(`${l}Effect`).style.color="var(--red-text-color)",a(`${l}Cost`).style.color="",l!=="upgrade"&&(a(`${l}Text`).style.color="var(--orchid-text-color)");e.setProperty("--background-color","black"),e.setProperty("--window-color","#01003c"),e.setProperty("--window-border","#7100ff"),e.setProperty("--footer-color","#00007a"),e.setProperty("--button-main-color","#2b0095"),e.setProperty("--button-main-border","#711bda"),e.setProperty("--button-main-hover","#3d00d6"),e.setProperty("--building-can-buy","#a80000"),e.setProperty("--button-tab-border","#6719c8"),e.setProperty("--button-tab-active","#8d0000"),e.setProperty("--button-image-hover","#490070"),e.setProperty("--button-delete-color","#930606"),e.setProperty("--button-delete-hover","#b80000"),e.setProperty("--input-border-color","#a50000"),e.setProperty("--input-text-color","red"),e.setProperty("--button-text-color","#efe0ff"),e.setProperty("--main-text-color","var(--darkviolet-text-color)"),e.setProperty("--gray-text-color","#9b9b9b"),e.setProperty("--darkviolet-text-color","#8157ff"),e.setProperty("--white-text-color","#f9f5ff"),e.setProperty("--red-text-color","red"),e.setProperty("--yellow-text-color","var(--red-text-color)")}B("#footerStat2 > p").style.color=n,B("#footerStat3 > p").style.color=s,setTimeout(()=>{e.removeProperty("--transition-all"),e.removeProperty("--transition-buttons")},1e3)},R=async e=>await new Promise(r=>{let n=a("blocker");if(n.style.display!=="none"){r(),N("Another Alert is already active");return}a("alertText").textContent=e;let s=a("confirmBtn");n.style.display="",s.focus();let o=async c=>{(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())},l=()=>{n.style.display="none",document.removeEventListener("keydown",o),s.removeEventListener("click",l),r()};document.addEventListener("keydown",o),s.addEventListener("click",l)}),V=async e=>await new Promise(r=>{let n=a("blocker");if(n.style.display!=="none"){r(!1),N("Another Alert is already active");return}a("alertText").textContent=e;let s=a("cancelBtn"),o=a("confirmBtn");n.style.display="",s.style.display="",o.focus();let l=()=>{m(!0)},c=()=>{m(!1)},u=h=>{h.key==="Escape"?(h.preventDefault(),c()):(h.key==="Enter"||h.key===" ")&&document.activeElement!==s&&(h.preventDefault(),l())},m=h=>{n.style.display="none",s.style.display="none",document.removeEventListener("keydown",u),o.removeEventListener("click",l),s.removeEventListener("click",c),r(h)};document.addEventListener("keydown",u),o.addEventListener("click",l),s.addEventListener("click",c)}),Xe=async(e,r="")=>await new Promise(n=>{let s=a("blocker");if(s.style.display!=="none"){n(null),N("Another Alert is already active");return}a("alertText").textContent=e;let o=a("inputArea"),l=a("cancelBtn"),c=a("confirmBtn");s.style.display="",l.style.display="",o.style.display="",o.value=r,o.focus();let u=()=>{y(o.value)},m=()=>{y(null)},h=v=>{v.key==="Escape"?(v.preventDefault(),m()):(v.key==="Enter"||v.key===" ")&&document.activeElement!==l&&(v.preventDefault(),u())},y=v=>{s.style.display="none",l.style.display="none",o.style.display="none",document.removeEventListener("keydown",h),c.removeEventListener("click",u),l.removeEventListener("click",m),n(v)};document.addEventListener("keydown",h),c.addEventListener("click",u),l.addEventListener("click",m)}),N=e=>{let r=a("notifications"),n=document.createElement("p");n.textContent=e,n.style.animation="hideX 1s ease-in-out reverse",r.style.pointerEvents="",i.screenReader[0]&&n.setAttribute("role","alert");let s=a("notifications");s.appendChild(n);let o,l=()=>{n.removeEventListener("click",l),n.style.animation="hideX 1s ease-in-out forwards",setTimeout(()=>{s.removeChild(n),r.style.pointerEvents=""},1e3),clearTimeout(o)};setTimeout(()=>{n.style.animation="",r.style.pointerEvents="auto",o=setTimeout(l,9e3),n.addEventListener("click",l)},1e3)},Ye=()=>{let e=a("footer"),r=a("footerMain"),n=a("hideToggle"),s=a("hideArrow"),o=()=>{e.style.animation="",s.style.animation="",n.addEventListener("click",Ye)};i.footer=!i.footer,n.removeEventListener("click",Ye),i.footer?(r.style.display="",s.style.transform="",e.style.animation="hideY 1s reverse",s.style.animation="rotate 1s reverse",a("hideText").textContent="Hide",setTimeout(o,1e3),K(),ae()):(e.style.animation="hideY 1s backwards",s.style.animation="rotate 1s backwards",a("hideText").textContent="Show",setTimeout(()=>{r.style.display="none",s.style.transform="rotate(180deg)",o()},1e3))},Ze=(e=!1)=>{let r=localStorage.getItem("support")==="MD",n=a("MDMainToggle");e&&(r=!r),r?(n.textContent="ON",n.style.color="var(--red-text-color)",n.style.borderColor="crimson",localStorage.setItem("support","MD"),i.mobileDevice=!0,e&&R("To enable touchStart events (as example: touching an upgrade to view description), will need to reload"),i.screenReader[0]&&et(),a("file").accept=""):(n.textContent="OFF",n.style.color="",n.style.borderColor="",i.mobileDevice=!1,e&&localStorage.removeItem("support"),a("file").accept=".txt")},et=(e=!1)=>{let r=localStorage.getItem("support")==="SR",n=a("SRMainToggle");e&&(r=!r),r?(n.textContent="ON",n.style.color="var(--red-text-color)",n.style.borderColor="crimson",localStorage.setItem("support","SR"),i.screenReader[0]=!0,e&&R("To enable focus events (as example: view description of an upgrade by pressing 'tab'), will need to reload"),i.mobileDevice&&Ze(),Ut(),O()):(n.textContent="OFF",n.style.color="",n.style.borderColor="",i.screenReader[0]=!1,e&&localStorage.removeItem("support"))},Ut=()=>{if(a("stageSelect").classList.add("active"),a("SRMain",!1)!==null)return;i.screenReader[2]=!0,a("SRMessage1",!1).remove();let e=document.createElement("article");e.innerHTML='<p id="SRTab" aria-live="polite"></p><p id="SRStage" aria-live="polite"></p><p id="SRMain" aria-live="assertive"></p>',e.classList.add("reader"),e.setAttribute("aria-label","Information for Screen reader"),a("fakeFooter").before(e);let r=document.createElement("section");r.innerHTML='<button type="button" id="SRToggle1">Return index tab to created Upgrades/Researches and etc.</button><button type="button" id="SRToggle2">Return index tab to primary buttons</button>',r.classList.add("reader"),r.setAttribute("aria-label","Settings for Screen reader"),B("#settingsSubtabSettings .options").before(r);let n=s=>{i.screenReader[s]=!i.screenReader[s];let o=a(`SRToggle${s}`);o.textContent=o.textContent.replace(i.screenReader[s]?"Remove tab from":"Return tab to",i.screenReader[s]?"Return tab to":"Remove tab from")};a("SRToggle1").addEventListener("click",()=>{n(1),O("reload");for(let s=1;s<t.strangeness.length;s++)for(let o=0;o<i.strangenessInfo[s].maxActive;o++)_(o,s,"strangeness")}),a("SRToggle2").addEventListener("click",()=>{n(2);let s=i.screenReader[2]?-1:0;a("stageReset").tabIndex=s,a("reset1Button").tabIndex=s;for(let o=1;o<C.longestBuilding;o++)a(`building${o}Btn`).tabIndex=s,a(`toggleBuilding${o}`).tabIndex=s;a("toggleBuilding0").tabIndex=s;for(let o of i.tabList.tabs)if(a(`${o}TabBtn`).tabIndex=s,!!Object.hasOwn(i.tabList,`${o}Subtabs`))for(let l of i.tabList[`${o}Subtabs`])a(`${o}SubtabBtn${l}`).tabIndex=s;for(let o=1;o<i.stageInfo.word.length;o++)a(`${i.stageInfo.word[o]}Switch`).tabIndex=s})},ct=(e=!1)=>{let r=a("customFontSize"),n=Number(e?r.value:localStorage.getItem("fontSize"));n===0&&(n=16),n===16?(document.body.style.fontSize="",localStorage.removeItem("fontSize")):(n=Math.floor(Math.min(Math.max(n,10),32)*10)/10,document.body.style.fontSize=`${n}px`,localStorage.setItem("fontSize",`${n}`)),r.value=`${n}`},ut=e=>{let r=e?a("decimalPoint"):a("thousandSeparator");(![".",","," ","_","^",'"',"'","`","|"].includes(r.value)||(e?t.separator[0]:t.separator[1])===r.value)&&(e&&t.separator[0]==="."&&(a("thousandSeparator").value="",t.separator[0]=""),r.value=e?".":""),e?t.separator[1]=r.value:t.separator[0]=r.value},Tt=async()=>{if(a("blocker").style.display!=="none")return;let{events:e}=t,r;e[2]?r=6:e[1]?r=5:r=t.stage.true-(e[0]?0:1);let n=Number(await Xe(`Which event do you want to see again?
(Number of highest unlocked event is ${r})`,`${r}`));if(!(!isFinite(n)||n<=0)){if(n>r)return void R(`Event ${n} isn't unlocked`);ne(n-1,-1)}},ne=(e,r)=>{if(a("blocker").style.display==="none")switch(r!==-1&&(t.events[r]=!0),e){case 0:return void R(`Energy that had been spent, can't be obtained again. But doing Discharge will reset spent Energy
(How much Energy should be if none was used can be seen in stats)`);case 1:return void R("Cloud density is too high... Strength of new Clouds will be weaker (strength can be seen in stats)");case 2:return r!==-1&&(i.accretionInfo.rankCost[4]=5e29),void R("Getting more Mass, seems impossible. We need to change our approach, next Rank is going to be softcapped");case 3:return void R("Elements require Collapse to be activated. Soon even more Star remnants will be obtained through Collapse (Solar mass cannot decrease), remnants strength can be seen in stats, effects will be known with proper Elements (Like Solar mass effect and '[1] Hydrogen')");case 4:return void R("There doesn't seem to be anything here. Let's try going back to start and find what is missing");case 5:return r!==-1&&w(4,4,"strangeness",!0),void R("Galaxy will boost production of Nebulas and Star clusters, but for the cost of every other structure/upgrade and even Elements")}};var t={version:"v0.1.6",saveUpdate016:!1,fileName:"Fundamental, [date] [time], [stage]",separator:["","."],stage:{true:1,current:1,active:1,resets:0,export:86400,best:0,time:0,input:20},discharge:{energy:0,energyMax:0,current:0},vaporization:{clouds:[0,0],cloudsMax:[0,0],input:3},accretion:{rank:0,input:0},collapse:{mass:.01235,massMax:.01235,stars:[0,0,0],show:0,input:2},inflation:{vacuum:!1,age:0},intervals:{main:20,numbers:80,visual:1e3,autoSave:2e4},time:{updated:Date.now(),started:Date.now(),offline:0},buildings:[[],[{current:[3,0],total:[3,0],trueTotal:[3,0],highest:[3,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[2.8,-3],total:[2.8,-3],trueTotal:[2.8,-3],highest:[2.8,-3]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,-19],total:[1,-19],trueTotal:[1,-19],highest:[1,-19]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,0],total:[1,0],trueTotal:[1,0],highest:[1,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}]],strange:[{current:0,total:0},{current:0,total:0}],upgrades:[],researches:[],researchesExtra:[],ASR:[],elements:[],strangeness:[],milestones:[],challenges:{active:-1,void:[0,0,0,0,0,0]},toggles:{normal:[],confirm:[],buildings:[],auto:[],shop:{howMany:1,input:10,wait:[2]}},history:{stage:{best:[0,1,0],list:[],input:[5,10]}},events:[!1,!1,!1]},i={tab:"stage",subtab:{stageCurrent:"Structures",settingsCurrent:"Settings",researchCurrent:"Researches",strangenessCurrent:"Matter"},tabList:{tabs:["stage","research","strangeness","settings"],stageSubtabs:["Structures","Advanced"],settingsSubtabs:["Settings","History","Stats"],researchSubtabs:["Researches","Elements"],strangenessSubtabs:["Matter","Milestones"]},debug:{errorID:!0,errorQuery:!0,errorGain:!0},lastActive:null,lastSave:0,footer:!0,mobileDevice:!1,screenReader:[!1,!0],automatization:{autoU:[[],[],[],[],[],[]],autoR:[[],[],[],[],[],[]],autoE:[[],[],[],[],[],[]],elements:[]},theme:null,dischargeInfo:{getEnergy:(e,r)=>{let n=i.dischargeInfo.energyType[r][e];return r===1&&e===1&&(n+=t.strangeness[1][4]*(t.inflation.vacuum?2:1)),t.inflation.vacuum&&(n+=Math.floor(n/100*i.milestonesInfo[1].reward[1]),t.challenges.active===0&&(n-=Math.ceil(n/5))),n},energyType:[[],[0,1,3,5,10,20],[0,10,20,30,40,50,60],[0,10,20,40,80,100],[0,100,200,300,400,500],[0,400,400,1e3]],energyTrue:0,bonus:0,next:1},vaporizationInfo:{effect2U2:()=>1e10/2**t.strangeness[2][3],oceanWorld:()=>f(t.vaporization.clouds).lessOrEqual("1")?1:1.02**(1+f(t.vaporization.clouds).log(10).toNumber()),cloudEffect:(e=!1)=>{let r=f(t.vaporization.clouds).plus("1").toArray();return e&&(r=f(r).plus(i.vaporizationInfo.get).toArray()),f(r).moreThan("1e4")&&(r=f(r).minus("1e4").power(.7).plus("1e4").toArray()),r},rainEffect:(e=!1)=>{if(t.researchesExtra[2][1]<1)return 1;let r=f(t.vaporization.clouds).plus("1").toArray();return e&&(r=f(r).plus(i.vaporizationInfo.get).toArray()),f(r).power(t.researchesExtra[2][2]>=1?.11:.1).toNumber()},tension:1,stress:1,get:[0,0]},accretionInfo:{effective:0,rankU:[1,1,2,2,3,3,4,4,4,4,5,5,5],rankR:[1,1,2,2,3,3,3,4,5],rankE:[2,3,4,5,3],rankCost:[597e25,1e-7,1e10,1e24,5e29,247e29,0],rankName:["Ocean world","Cosmic dust","Meteoroid","Asteroid","Planet","Jovian planet","Protostar"],rankImage:["Ocean%20world.png","Dust.png","Meteoroids.png","Asteroid.png","Planet.png","Giant.png","Protostar.png"]},collapseInfo:{effect4RE1:()=>(10+t.researches[4][1])/10,unlockB:[0,.01235,.23,10,40,1e3],unlockG:[0,100,1e3],unlockU:[.01235,.076,1.3,10],unlockR:[.18,.3,.8,1.3],newMass:0,massEffect:(e=!1)=>{let r=1,n=t.collapse.mass;e&&(r=.5,i.collapseInfo.newMass>n&&(n=i.collapseInfo.newMass));let s=1;return t.challenges.active===0&&(n/=10,s-=.2),t.elements[21]>=r&&(s+=.1),n**(n>1?s:2-s)},starCheck:[0,0,0],starEffect:[(e=!1)=>{let r=1,n=t.collapse.stars[0]+1;return e&&(r=.5,n+=i.collapseInfo.starCheck[0]),t.elements[6]>=r&&(n**=i.elementsInfo.effect[6]),n},(e=!1)=>{let r=1,n=t.collapse.stars[1];e&&(r=.5,n+=i.collapseInfo.starCheck[1],t.elements[22]>=r&&(n+=i.collapseInfo.starCheck[0])),t.elements[22]>=r&&(n+=t.collapse.stars[0]);let s=(n+1)**(.5+t.strangeness[4][10]/40);return t.elements[12]>=r&&(s*=Je(n+i.elementsInfo.effect[12],i.elementsInfo.effect[12])),s},(e=!1)=>{let r=1,n=t.collapse.stars[2];return e&&(r=.5,n+=i.collapseInfo.starCheck[2]),n<1?1:(n+1)/Je(n+2,t.elements[18]>=r?3:2)}],trueStars:0},inflationInfo:{preonCap:[1,14],dustCap:[8,46],massCap:60,preonTrue:[0,0],dustTrue:[0,0]},intervalsId:{main:void 0,numbers:void 0,visual:void 0,autoSave:void 0},stageInfo:{word:["","Microworld","Submerged","Accretion","Interstellar","Intergalactic","Void"],textColor:["","var(--cyan-text-color)","var(--blue-text-color)","var(--gray-text-color)","var(--orange-text-color)","var(--darkorchid-text-color)","var(--darkviolet-text-color)"],buttonBackgroundColor:["","mediumblue","blue","#291344","#6a3700","#4a008f","#2b0095"],buttonBorderColor:["","darkcyan","#427be1","#404040","#9f6700","#8a0049","#711bda"],imageBorderColor:["","#008b8b","#1460a8","#5b5b75","#e87400","#b324e2","#5300c1"],priceName:"Energy",activeAll:[1]},buildingsInfo:{maxActive:[0,4,6,5,5,4],name:[[],["Mass","Preons","Quarks","Particles","Atoms","Molecules"],["Moles","Drops","Puddles","Ponds","Lakes","Seas","Oceans"],["Mass","Cosmic dust","Planetesimals","Protoplanets","Satellites","Subsatellites"],["Elements","Brown dwarfs","Main sequence","Red supergiants","Blue hypergiants","Quasi stars"],["Stars","Nebulas","Star clusters","Galaxies"]],hoverText:[[],["Mass","Preons","Quarks","Particles","Atoms"],["Tritium","Drops","Puddles","Ponds","Lakes","Seas"],["Preons hardcap","Cosmic dust","Planetesimals","Protoplanets","Satellites"],["Elements","Elements","Elements","Elements","Elements"],["Interstellar Stars","Interstellar Stars","Nebulas and Star clusters"]],type:[[],["","producing","producing","producing","producing","producing"],["","producing","producing","improving","improving","improving","improving"],["","producing","producing","producing","improving","improving"],["","producing","producing","producing","producing","producing"],["","producing","improving","improving"]],firstCost:[],startCost:[[],[0,.005476,6,3,24,3],[0,.0028,100,1e7,1e18,1e23,2676e22],[0,1e-19,1e-9,1e21,1e17,1e22],[0,1,1e5,1e15,1e28,1e56],[0,1e30,1e40,1e5]],increase:[[],[0,1.4,1.4,1.4,1.4,1.4],[0,1.15,1.2,1.25,1.35,1.4,1.45],[0,1.15,1.25,1.35,10,10],[0,1.4,1.55,1.7,1.85,2],[0,4,4,1.11]],producing:[]},strangeInfo:{Element27:()=>{let e=f(t.buildings[4][0].trueTotal).log(10).toNumber()-48;return!t.inflation.vacuum&&t.upgrades[5][2]===1&&(e**=1.5),Math.max(Math.floor(e),0)},gain:e=>{let r=e>=4||t.inflation.vacuum,n=1;return r&&t.elements[27]===1&&(n+=i.strangeInfo.Element27()),t.inflation.vacuum?(n+=t.strangeness[5][5]>0?4:3,n*=i.milestonesInfo[5].reward[0],t.strangeness[2][9]>=1&&(n*=i.vaporizationInfo.oceanWorld())):n+=i.strangeInfo.instability,r&&(n*=1.5**t.strangeness[5][1]),Math.floor(n)},name:["Strange quarks","Strangelets"],stageBoost:[],instability:0},upgradesInfo:[{},{name:["Weak force","Strong force","Bigger electrons","Stronger protons","More neutrons","Superposition","Protium","Deuterium","Tritium","Nuclear fusion"],effectText:[()=>"Particles produce 5 times more Quarks.",()=>"Gluons now bind Quarks into Particles, which makes Particles 10 times cheaper.",()=>`${t.inflation.vacuum?"Atoms":"Particle"} cost is 10 times cheaper.`,()=>`${t.inflation.vacuum?"Atoms":"Particle"} produce 5 times more ${t.inflation.vacuum?"Particles":"Quarks"}.`,()=>`${t.inflation.vacuum?"Molecules":"Atoms"} produce 5 times more ${t.inflation.vacuum?"Atoms":"Particles"}.`,()=>`Ability to regain spent Energy and if had enough Energy will also boost production for all Structures by ${g(i.upgradesInfo[1].effect[5])}.
Total boost from goals: ${f(i.upgradesInfo[1].effect[5]).power(t.discharge.current+i.dischargeInfo.bonus).format()}.`,()=>`Cost scaling is decreased by ${g(i.upgradesInfo[1].effect[6])}.`,()=>`Self-made structures boost themselves by ${g(i.upgradesInfo[1].effect[7])} times.`,()=>`Molecules produce Molecules. At a reduced rate.
(${f(i.upgradesInfo[1].effect[8]).format({padding:!0})} per second)`,()=>`Unspent Energy boost Molecules production of themselves ${t.discharge.energy!==i.upgradesInfo[1].effect[9]?`${g(t.discharge.energy/i.upgradesInfo[1].effect[9],{padding:!0})} to 1. (Softcapped)
(Actual boost is ${g(i.upgradesInfo[1].effect[9],{padding:!0})})`:"1 to 1."}`],effect:[],startCost:[36,48,60,90,150,400,2e3,4e3,2e4,7e4],maxActive:10},{name:["Molecules to Moles","Water spread","Vaporization","Surface tension","Surface stress","Stream","River","Tsunami","Tide"],effectText:[()=>`Drops will produce Moles ${g(1.04)} times faster for every self-made Drop.`,()=>"Spread water faster with every Puddle, weaker for non self-made ones.",()=>`Gain ability to convert Drops into Clouds. (Puddles get a boost from Clouds)
Current Cloud gain is (Drops / ${g(i.vaporizationInfo.effect2U2())})^${g(t.inflation.vacuum?.4:.6)}.`,()=>`Puddles get boost based on Moles ^${g(i.upgradesInfo[2].effect[3])}.
(Boost is equal to ${g(i.vaporizationInfo.tension,{padding:!0})})`,()=>`Puddles get boost based on Drops ^${g(i.upgradesInfo[2].effect[4])}.
(Boost is equal to ${g(i.vaporizationInfo.stress,{padding:!0})})`,()=>`Ponds now create extra Puddles. (${g(i.upgradesInfo[2].effect[5])} extra Puddles per Pond)`,()=>`Lakes now create extra Ponds. (${g(i.upgradesInfo[2].effect[6])} extra Ponds per Lake)`,()=>"Spreads enough water to make each Sea create 1 extra Lake.",()=>"Spreads water too fast. 1 extra Sea per Ocean."],effect:[],startCost:[1e4,1e6,1e10,1e3,1e4,2e9,5e20,1e28,1e44],maxActive:8},{name:["Brownian motion","Gas","Micrometeoroid","Streaming instability","Gravitational field","Rubble pile","Satellite system","Magma ocean","Hydrostatic equilibrium","Atmosphere","Pebble accretion","Tidal force","Ring system"],effectText:[()=>`Through random collisions every self-made Dust speeds up Accretion speed. (By ${g(i.upgradesInfo[3].effect[0])})`,()=>`New substance for Accretion, will provide boost to Accretion speed based on current Dust quantity.
(${g(i.upgradesInfo[3].effect[1],{padding:!0})}x boost)`,()=>"Just a small meteoroid, but it will be a good base for what to come. (Unlock a new Structure and get 2x boost to Dust)",()=>`Small bodies spontaneously concentrate into clumps. (Self-made Planetesimals boost each other by ${g(i.upgradesInfo[3].effect[3],{digits:3})})`,()=>"Bodies are now massive enough to affect each other with gravity. (Unlock a new Structure and get 3x boost to Planetesimals)",()=>"Shattered pieces fall back together. Accretion speed increased by 3.",()=>"Unlock yet another Structure.",()=>`Core melted, Accretion speed increased. (Mass production increased by ${g(i.upgradesInfo[3].effect[7])})`,()=>"After reaching equilibrium, Protoplanets will boost themselfs, more with each self-made one.",()=>"Accretion speed increased again (because of drag and escape velocity), by 2.",()=>`Accretion speed greatly increased by ${g(i.upgradesInfo[3].effect[10])}.`,()=>`Satellites cost scaling is now 2 times smaller.${t.strangeness[3][8]>=1?`
Also unlock a new Structure.`:""}`,()=>"Satellites effect scales better."],effect:[],startCost:[1e-16,1e-13,1e-13,1,1e14,1e17,1e22,1e10,1e22,1e23,1e9,1e26,1e29],maxActive:13},{name:["Gravitational Collapse","Proton-proton chain","Carbon-Nitrogen-Oxygen cycle","Helium fusion"],effectText:[()=>"As fuel runs out, every Star will boost production in its own special way.",()=>`Fuse with Protium instead of Deuterium. Unlock ${t.stage.true>=5?"5 first Elements":"a new upgrade type (Research tab)"}.`,()=>`CNO cycle is now a better source of Helium and Energy. Unlock ${t.stage.true>=5?"5 more Elements":"even more of that upgrade type"}.`,()=>"Through Triple-alpha and then Alpha process, unlock a few more Elements."],effect:[],startCost:[100,1e3,1e9,1e48],maxActive:4},{name:["Jeans instability","Super star cluster","Quasar"],effectText:[()=>`Gravitational Collapse within Nebulas will increase speed for production of Stars by ${g(i.upgradesInfo[5].effect[0])} times.`,()=>`A very massive Star clusters, that will boost Stars by ${g(i.upgradesInfo[5].effect[1])}.`,()=>t.inflation.vacuum?`Boost per Galaxy increased by +1
Requires ${g(1e6)} Solar mass`:`'[27] Cobalt' Element receives super boost of ^${g(1.5)}.`],effect:[],startCost:[1e50,1e60,1e100],maxActive:3}],researchesInfo:[{},{name:["Stronger Protium","Better Deuterium","Improved Tritium","Requirement decrease","Discharge improvement","Radioactive Discharge"],effectText:[()=>`Cost scaling is ${g(.03)} smaller with each level.`,()=>`Self-made Structures boost each other by additional ${g(.01)}.`,()=>`Molecules now produce themselves ${g(i.researchesInfo[1].effect[2])} times quicker.`,()=>"Next goal for Discharge bonus scales by -2 less.",()=>"Discharge production boost from reached goals is now +1.",()=>`Discharge will boost 'Tritium' upgrade for every reached goal. (Effect: ${g(i.researchesInfo[1].effect[5])})`],effect:[],cost:[],startCost:[2400,6e3,24e3,3e4,24e3,3e4],scaling:[400,2e3,6e3,24e3,12e3,12e3],max:[5,4,8,2,4,3],maxActive:6},{name:["Better Mole production","Better Drop production","Stronger surface tension","Stronger surface stress","More streams","Distributary channel"],effectText:[()=>`Drops produce 3 times more Moles.${i.researchesInfo[2].effect[0]!==t.researches[2][0]?`
Weakened by recent ${t.inflation.vacuum?"reset":"Vaporization"}, effective level is ${g(i.researchesInfo[2].effect[0])} (will be restored with more Drops).`:""}`,()=>`Puddles produce 2 times more Drops.${i.researchesInfo[2].effect[1]!==t.researches[2][1]?`
Weakened by recent ${t.inflation.vacuum?"reset":"Vaporization"}, effective level is ${g(i.researchesInfo[2].effect[1])} (will be restored with more Drops).`:""}`,()=>`Surface tension upgrade is now +${g(.005)} stronger.`,()=>`Surface stress upgrade is now +${g(.005)} stronger.`,()=>"With more streams, can have even more extra Puddles. (+1 extra Puddles per Pond)",()=>"Rivers can split now, that allows even more Ponds per Lake. (+1 per)"],effect:[],cost:[],startCost:[10,400,1e4,1e5,1e14,1e22],scaling:[1.36,5,1e3,100,1e3,1e4],max:[8,8,4,4,2,1],maxActive:6},{name:["More massive bodies","Adhesion","Space weathering","Inelastic collisions","Destructive collisions","Contact binary","Gravity","Planetary differentiation","Aerodynamic drag"],effectText:[()=>"Dust production is increased by 3.",()=>`Dust particles cling to each other. (+${g(.01)} to 'Brownian motion')`,()=>"Planetesimals produce more Dust. (3 times more)",()=>"Slow encounter velocities will result in a more efficient growth, so this research will make bodies lose more Energy from each deflection. Mass production increased by 2.",()=>`Planetesimals when shatter replenish small grains quantity. 'Streaming instability' effect increased by +${g(.005)}.`,()=>"Some Planetesimals instead of shattering form a contact binary or even trinary. Mass production increased by 3.",()=>`Planetesimals attract other bodies with own gravity. Planetesimals get boost to production based on unspent Mass.
(Total boost: ${f(i.researchesInfo[3].effect[6]).format({padding:!0})})`,()=>`'Magma Ocean' upgrade is stronger now. (${g(1.5)}x times)`,()=>"Accretion speed for 'Pebble accretion' increased again, by 2."],effect:[],cost:[],startCost:[1e-16,1e-15,1e-5,100,1e10,1e11,1e15,1e14,1e12],scaling:[11,111,22,10,100,100,10,1e4,1e3],max:[9,3,8,8,2,2,5,4,4],maxActive:9},{name:["Planetary system","Star system","Protoplanetary disk","Planetary nebula","Gamma-ray burst"],effectText:[()=>`From Planetesimals to Planets, will get ${g(i.researchesInfo[4].effect[0],{padding:!0})}x boost to all Stars.`,()=>`All Stars boost each other. (Total boost is ${f(i.researchesInfo[4].effect[1]).format({padding:!0})})`,()=>"Improve effect scaling of 'Planetary system', as well increase its max level by +3.",()=>`Matter expelled from Red giants, this will boost Main-sequence stars by 4, as well boost all Stars by ${g(1.25)}.`,()=>`An immensely energetic explosion that will boost all Stars by ${g(i.researchesInfo[4].effect[4],{padding:!0})}. (Effect is stronger with more Black holes)`],effect:[],cost:[],startCost:[1e3,5e4,1e8,2e10,1e28],scaling:[10,200,1e12,5e44,2e8],max:[3,2,1,1,2],maxActive:5},{name:["Higher density","Type frequency"],effectText:[()=>`Higher density of Nebulas, will allow them to produce higher tier of Stars, but each tier is 4 times slower than previous one. Also will boost Nebulas by 4.
Next tier will be ${i.buildingsInfo.name[4][Math.min(t.researches[5][0]+2,4)]}.`,()=>`More types of Stars are found within Star cluster. Increasing effect by 3, but also boosting lower tier of Stars. (3 times less than higher one)
Next tier will be ${i.buildingsInfo.name[4][Math.max(3-t.researches[5][1],1)]}.`],effect:[],cost:[],startCost:[1e45,1e50],scaling:[1e15,1e15],max:[3,3],maxActive:2}],researchesExtraInfo:[{},{name:["Extra strong force","Improved formula","Accretion","Later Preons","Impulse"],effectText:[()=>`Mesons now binds Particles to form Atoms, which makes Atoms to be affected by 'Strong force'.
(Atoms are 10 times cheaper)`,()=>`Improve scaling for 'Tritium' formula, current formula is log${g(i.researchesExtraInfo[1].effect[1])}.`,()=>`First level is to begin the Accretion, second level is to Submerge it.
All Structures produce Energy on creation, as well Mass from all Stages is connected.`,()=>`Delay Preons hardcap by current Energy ^${g(i.researchesExtraInfo[1].effect[3])}.
(Effect is equal to ${g(t.discharge.energy**i.researchesExtraInfo[1].effect[3],{padding:!0})})`,()=>`Discharge goals will now boost all Interstellar Stars, but at reduced base.
Current base is ${g(i.researchesExtraInfo[1].effect[4])}, total boost is ${f(i.researchesExtraInfo[1].effect[4]).power(t.discharge.current+i.dischargeInfo.bonus).format()}.`],effect:[],cost:[],startCost:[12e3,54e3,16e3,24e3,14e4],scaling:[0,12e3,62e3,18e3,0],max:[1,4,2,6,1],maxActive:0},{name:["Natural Vaporization","Rain Clouds","Storm Clouds","Water Accretion"],effectText:[()=>"When formed Clouds will use this reset produced Drops instead of current.",()=>`Some Clouds will start pouring Drops themselves. This will produce Drops until a Puddle, afterwards it will boost Puddles.
(Effect: ${g(i.vaporizationInfo.rainEffect()-(t.buildings[2][2].current[0]===0?1:0),{padding:!0})})`,()=>`Improve 'Rain Clouds', and also boost Seas at a reduced rate. (Boost for Seas: ${g(i.researchesExtraInfo[2].effect[2],{padding:!0})})`,()=>`Submerge and boost Stars with 'Surface tension' upgrade, also with 'Surface stress' at level 2.
(Boost to Stars: ${g(i.vaporizationInfo.tension*(t.researchesExtra[2][3]>=2?i.vaporizationInfo.stress:1),{padding:!0})})`],effect:[],cost:[],startCost:[1e18,1e13,1e26,1e13],scaling:[1,1,1,1e5],max:[1,1,1,2],maxActive:3},{name:["Rank boost","Efficient growth","Weight","Viscosity","Efficient submersion"],effectText:[()=>`Dust production is increased by another ${g(i.researchesExtraInfo[3].effect[0])}.`,()=>`Accretion speed is even quicker. Improved by effective Rank. (Total boost: ${g(i.researchesExtraInfo[3].effect[1])})`,()=>"'Gravitational field' upgrade will now boost Protoplanets at reduced strength. (2x boost)",()=>"'Gas' upgrade is now a little stronger.",()=>`'Efficient growth' will now boost Puddles at reduced rate. (Current boost: ${g(i.researchesExtraInfo[3].effect[4])})`],effect:[],cost:[],startCost:[1e-18,1e-16,1e26,1e-6,1e23],scaling:[10,100,1,1e5,1e3],max:[12,5,1,8,1],maxActive:4},{name:["Nova","Mass transfer","White dwarfs"],effectText:[()=>`This violent stellar explosion is main source of Elements, also starts new Star formations.
Unlock new Structure and even more, after Collapse of that Structure.`,()=>`Star material transfers from one Star to another, ${t.inflation.vacuum?"delaying Preons hardcap":"improving Solar mass gain"} by ${g(i.collapseInfo.effect4RE1())}.
Also makes 'Star system' levels scale better.`,()=>`Matter were dispeled from Red giant and White dwarf is all that remained, improves effect of '[6] Carbon' by +${g(.5)} and '[28] Nickel' by ${g(1.5)}. Also increase max level of 'Planetary nebula' by +1.`],effect:[],cost:[],startCost:[4e4,2e9,1e50],scaling:[1e10,1,1],max:[3,1,1],maxActive:3},{name:[],effectText:[],effect:[],cost:[],startCost:[],scaling:[],max:[],maxActive:0}],ASRInfo:{cost:[0,4e3,1e10,1e-7,1e6,1],costRange:[[],[4e3,1e4,16e3,24e3,32e3],[1e10,1e14,1e18,1e23,1e28,1e34],[1e-7,1e10,5e29,2e30,1e36],[1e6,1e17,1e28,1e39,1e61],[1,1,1,1]],max:[0,5,5,4,4,0]},elementsInfo:{name:["[0] Neutronium","[1] Hydrogen","[2] Helium","[3] Lithium","[4] Beryllium","[5] Boron","[6] Carbon","[7] Nitrogen","[8] Oxygen","[9] Fluorine","[10] Neon","[11] Sodium","[12] Magnesium","[13] Aluminium","[14] Silicon","[15] Phosphorus","[16] Sulfur","[17] Chlorine","[18] Argon","[19] Potassium","[20] Calcium","[21] Scandium","[22] Titanium","[23] Vanadium","[24] Chromium","[25] Manganese","[26] Iron","[27] Cobalt","[28] Nickel"],effectText:[()=>`Element with no protons, true head of this table.
This one is ${Math.random()<.1?Math.random()<.1?"an illusive Tetraneutron, or maybe even Pentaneutron, wait where did it go? Was it even there?":"a rare Dineutron, but it is already gone...":"a simple Mononeutron, it will stay with you for as long as it can."}`,()=>`Most basic Element, increases Brown dwarf production by 2.
Also Solar mass effect is now known - boost to all Stars.`,()=>`Fusion reaction by product, makes everything Interstellar scale ${g(.1)} less.`,()=>`First metal, ${t.inflation.vacuum?"hardcap for Cosmic dust":"Solar mass gain"} per Brown dwarf lightly ${t.inflation.vacuum?"delayed":"increased"}.`,()=>`Brittle earth metal, so is brittle increase to production. (${g(1.2)}x to all Stars)`,()=>`A new color, and a new ${t.inflation.vacuum?"delay to Cosmic dust hardcap":"boost to Solar mass gain"} that is based on current Dwarf Stars.`,()=>`Base for organics, boost from Red giants is now increased to the power of ${g(i.elementsInfo.effect[6])}.
Red giants effect is now known - boost to all Main-sequence stars.`,()=>"Most abundant uncombined Element in atmosphere of some Planets, also allows to have 2 extra levels of 'Star system'.",()=>`An oxidizing agent, that will make everything Interstellar scale even slower. (${g(.05)} less)`,()=>"Highly toxic and reactive, +12 to max level of 'Planetary system'.",()=>`A noble 2x ${t.inflation.vacuum?"delay to Preons hardcap":"boost to Solar mass gain"}.`,()=>"Through leaching, get 1 extra level of 'Protoplanetary disk'.",()=>`Stars are inside you, as well Neutrons stars strength is now increased by log${g(i.elementsInfo.effect[12])}.
Neutron stars effect is now known - boost to all Stars.`,()=>`Has a great affinity towards Oxygen and to decrease cost for all Stars by ${g(1e3)}.`,()=>`Just another tetravalent metalloid, and so is another ${g(1.4)}x boost to all Stars.`,()=>`One of the Fundamentals of Life and to make all Stars ${t.inflation.vacuum?"delay Cosmic dust hardcap":"boost Solar mass gain"}.`,()=>"From hot area, to increase max level of 'Star system' by 1.",()=>"Extremely reactive to extend max level of 'Planetary system', by another 24 levels.",()=>`Less noble, but Black holes effect scales better.
Black holes effect is now known - ${t.inflation.vacuum?"delay for Preon hardcap":"boost to Solar mass gain"}.`,()=>"Don't forget about it and get a 2x boost to all Stars.",()=>"Get stronger with 1 extra level of 'Star system'.",()=>`A new color and a rare bonus of +^${g(.1)} to Solar mass effect.`,()=>"New alloy allowing Red giants to be added into effective amount of Neutron stars.",()=>`Catalyst for production of Elements. 'Gamma-ray burst' effect increased by Solar mass ^${g(.1)}.
(Effect is equal to ${g(t.collapse.mass**.1,{padding:!0})})`,()=>`No corrosion, only boost to all Stars that is based on unspent Elements ^${g(i.elementsInfo.effect[24])}.
(Boost is equal to ${f(t.buildings[4][0].current).power(i.elementsInfo.effect[24]).format({padding:!0})})`,()=>"Brittle Element, but not the bonus - 1 more level in 'Star system'.",()=>`Any further fusion will be an endothermic process${t.inflation.vacuum?". Unlock a Stage reset.":`, but what next?
Enter Intergalactic space. (Can change active Stage from footer)`}`,()=>`Combined and ready to increase Stage reset reward with every new reached digit of total Elements past 48.
(+${g(i.strangeInfo.Element27())} ${t.strangeness[5][10]>=1?"of a Strange value":"extra Strange quarks"})`,()=>`Slow to react, but will still boost all Stars by ${g(i.elementsInfo.effect[28])}.`],effect:[],startCost:[0,1e3,4e3,2e4,1e5,1e8,1e10,4e11,8e12,6e13,1e15,1e20,1e22,1e24,14e25,1e28,1e30,1e32,1e35,2e36,1e39,1e41,2e42,3e43,4e44,5e45,1e48,1e50,1e52]},strangenessInfo:[{},{name:["Stronger Discharge","Cheaper Discharge","Free Discharge","Automatic Discarge","Increased Energy","Better improvement","Keep auto Structures","More toggles","Strange boost","Fundamental boost","Conservation of Mass","Conservation of Energy"],effectText:[()=>"Base Discharge effect is now +1.",()=>`Discharge goal scales slower. (-${g(.5)})`,()=>`Obtain +${g(.5)} bonus Discharge goals.`,()=>`Automatically Discharge upon reaching next goal or spending Energy.${t.strangeness[1][11]>=1?`
Second level - reaching new goal with auto Discharge doesn't cause reset.`:""}`,()=>`Gain more Energy from creating ${t.inflation.vacuum?"Preons, +2":"Particles, +1"}.`,()=>"Research 'Improved Tritium' is now better. (+1)",()=>`Always have auto for ${i.buildingsInfo.name[1][Math.min(t.strangeness[1][6]+1,i.ASRInfo.max[1])]}.`,()=>`First level - improve control over auto Structures toggles.
Second level - improve control over consumption of Offline storage.`,()=>"Unspent Strange quarks will boost this Stage. (Bonus goals)",()=>`Minor boost of ${g(1.3)}x per level to all Microworld structures.`,()=>"No Mass will be lost when Creating Preons.",()=>`Energy is now directly based on current self-made amount of Structures.
This will also unlock better Reset automatization.`],cost:[],startCost:[2,1,4,24,2,1,2,4,36,2,16,3e3],scaling:[2.4,4,6,300,4,2.4,2,2,1,1.8,1,1],max:[4,4,2,1,2,4,3,2,1,6,1,1],maxActive:9},{name:["More Moles","Bigger Puddles","More spread","Cloud density","Automatic Vaporization","Keep auto Structures","Longer offline","Strange boost","New Structure","Ocean world","Isolation"],effectText:[()=>`Mole production increased by ${g(1.5)}.`,()=>`Puddles produce ${g(1.5)} times more.`,()=>`Increase max level for one of researches by +1.
Final level will instead unlock a new upgrade.`,()=>"Decrease requirement per Cloud.",()=>`Automatically Vaporize when reach enough boost from new Clouds.${t.strangeness[1][11]>=1?`
Second level - auto Vaporization no longer resets anything. (Also improved to reset instanly)`:""}`,()=>`Always have auto for ${i.buildingsInfo.name[2][Math.min(t.strangeness[2][5]+1,i.ASRInfo.max[2])]}.`,()=>`Decrease Offline time waste by -1 second per level.
(Effect is weaker for Warps)`,()=>"Unspent Strange quarks will boost this Stage. (Puddle production)",()=>"Current Universe state allows for another Submerged Structure.",()=>`Increase ${i.strangeInfo.name[t.strangeness[5][10]]} gained from this Stage reset based on current Cloud amount.
(Effect can be seen in stats)`,()=>"Submerged is no longer affected by or affects non Microworld Stage reset types. (Requires level 1 of 'Conservation of Energy')"],cost:[],startCost:[1,2,16,2,24,2,4,36,40,200,4e3],scaling:[1.8,1.8,2,4,500,2,2,1,1,1,1],max:[6,6,3,3,1,5,1,1,1,1,1],maxActive:8},{name:["Faster Accretion","Intense weathering","More levels","Improved Satellites","Automatic Rank","Keep auto Structures","Automatization for Upgrades","Strange boost","New Structure","Mass shift","Massive Ranks"],effectText:[()=>`Accretion speed is ${g(1.5)} times faster.`,()=>`Accretion Structures that produce another Structures now do it ${g(1.5)} times faster.`,()=>`Some Rank researches receive extra Max level.
Final level will instead unlock a new upgrade.`,()=>`Satellites now improve all Accretion Structures${t.inflation.vacuum?" with reduced strength":""}.`,()=>`Automatically increase Rank when available.${t.strangeness[1][11]>=1?`
Second level - auto creation of Accretion structures after reaching cosmic dust hardcap will always keep enough for highest Solar mass conversion.`:""}`,()=>`Always have auto for ${i.buildingsInfo.name[3][Math.min(t.strangeness[3][5]+1,i.ASRInfo.max[3])]}.`,()=>`Will automatically create all upgrades and researches from any Stage.
(Need to be enabled in settings, order of automatization is Upgrades > Stage researches > Special researches)`,()=>`Unspent Strange quarks will boost this Stage. (${t.inflation.vacuum?"Effective Rank":"Cheaper Accretion"})`,()=>`Current Universe state allows for another Accretion Structure.
(Not recommended until way later)`,()=>`Reduce amount of time required to reach Solar mass harcap by shifting Cosmic dust and Solar mass hardcaps.
Effect is ${g(1.5)} times bigger per level (additive). (Can be reverted in Rank settings)`,()=>`Increase effective Rank by +${g(.8)} with each level.`],cost:[],startCost:[1,2,3,9,24,3,12,36,20,1800,24],scaling:[1.8,2.8,2,1,200,2.3,2,1,1,2,4],max:[8,4,3,1,1,4,3,1,1,4,2],maxActive:8},{name:["Hotter Stars","Cheaper Stars","New Upgrade","Main giants","Remnants of past","Automatic Collapse","Keep auto Structures","Daily gain","Strange boost","New Structure","Neutronium"],effectText:[()=>`All Stars produce ${g(1.5)} times more Elements.`,()=>"Stars are 2 times cheaper.",()=>`Unlock a new Upgrade.
First one is extra good.`,()=>"10% of Brown dwarfs will turn into Red giants now.",()=>`Elements will not require Collapse for activation.
${t.stage.true>=6||t.events[2]?"Second level will unlock auto creation of Elements.":"(Auto creation of Elements is not yet possible in Interstellar space)"}`,()=>`Automatically Collapse once reached enough boost.${t.strangeness[1][11]>=1?`
Second level - Star remnants from auto Collapse will be gained automatically without resets. (Also improved to check boost only from Solar mass)`:""}`,()=>`Always have auto for ${i.buildingsInfo.name[4][Math.min(t.strangeness[4][6]+1,i.ASRInfo.max[4])]}.`,()=>`Increase multiplier of ${i.strangeInfo.name[t.strangeness[5][10]]} gained from export per day by +1.${t.strangeness[5][10]>=1?"":" (Can claim only full one's)"}
(Export base is increased by +10% of best Stage reset value even without this Strangeness)`,()=>"Unspent Strange quarks will boost this Stage. (All Stars production)",()=>"Current Universe state allows for another Interstellar Structure.",()=>"Improve Neutron Stars strength and improve scaling of '[12] Magnesium' effect."],cost:[],startCost:[1,3,5,5,6,24,3,4,36,20,1800],scaling:[1.8,2.8,2.4,4,16,400,2.3,2,1,1,1.4],max:[8,4,3,2,1,1,4,3,1,1,8],maxActive:9},{name:["Omnipresent reality","Strange gain","Auto Stage","Bigger Nebulas","Denser Clusters","Gravitational bound","Hypercompact stellar system","Auto Structures","New Milestones","Strange boost","Strange growth"],effectText:[()=>t.inflation.vacuum?`Unlock the Void. (Advanced subtab)
Also a new color theme.`:`${i.stageInfo.word[t.strangeness[5][0]+1]} will now be permanent. Permanent Stages do not affect timer.`,()=>`Gain ${g(1.5)} times more ${i.strangeInfo.name[t.strangeness[5][10]]} from ${t.inflation.vacuum?"":"Interstellar"} Stage resets.`,()=>"Allows to auto reset Stage, has some special settings.",()=>"Bigger Nebulas, more matter for Accretion. 'Jeans instability' upgrade is 2 times stronger.",()=>"'Super star cluster' is now even bigger. Effect increased by 3.",()=>t.inflation.vacuum?"Unlock Intergalactic Stage.":"Intergalactic is no longer affected by Collapse reset.",()=>`With this a new Structure can be created.${t.stage.true>=6?"":" (Also will increase max level of 'Remnants of past' after creating that Structure)"}
Second level unlocks auto for it and improves auto Collapse.`,()=>"Increase permanent level of auto Structures. It's the only way to do it.",()=>`Unlock ${t.inflation.vacuum?"Void":"Intergalactic"} Milestones.`,()=>`Unspent Strange quarks will boost this Stage. (${t.inflation.vacuum?"Cosmic dust hardcap delay":"Solar mass gain"})`,()=>`Unlock a new Strange structure and replace Stage reset reward, it will produce ${i.strangeInfo.name[t.strangeness[5][10]]}, but hardcaps easily.
(Hardcap delayed by quantity of a higher tier Structure)

Not implemented in current game version.`],cost:[],startCost:[4,16,2e3,8,10,64,1500,60,1500,180,800],scaling:[1,5,1,1.8,1.8,1,5,2,1,1,1],max:[3,1,1,9,9,1,2,2,1,1,1],maxActive:10}],lastUpgrade:[-1,-1,-1,-1,-1,-1],lastResearch:[[-1,"researches"],[-1,"researches"],[-1,"researches"],[-1,"researches"],[-1,"researches"],[-1,"researches"]],lastElement:-1,milestonesInfo:[{},{name:["Fundamental Matter","Energized"],needText:[()=>`Have at least ${f(i.milestonesInfo[1].need[0]).format()} ${t.inflation.vacuum?"Preons":"Quarks"} at once.`,()=>`Have current Energy reach ${f(i.milestonesInfo[1].need[1]).format()}.`],rewardText:[()=>t.inflation.vacuum?`All Microworld Structures receive ${g(i.milestonesInfo[1].reward[0])}x boost.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`,()=>t.inflation.vacuum?`Energy from creating Stuctures increased by ${g(i.milestonesInfo[1].reward[1])}%. (Rounds down)`:`Improve effect of '[24] Chromium' by +${g(.01)}.`],need:[[1,200],[4,4]],reward:[1,1],scalingOld:[[1e160,1e170,1e180,1e190,1e200,1e220],[24e3,26e3,28e3,3e4,32e3,34e3]]},{name:["A Nebula of Drops","Just a bigger Puddle"],needText:[()=>`Vaporize ${t.inflation.vacuum?"to at least":""} ${f(i.milestonesInfo[2].need[0]).format()} ${t.inflation.vacuum?"Clouds":"Drops at once"}.`,()=>`Have at least ${f(i.milestonesInfo[2].need[1]).format()} Puddles at same time.`],rewardText:[()=>t.inflation.vacuum?`Clouds gain increased by ${g(i.milestonesInfo[2].reward[0])}.`:"A new Intergalactic Structure.",()=>t.inflation.vacuum?`Puddles are now stronger by ${g(i.milestonesInfo[2].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[1,30],[1.5,3]],reward:[1,1],scalingOld:[[1e30,1e33,1e36,1e39,1e42,1e45],[1e3,2500,4e3,5500,7e3,9e3]]},{name:["Cluster of Mass","Satellites of Satellites"],needText:[()=>`Have at least ${f(i.milestonesInfo[3].need[0]).format()} Mass at once.`,()=>`Have more than ${f(i.milestonesInfo[3].need[1]).format()} Satellites ${t.inflation.vacuum?"and Subsatellites":""}.`],rewardText:[()=>t.inflation.vacuum?`Accretion speed increased by ${g(i.milestonesInfo[3].reward[0])}.`:"A new Intergalactic Structure.",()=>t.inflation.vacuum?`Improve effect of 'Planetary system' base by +${g(i.milestonesInfo[3].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[1,30],[2.5,1]],reward:[1,1],scalingOld:[[1e30,1e33,1e36,1e39,1e42,1e45,1e48],[25,35,45,55,65,75,85]]},{name:["Supermassive","Biggest of all"],needText:[()=>`Collapse ${t.inflation.vacuum?"":"to"} at least ${f(i.milestonesInfo[4].need[0]).format()} ${t.inflation.vacuum?"Elements":"Solar mass"}.`,()=>`Collapse to ${f(i.milestonesInfo[4].need[1]).format()} Black holes or more.`],rewardText:[()=>t.inflation.vacuum?`Stars produce ${g(i.milestonesInfo[4].reward[0])} times more Elements.`:"New Intergalactic themed Strangenesses.",()=>t.inflation.vacuum?`Preons hardcap delayed by ${g(i.milestonesInfo[4].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
Vacuum instability increased.`],need:[[8,3],[1,2]],reward:[1,1],scalingOld:[[8e3,1e4,12e3,14e3,16e3,18e3,2e4,22e3],[100,120,140,160,180,200,220,240]]},{name:["Light in the dark","End of Greatness"],needText:[()=>`Have self-made Stars count reach at least ${f(i.milestonesInfo[5].need[0]).format()}.`,()=>`Have ${f(i.milestonesInfo[5].need[1]).format()} Galaxies or more.`],rewardText:[()=>t.inflation.vacuum?`Increase ${i.strangeInfo.name[t.strangeness[5][10]]} income from Stage reset by ${g(i.milestonesInfo[5].reward[0])}.`:"Intergalactic is always unlocked with Interstellar.",()=>t.inflation.vacuum?`Boost per Galaxy is now +${g(i.milestonesInfo[5].reward[1])} bigger.`:`Unknown Structure, it cannot exist in false Vacuum.
Vacuum instability increased.`],need:[[1.5,3],[2,0]],reward:[5,25],scalingOld:[[1500,1600,1700,1800,1900,2e3],[2,4,8,12,16,20]]}],challengesInfo:{name:["Void"],description:["Result of Vacuum Instabillity, investigate at your own will"],effectText:[()=>{let e=t.challenges.void;if(e[1]===0)return'<span class="orangeText">- Unknown, but maybe with more Energy</span>';let r=`<span class="orangeText">- Energy gain is decreased by 20%
- Discharge base reduced</span>`;return e[1]>=3&&(r+=`

<span class="blueText">- ${e[2]>0?`Effective Drops production count softcap no longer delayed by self-made amount and is stronger (^${g(.2)} > ^${g(.1)})
- Puddles are 100 times weaker
- 'Water spread' upgrade is weaker`:"Unknown, but maybe if deeper"}</span>`),e[1]>=2&&(r+=`

<span class="grayText">- ${e[3]>0?`'Jovian planet' Rank softcap starts immediately (^${g(.92)})
- Softcap is stronger after reaching that Rank (^${g(.84)})
- Increasing Rank doesn't increase effective Rank`:"Unknown, but maybe if more Mass"}</span>`),e[3]>=5&&(r+=`

<span class="darkorchidText">- ${e[4]>0?`Solar mass effect is 10 times weaker and scales slower
- 'Star system' is weaker
- Intergalactic Stage unlocked later`:"Unknown, but maybe if long enough"}</span>`),r}],needText:[[[],["Perform Discharge","Get first level of 'Accretion'","Get second level of 'Accretion'"],["Have more than 1 Cloud","Have more than 1e4 Clouds"],["Reach 'Meteoroid' Rank","Reach 'Asteroid' Rank","Reach 'Planet' Rank","Reach 'Jovian planet' Rank","Reach 'Protostar' Rank"],["Cause the Collapse","Get first Red giant","Get first Neutron star","Get first Black hole"],[]]],rewardText:[[[],["'Fundamental boost' (Microworld)","'Conservation of Mass' (Microworld)","'Massive Ranks' (Accretion)"],["'Ocean world' (Submerged)","'Isolation' (Submerged)"],["Multiple max level increases","Multiple max level increases","Multiple max level increases","Multiple max level increases","'Strange growth' (Intergalactic)"],["'New Milestones' (Intergalactic)","'Conservation of Energy' (Microworld)","'Neutronium' (Interstellar)","'Mass shift' (Accretion)"],[]]],color:["darkviolet"]},historyStorage:{stage:[]}},Je=(e,r)=>Math.log(e)/Math.log(r),M=e=>e.slice(0),G=e=>{if(typeof e!="object"||e===null)return e;let r;if(Array.isArray(e)){r=[];for(let n=0;n<e.length;n++)r.push(G(e[n]))}else{r={};for(let n in e)r[n]=G(e[n])}return r},$=(e,r)=>{let n=[];for(let s=0;s<e;s++)r==="toggle"?n.push(!0):r==="toggleAuto"?n.push(!1):r==="toggleConfirm"?n.push("All"):r==="upgrade"&&n.push(0);return n};for(let e=0;e<i.buildingsInfo.startCost.length;e++){i.buildingsInfo.firstCost[e]=M(i.buildingsInfo.startCost[e]),i.buildingsInfo.producing[e]=[];for(let r=0;r<i.buildingsInfo.startCost[e].length;r++)i.buildingsInfo.producing[e].push([0,0])}for(let e of["researches","researchesExtra","strangeness"]){let r=i[`${e}Info`];for(let n=1;n<r.length;n++)r[n].cost=M(r[n].startCost)}for(let e of["upgrades","researches","researchesExtra"]){let r=i[`${e}Info`];for(let n=1;n<r.length;n++)for(let s=0;s<r[n].name.length;s++)r[n].effect[s]=null}for(let e=0;e<i.elementsInfo.name.length;e++)i.elementsInfo.effect[e]=null;Object.assign(t,{upgrades:[[],$(i.upgradesInfo[1].startCost.length,"upgrade"),$(i.upgradesInfo[2].startCost.length,"upgrade"),$(i.upgradesInfo[3].startCost.length,"upgrade"),$(i.upgradesInfo[4].startCost.length,"upgrade"),$(i.upgradesInfo[5].startCost.length,"upgrade")],researches:[[],$(i.researchesInfo[1].startCost.length,"upgrade"),$(i.researchesInfo[2].startCost.length,"upgrade"),$(i.researchesInfo[3].startCost.length,"upgrade"),$(i.researchesInfo[4].startCost.length,"upgrade"),$(i.researchesInfo[5].startCost.length,"upgrade")],researchesExtra:[[],$(i.researchesExtraInfo[1].startCost.length,"upgrade"),$(i.researchesExtraInfo[2].startCost.length,"upgrade"),$(i.researchesExtraInfo[3].startCost.length,"upgrade"),$(i.researchesExtraInfo[4].startCost.length,"upgrade"),$(i.researchesExtraInfo[5].startCost.length,"upgrade")],ASR:$(i.ASRInfo.costRange.length,"upgrade"),elements:$(i.elementsInfo.startCost.length,"upgrade"),strangeness:[[],$(i.strangenessInfo[1].startCost.length,"upgrade"),$(i.strangenessInfo[2].startCost.length,"upgrade"),$(i.strangenessInfo[3].startCost.length,"upgrade"),$(i.strangenessInfo[4].startCost.length,"upgrade"),$(i.strangenessInfo[5].startCost.length,"upgrade")],milestones:[[],$(i.milestonesInfo[1].need.length,"upgrade"),$(i.milestonesInfo[2].need.length,"upgrade"),$(i.milestonesInfo[3].need.length,"upgrade"),$(i.milestonesInfo[4].need.length,"upgrade"),$(i.milestonesInfo[5].need.length,"upgrade")]});Object.assign(t.toggles,{normal:$(document.getElementsByClassName("toggle").length,"toggle"),confirm:$(document.getElementsByClassName("toggleConfirm").length,"toggleConfirm"),buildings:[[],$(t.buildings[1].length,"toggleAuto"),$(t.buildings[2].length,"toggleAuto"),$(t.buildings[3].length,"toggleAuto"),$(t.buildings[4].length,"toggleAuto"),$(t.buildings[5].length,"toggleAuto")],auto:$(document.getElementsByClassName("toggleAuto").length,"toggleAuto")});t.toggles.normal[0]=!1;var b=G(t),tt=e=>{var o;Object.hasOwn(e,"player")&&(e=e.player),Me(Boolean((o=e.inflation)==null?void 0:o.vacuum));for(let l in b)if(!Object.hasOwn(e,l)){if(l==="discharge")throw new ReferenceError("This save file is missing important information and is most likely not from this game");l!=="version"?e[l]=G(b[l]):e.version="0.0.0"}let r=e.version;if(r!==b.version){if(e.version==="0.0.0"&&(e.version="v0.0.1",Object.hasOwn(e,"energy")&&(e.discharge.energy=e.energy.current),e.researchesExtra=[]),e.version==="v0.0.1"&&(e.version="v0.0.2",e.stage.resets=e.stage.current-1),e.version==="v0.0.2"&&(e.version="v0.0.3",e.toggles=G(b.toggles)),e.version==="v0.0.3"&&(e.version="v0.0.4",delete e.energy,delete e.buyToggle),(e.version==="v0.0.4"||e.version==="v0.0.5")&&(e.version="v0.0.6",e.events=[!1]),e.version==="v0.0.6"&&(e.version="v0.0.7",e.vaporization.input=3,e.stage.input=20),e.version==="v0.0.7"&&(e.version="v0.0.8",e.stage.export=86400),e.version==="v0.0.8"){e.version="v0.0.9",e.stage.active=Math.min(e.stage.current,4);let l=e.stage.active,c=e.buildings;e.buildings=G(b.buildings),e.buildings[l]=c;let u=e.upgrades;e.upgrades=G(b.upgrades),e.upgrades[l]=u;let m=e.researches;e.researches=G(b.researches),e.researches[l]=m;let h=e.researchesExtra;e.researchesExtra=G(b.researchesExtra),e.researchesExtra[l]=h,e.strangeness.length<5&&e.strangeness.unshift([])}if(e.version==="v0.0.9"&&(e.version="v0.1.0",e.upgrades[3].length<13&&e.upgrades[3].splice(8,0,0)),e.version==="v0.1.0"&&(e.version="v0.1.1",Object.hasOwn(e.discharge,"energyCur")&&(e.discharge.energy=e.discharge.energyCur),delete e.discharge.energyCur,e.collapse.massMax=e.collapse.mass),e.version==="v0.1.1"){e.version="v0.1.2";for(let l=1;l<e.buildings.length;l++){let c=e.buildings[l];for(let u=0;u<c.length;u++)c[u].current=f(c[u].current).toArray(),c[u].total=f(c[u].total).toArray(),c[u].trueTotal=f(c[u].total).toArray(),c[u].highest=[0,0]}e.vaporization.clouds=f(e.vaporization.clouds).toArray(),Object.hasOwn(e.strange[0],"true")&&(e.strange[0].current=e.strange[0].true),e.upgrades[1].length<10&&e.upgrades[1].unshift(0,0),delete e.vaporization.current,delete e.strange[0].true,e.time.offline=0}if(e.version==="v0.1.2"&&(e.version="v0.1.3",e.stage.best=0,e.stage.time=0,e.inflation.age=0,e.accretion.input=0,e.discharge.energyMax=e.discharge.energy,e.vaporization.cloudsMax=M(e.vaporization.clouds)),e.version==="v0.1.3"&&(e.version="v0.1.4",delete e.collapse.disabled,delete e.collapse.inputM,delete e.collapse.inputS),e.version==="v0.1.4"&&(e.version="v0.1.5",delete e.toggles.shop.strict),e.version==="v0.1.5"){e.version="v0.1.6",e.collapse.show=0,e.collapse.input=2,e.toggles.shop.wait=[2],e.toggles.normal=M(b.toggles.normal),e.toggles.confirm=M(b.toggles.confirm);for(let l=1;l<e.toggles.buildings.length;l++){let c=b.toggles.buildings[l].length;e.toggles.buildings[l].length>c&&(e.toggles.buildings[l].length=c)}e.history.stage.best[2]=0;for(let l=0;l<e.history.stage.list.length;l++)e.history.stage.list[l][2]=0;delete e.time.disabled,delete e.researchesAuto,delete e.discharge.unlock,e.vaporization.clouds=f(e.vaporization.clouds).minus("1").toArray(),e.inflation.vacuum&&(e.strangeness[3][9]>0&&(e.strange[0].current+=(4**e.strangeness[3][9]-1)*8,e.strangeness[3][9]=0),e.strangeness[5][2]>0&&(e.strange[0].current+=50,e.strangeness[5][2]=0)),e.accretion.input=0}if(e.version!==b.version)throw new ReferenceError("Save file version is higher than game version")}e.saveUpdate016||(e.intervals=G(b.intervals),e.strangeness[2].splice(6,1),e.strangeness[4].splice(8,1),e.saveUpdate016=!0);for(let l=1;l<b.buildings.length;l++)if(isNaN(e.toggles.shop.wait[l])&&(e.toggles.shop.wait[l]=2),!Array.isArray(e.buildings[l]))e.buildings[l]=G(b.buildings[l]);else for(let c=e.buildings[l].length;c<b.buildings[l].length;c++)e.buildings[l][c]=G(b.buildings[l][c]);for(let l=e.strange.length;l<b.strange.length;l++)e.strange[l]=G(b.strange[l]);for(let l=1;l<b.upgrades.length;l++)if(!Array.isArray(e.upgrades[l]))e.upgrades[l]=M(b.upgrades[l]);else for(let c=e.upgrades[l].length;c<b.upgrades[l].length;c++)e.upgrades[l][c]=0;for(let l=1;l<b.researches.length;l++)if(!Array.isArray(e.researches[l]))e.researches[l]=M(b.researches[l]);else for(let c=e.researches[l].length;c<b.researches[l].length;c++)e.researches[l][c]=0;for(let l=1;l<b.researchesExtra.length;l++)if(!Array.isArray(e.researchesExtra[l]))e.researchesExtra[l]=M(b.researchesExtra[l]);else for(let c=e.researchesExtra[l].length;c<b.researchesExtra[l].length;c++)e.researchesExtra[l][c]=0;for(let l=e.ASR.length;l<b.ASR.length;l++)e.ASR[l]=0;for(let l=e.elements.length;l<b.elements.length;l++)e.elements[l]=0;for(let l=0;l<b.strangeness.length;l++)if(!Array.isArray(e.strangeness[l]))e.strangeness[l]=M(b.strangeness[l]);else for(let c=e.strangeness[l].length;c<b.strangeness[l].length;c++)e.strangeness[l][c]=0;for(let l=0;l<b.milestones.length;l++)if(!Array.isArray(e.milestones[l]))e.milestones[l]=M(b.milestones[l]);else for(let c=e.milestones[l].length;c<b.milestones[l].length;c++)e.milestones[l][c]=0;for(let l=1;l<b.toggles.buildings.length;l++)if(!Array.isArray(e.toggles.buildings[l]))e.toggles.buildings[l]=M(b.toggles.buildings[l]);else for(let c=e.toggles.buildings[l].length;c<b.toggles.buildings[l].length;c++)e.toggles.buildings[l][c]=!1;for(let l=e.toggles.confirm.length;l<b.toggles.confirm.length;l++)e.toggles.confirm[l]=b.toggles.confirm[l];for(let l=e.toggles.normal.length;l<b.toggles.normal.length;l++)e.toggles.normal[l]=b.toggles.normal[l];for(let l=e.toggles.auto.length;l<b.toggles.auto.length;l++)e.toggles.auto[l]=!1;e.intervals.main<20&&(e.intervals.main=20);for(let l=e.events.length;l<b.events.length;l++)e.events[l]=!1;Object.assign(t,e),i.debug.errorID=!0,i.debug.errorQuery=!0,i.debug.errorGain=!0,i.researchesInfo[2].effect[0]=0,i.researchesInfo[2].effect[1]=0,i.accretionInfo.rankCost[4]=t.stage.true>3||t.stage.true===3&&t.events[0]?5e29:0;let n=t.buildings[4];i.collapseInfo.trueStars=n[1].true+n[2].true+n[3].true+n[4].true+n[5].true,i.historyStorage.stage=t.history.stage.list,t.inflation.vacuum?(t.buildings[2][0].current=f(t.buildings[1][5].current).divide("6.02214076e23").toArray(),t.buildings[3][0].current=f(t.buildings[1][0].current).multiply("1.78266192e-33").toArray()):t.accretion.rank===0&&(t.buildings[3][0].current=[5.97,27]);for(let l=1;l<b.milestones.length;l++)for(let c=0;c<b.milestones[l].length;c++)ke(c,l);for(let l=1;l<b.strangeness.length;l++){let c=t.strangeness[l],u=i.strangenessInfo[l].max;for(let m=0;m<i.strangenessInfo[l].maxActive;m++)w(m,l,"strangeness"),c[m]>u[m]&&(c[m]=u[m],_(m,l,"strangeness"))}for(let l=1;l<=5;l++){w(0,l,"ASR");let c=t.researchesExtra[l],u=i.researchesExtraInfo[l].max;for(let y=0;y<i.researchesExtraInfo[l].maxActive;y++)w(y,l,"researchesExtra"),c[y]>u[y]&&(c[y]=u[y]);let m=t.researches[l],h=i.researchesInfo[l].max;for(let y=0;y<i.researchesInfo[l].maxActive;y++)w(y,l,"researches"),m[y]>h[y]&&(m[y]=h[y])}ee(),ce(),he(),t.inflation.vacuum||lt();let s=localStorage.getItem("theme");Ne(s===null?null:Number(s)),a("saveFileNameInput").value=t.fileName,a("mainInterval").value=`${t.intervals.main}`,a("numbersInterval").value=`${t.intervals.numbers}`,a("visualInterval").value=`${t.intervals.visual/1e3}`,a("autoSaveInterval").value=`${t.intervals.autoSave/1e3}`,a("thousandSeparator").value=t.separator[0],a("decimalPoint").value=t.separator[1],a("stageInput").value=g(t.stage.input,{type:"input"}),a("vaporizationInput").value=g(t.vaporization.input,{type:"input"}),a("rankShiftInput").value=g(t.accretion.input,{type:"input"}),a("collapseStarsInput").value=g(t.collapse.input,{type:"input"}),a("stageResetsSave").value=`${t.history.stage.input[0]}`,a("stageResetsKeep").value=`${t.history.stage.input[1]}`;for(let l=0;l<b.toggles.normal.length;l++)D(l,"normal");for(let l=0;l<b.toggles.confirm.length;l++)We(l);for(let l=0;l<b.toggles.auto.length;l++)D(l,"auto");return ye(),r},kt=()=>{if(a("versionText",!1)!==null)return;let e=s=>{let o="";switch(s){case"v0.0.1":o=`- Stage 2 full rework
- Introduced automatic changelog
- Auto Structures do not wait for 2x cost if making the 1st one

`,o+=`- Mobile device support

`,o+=`- 'Tritium' now shows how much Molecules being produced per second
- Upgrades auto update description`;break;case"v0.0.2":o=`- Added stats subtab
- Added Stage resets into save file`;break;case"v0.0.3":o=`- Added new content (Stage 3)
- Stage 2 extended
- Max offline time base and from research is now 2 times longer
- Offline time calculated better
- Toggles have been reset
- Researches auto update description
- Some new stats`;break;case"v0.0.4":o=`- Buffed all Stages
- Added events for early Stages
- Update to stats visuals
- Intervals have been reset

`,o+=`- Numbers are now formated

`,o+="- New stat for Stage 3";break;case"v0.0.5":o=`- New content (Stage 4)
- Basic loading screen
- Full visual update
- New formula for multi making Structures
- Visual indication for how many Structures can be made

`,o+=`- Created Elements will show effects after Collapse
- Improved transition when changing themes
- Fixed being able to create automatization research when can't afford them

`,o+=`- Added hotkeys
- Stage event reset`;break;case"v0.0.6":o=`- List of hotkeys can be seen now

`,o+=`- Option to remove text movement
- Ability to rename save file`;break;case"v0.0.7":o=`- New content (Stage 5)
- Stage 1 rework
- Self-made Structures stat moved into Stage tab
- Hotkeys for Resets
- Pressing keyboard (unless tab) no longer highlights buttons
- Removed old number format (it was painfully slow) in favor of self-made one

`,o+=`- Numpad can now be used as digits for hotkeys

`,o+="- Save file name can now display in game stats";break;case"v0.0.8":o="- Minor speed up to almost all Stages (not first one)";break;case"v0.0.9":o=`- New content (Milestones)
- Stage 4 speed up
- Fixed export reward not being saved into exported file
- Auto Structures toggles have been reset

`,o+=`- Fixed F1 - F12 buttons working as digits
- Milestones are now unlocked instanly (with Stage 5)
- New event that must be triggered to progress (entering Intergalactic space)

`,o+=`- Max offline base and research is increased by 2 times, related Strangeness cost and max level have been balanced

`,o+="- Some quick balance changes for Stage 3 and 5";break;case"v0.1.0":o=`- New content and balance for end of Stage 5
- New stats for Stage 5`;break;case"v0.1.1":o=`- More balance for Stage 5
- New stats for Stage 2 and 4, max energy no longer resets
- New hotkeys to change Active Stage`;break;case"v0.1.2":o=`- New content (Vacuum)
- Some descriptions have been expanded
- Added self-made break infinity
- Offline time been reworked
- Added version window (removed automatic change log)
- Removed option to remove text movement (always on now)

`,o+=`- New color theme
- Offline warp now unlocked instantly
- New stats for Stage 4

`,o+="- Auto Structures now correctly spend currency";break;case"v0.1.3":o=`- Puddles production base increased from 3 to 4, Clouds gain decreased by -1 (formula fix)
- New stats for Stage 3, 4 and 5
- More Stage 6 balance (Strangeness, reduced max level and adjusted cost; Submerged proper balance; Strange boost new effects)
- Replay event button

`,o+=`- History for Stage resets
- New hotkeys (A - toggle all Structures, O - toggle Offline)

`,o+=`- Added requirement to unlock better control over Warp (also Warp now has a minimum value)
- Automatically made Structures/Upgrades no longer visually update numbers`;break;case"v0.1.4":o=`- Warps now waste offline (half of normal); Max offline from upgrades decreased, cost adjusted
- Custom scrolls
- Notifications
- Fixed and updated Mobile device and Screen reader supports
- Auto Collapse settings reset`;break;case"v0.1.5":o=`- Stage 6 minor balance changes
- Images should no longer unload on Stage change
- Elements subtab can now be entered from any Stage or turned into a tab
- Footer now affects page height
- Many small changes to improve quality of life
- 'Any' make toggle is now always Strict, related button removed
- More information for save files
- New hotkeys
- Screen reader support rework (also removed special tab)`;break;case"v0.1.6":o=`- Massive rebalance and reworks for all Stages
- Auto Collapse reworked (also its settings reset)
- Small changes to auto Vaporization
- New input for Auto Structures wait value
- New stats for Stage 1, 2 and 3
- New notifications
- Removed almost all Automatization researches
- Export reward now unlocked for free
- Created Elements will show effects after Stage reset
- Auto Galaxy is now better
- Descriptions no longer reset when changing active Stage
- More quality of life improvements
- More work on Mobile device and Screen reader supports
- Some toggles were reset`;break;case"v0.1.7":o=`- New content (Void)
- Further balance and quality of life changes
- Removed 'Max gain' and 'Longer offline' strangeness
- Max offline storage is based on Stage resets now
- Offline storage will no longer decrease when switching vacuum state
- Export base is now improved by best Stage reset
- '[27] Cobalt' effect is now based on total Elements
- Updated logic for entering and leaving Elements subtab
- Warp minimum value is now 10 minutes and calculated better
- Discharge is no longer allowed if no reason in doing it
- Fixed import not working on some Mobile devices
- Intervals have been reset
- Small art and themes updates
- Updated numbers to move less`}a("versionText").textContent=o,a("currentVesion").textContent=s},r=17,n="";for(let s=1;s<=r;s++){let o=`${s}`.padStart(2,"0"),l=`v0.${o[0]}.${o[1]}`;n+=`<button type="button" id="${l}">${l}</button>`}a("versionInfo").innerHTML=`<div style="display: flex; flex-direction: column; justify-content: space-between; align-items: center; width: clamp(42vw, 36em, 80vw); height: clamp(26vh, 36em, 90vh); background-color: var(--window-color); border: 3px solid var(--window-border); border-radius: 12px; padding: 1em 1em 0.8em; row-gap: 1em;">
        <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 0.06em;">${n}</div>
        <div style="width: 100%; overflow-y: auto;">
            <label id="currentVesion" class="bigWord"></label>
            <p id="versionText" class="whiteText" style="white-space: pre-line; line-height: 1.3em; margin-top: 0.4em;"></p>
        </div>
        <button type="button" id="closeVersionInfo" style="width: 6em; border-radius: 4px; font-size: 0.92em;">Close</button>
    </div>`,document.head.appendChild(document.createElement("style")).textContent="#versionInfo > div > div:first-of-type > button { width: 3.8em; height: 2em; font-size: 0.88em; }",a("closeVersionInfo").addEventListener("click",()=>{a("versionInfo").style.display="none"});for(let s=1;s<=r;s++){let o=`${s}`.padStart(2,"0"),l=`v0.${o[0]}.${o[1]}`;a(l).addEventListener("click",()=>e(l))}e(b.version)};var Rt=e=>{if(e.code==="Tab"){document.body.classList.add("outlineOnFocus");return}else{let o=document.activeElement.type;if(o==="text"||o==="number")return;document.body.classList.remove("outlineOnFocus")}if(e.ctrlKey||e.altKey)return;let{key:r,code:n}=e,s=Number(n.slice(-1));if(isNaN(s)){if(r.length===1){let o=(t.toggles.normal[1]?n.replace("Key",""):r).toLowerCase();e.shiftKey?o==="a"&&D(0,"buildings",!0):o==="o"?D(0,"normal",!0):o==="w"?(e.preventDefault(),ft()):o==="s"?Ve():o==="d"?i.stageInfo.activeAll.includes(1)&&Qe():o==="v"?i.stageInfo.activeAll.includes(2)&&_e():o==="r"?i.stageInfo.activeAll.includes(3)&&Ke():o==="c"&&i.stageInfo.activeAll.includes(4)&&je()}else if(r==="ArrowLeft"||r==="ArrowRight"){if(e.repeat)return;if(e.shiftKey){let o=i.stageInfo.activeAll;if(o.length===1)return;let l=o.indexOf(t.stage.active);r==="ArrowLeft"?(l<=0?l=o.length-1:l--,ie(o[l])):(l>=o.length-1?l=0:l++,ie(o[l]))}else{let o=i.tabList.tabs,l=o.indexOf(i.tab);if(r==="ArrowLeft"){do l<=0?l=o.length-1:l--;while(!oe(o[l]));q(o[l])}else{do l>=o.length-1?l=0:l++;while(!oe(o[l]));q(o[l])}}}else if(r==="ArrowDown"||r==="ArrowUp"){if(e.shiftKey||e.repeat||!Object.hasOwn(i.subtab,`${i.tab}Current`))return;let o=i.tabList[`${i.tab}Subtabs`],l=o.indexOf(i.subtab[`${i.tab}Current`]);if(r==="ArrowDown"){do l<=0?l=o.length-1:l--;while(!oe(i.tab,o[l]));q(i.tab,o[l])}else{do l>=o.length-1?l=0:l++;while(!oe(i.tab,o[l]));q(i.tab,o[l])}}}else{let o=e.shiftKey;if(isNaN(Number(r))){if(n===""||n[0]==="F")return;o||(o=!0,e.preventDefault())}if(o){if(e.repeat)return;D(s,"buildings",!0)}else we(s)}};var a=(e,r=!0)=>{if(!r)return document.getElementById(e);let n=C.cache.idMap.get(e);if(n===void 0){let s=document.getElementById(e);if(s===null)throw i.debug.errorID&&(i.debug.errorID=!1,N(`Error encountered, ID - '${e}' doesn't exist`),setTimeout(()=>{i.debug.errorID=!0},6e4)),new ReferenceError(`ID - '${e}' doesn't exist`);return C.cache.idMap.set(e,s),s}return n},ue=e=>{let r=C.cache.classMap.get(e);if(r===void 0){let n=document.getElementsByClassName(e);return C.cache.classMap.set(e,n),n}return r},B=e=>{let r=C.cache.queryMap.get(e);if(r===void 0){let n=document.querySelector(e);if(n===null)throw i.debug.errorQuery&&(i.debug.errorQuery=!1,N(`Error encountered, Query - '${e}' failed to find anything`),setTimeout(()=>{i.debug.errorQuery=!0},6e4)),new ReferenceError(`Query - '${e}' failed`);return C.cache.queryMap.set(e,n),n}return r},mt=()=>{let{time:e}=t,r=Date.now(),n=(r-e.updated)/1e3;e.updated=r;let s=Be();return e.offline<s&&(e.offline=Math.min(e.offline+n,s)),t.stage.export=Math.min(t.stage.export+n,Ue()),n},te=(e=!1)=>{let{intervalsId:r}=i,{intervals:n}=t;clearInterval(r.main),clearInterval(r.numbers),clearInterval(r.visual),clearInterval(r.autoSave),r.main=e?void 0:setInterval(De,n.main),r.numbers=e?void 0:setInterval(K,n.numbers),r.visual=e?void 0:setInterval(ae,n.visual),r.autoSave=e?void 0:setInterval(Ae,n.autoSave,"save")};try{$t();let e=localStorage.getItem("testing_save");if(e!==null){let s=JSON.parse(atob(e)),o=tt(s);R(`Welcome back, you were away for ${g(mt(),{type:"time"})}
${o!==t.version?`Game have been updated from ${o} to ${t.version}`:`Current version is ${t.version}`}`)}else Me(!1),tt(G(b)),R(`Welcome to 'Fundamental' ${t.version}, a test-project created by awWhy
(This idle game is not meant to be fast)`);if(!t.toggles.normal[2]){let s=a("researchSubtabElements",!1);s.id="ElementsTab",a("researchTab").after(s);let o=a("researchSubtabBtnElements",!1);o.id="ElementsTabBtn",o.classList.add("stage4Include"),a("researchTabBtn").after(o);let l=i.tabList;l.researchSubtabs.splice(l.researchSubtabs.indexOf("Elements"),1),l.tabs.splice(l.tabs.indexOf("research")+1,0,"Elements")}Ze(),et(),ct();let r=i.screenReader[0],n=i.mobileDevice?"touchstart":"mouseover";document.addEventListener("keydown",s=>Rt(s));for(let s=0;s<b.toggles.normal.length;s++)a(`toggle${s}`).addEventListener("click",()=>D(s,"normal",!0));for(let s=0;s<b.toggles.confirm.length;s++)a(`toggleConfirm${s}`).addEventListener("click",()=>We(s,!0));for(let s=0;s<C.longestBuilding;s++)a(`toggleBuilding${s}`).addEventListener("click",()=>D(s,"buildings",!0));for(let s=0;s<b.toggles.auto.length;s++)a(`toggleAuto${s}`).addEventListener("click",()=>D(s,"auto",!0));for(let s=1;s<C.longestBuilding;s++)a(`building${s}Btn`).addEventListener("click",()=>we(s));for(let s=0;s<C.longestUpgrade;s++){let o=a(`upgrade${s+1}`);r&&o.addEventListener("focus",()=>F(s,"upgrades")),o.addEventListener(n,()=>F(s,"upgrades")),o.addEventListener("click",()=>Y(s,t.stage.active,"upgrades"))}a("stageReset").addEventListener("click",()=>{Ve()}),a("reset1Button").addEventListener("click",()=>{let{active:s}=t.stage;s===1?Qe():s===2?_e():s===3?Ke():s===4&&je()}),a("buy1x").addEventListener("click",()=>ye("1")),a("buyAny").addEventListener("click",()=>ye("any")),a("buyMax").addEventListener("click",()=>ye("max")),a("buyAnyInput").addEventListener("change",()=>ye("any")),a("autoWaitInput").addEventListener("change",()=>{let s=a("autoWaitInput"),o=Math.max(Number(s.value),1);isNaN(o)&&(o=2),t.toggles.shop.wait[t.stage.active]=o,s.value=g(o,{type:"input"})});for(let s=-1;s<i.challengesInfo.name.length;s++){let o=a(`challenge${s+1}`);r&&o.addEventListener("focus",()=>me(s)),o.addEventListener(n,()=>me(s)),o.addEventListener("click",s===-1?yt:()=>{Ct(s)})}for(let s=1;s<i.challengesInfo.rewardText[0].length;s++)s!==5&&a(`voidReward${i.stageInfo.word[s]}`).addEventListener("click",()=>St(s));for(let s=0;s<C.longestResearch;s++){let o=a(`research${s+1}Image`);r&&o.addEventListener("focus",()=>F(s,"researches")),o.addEventListener(n,()=>F(s,"researches")),o.addEventListener("click",()=>Y(s,t.stage.active,"researches"))}for(let s=0;s<C.longestResearchExtra;s++){let o=a(`researchExtra${s+1}Image`);r&&o.addEventListener("focus",()=>F(s,"researchesExtra")),o.addEventListener(n,()=>F(s,"researchesExtra")),o.addEventListener("click",()=>Y(s,t.stage.active,"researchesExtra"))}{let s=a("ASRImage");r&&s.addEventListener("focus",()=>F(0,"ASR")),s.addEventListener(n,()=>F(0,"ASR")),s.addEventListener("click",()=>Y(t.stage.active,t.stage.active,"ASR"))}a("element0").addEventListener("dblclick",()=>F(0,"elements"));for(let s=1;s<i.elementsInfo.startCost.length;s++){let o=a(`element${s}`);r&&o.addEventListener("focus",()=>F(s,"elements")),o.addEventListener(n,()=>F(s,"elements")),o.addEventListener("click",()=>Y(s,4,"elements"))}for(let s=1;s<i.strangenessInfo.length;s++)for(let o=0;o<i.strangenessInfo[s].startCost.length;o++){let l=a(`strange${o+1}Stage${s}Image`);r&&l.addEventListener("focus",()=>ge(o,s,"strangeness")),l.addEventListener(n,()=>ge(o,s,"strangeness")),l.addEventListener("click",()=>Y(o,s,"strangeness"))}for(let s=1;s<i.milestonesInfo.length;s++)for(let o=0;o<i.milestonesInfo[s].need.length;o++){let l=B(`#milestone${o+1}Stage${s}Div > img`);r&&l.addEventListener("focus",()=>ge(o,s,"milestones")),l.addEventListener(n,()=>ge(o,s,"milestones"))}a("vaporizationInput").addEventListener("change",()=>{let s=a("vaporizationInput");t.vaporization.input=Math.max(Number(s.value),0),s.value=g(t.vaporization.input,{type:"input"})}),a("rankShiftInput").addEventListener("change",()=>{let s=a("rankShiftInput");t.accretion.input=Number(s.value),s.value=g(t.accretion.input,{type:"input"}),he()}),a("collapseStarsInput").addEventListener("change",()=>{let s=a("collapseStarsInput");t.collapse.input=Math.max(Number(s.value),1),s.value=g(t.collapse.input,{type:"input"})}),a("stageInput").addEventListener("change",()=>{let s=a("stageInput");t.stage.input=Math.max(Number(s.value),0),s.value=g(t.stage.input,{type:"input"})}),a("versionButton").addEventListener("click",()=>{kt(),a("versionInfo").style.display=""}),a("save").addEventListener("click",()=>{Ae("save")}),a("file").addEventListener("change",()=>{Ae("import")}),a("export").addEventListener("click",()=>{Ae("export")}),a("delete").addEventListener("click",()=>{Ae("delete")}),a("switchTheme0").addEventListener("click",()=>Ne(null));for(let s=1;s<i.stageInfo.word.length;s++)a(`switchTheme${s}`).addEventListener("click",()=>Ne(s));a("toggleAuto8").addEventListener("click",()=>pe()),a("toggleAuto5").addEventListener("click",()=>de("all")),a("toggleAuto6").addEventListener("click",()=>J("researches","all")),a("toggleAuto7").addEventListener("click",()=>J("researchesExtra","all")),a("saveFileNameInput").addEventListener("change",()=>Ht());{let s=a("saveFileHoverButton");r&&s.addEventListener("focus",()=>a("saveFileNamePreview").textContent=gt()),s.addEventListener(n,()=>a("saveFileNamePreview").textContent=gt())}a("mainInterval").addEventListener("change",()=>{let s=a("mainInterval");t.intervals.main=Math.min(Math.max(Math.trunc(Number(s.value)),20),100),s.value=`${t.intervals.main}`,te()}),a("numbersInterval").addEventListener("change",()=>{let s=a("numbersInterval");t.intervals.numbers=Math.min(Math.max(Math.trunc(Number(s.value)),40),200),s.value=`${t.intervals.numbers}`,te()}),a("visualInterval").addEventListener("change",()=>{let s=a("visualInterval");t.intervals.visual=Math.min(Math.max(Math.trunc(Number(s.value)*1e3),200),4e3),s.value=`${t.intervals.visual/1e3}`,te()}),a("autoSaveInterval").addEventListener("change",()=>{let s=a("autoSaveInterval");t.intervals.autoSave=Math.min(Math.max(Math.trunc(Number(s.value)*1e3),4e3),18e5),s.value=`${t.intervals.autoSave/1e3}`,te()}),a("thousandSeparator").addEventListener("change",()=>ut(!1)),a("decimalPoint").addEventListener("change",()=>ut(!0)),a("MDMainToggle").addEventListener("click",()=>Ze(!0)),a("SRMainToggle").addEventListener("click",()=>et(!0)),a("pauseGame").addEventListener("click",()=>{Dt()}),a("reviewEvents").addEventListener("click",()=>{Tt()}),a("offlineWarp").addEventListener("click",()=>{ft()}),a("customFontSize").addEventListener("change",()=>ct(!0)),a("stageResetsSave").addEventListener("change",()=>{let s=a("stageResetsSave"),{input:o}=t.history.stage;o[0]=Math.min(Math.max(Math.trunc(Number(s.value)),0),20),s.value=`${o[0]}`,o[1]<o[0]&&(a("stageResetsKeep").value=s.value,o[1]=o[0])}),a("stageResetsKeep").addEventListener("change",()=>{let s=a("stageResetsKeep");t.history.stage.input[1]=Math.min(Math.max(Math.trunc(Number(s.value)),t.history.stage.input[0],3),100),s.value=`${t.history.stage.input[1]}`}),a("hideToggle").addEventListener("click",Ye);for(let s of i.tabList.tabs)if(a(`${s}TabBtn`).addEventListener("click",()=>q(s)),!!Object.hasOwn(i.tabList,`${s}Subtabs`))for(let o of i.tabList[`${s}Subtabs`])a(`${s}SubtabBtn${o}`).addEventListener("click",()=>q(s,o));for(let s=1;s<i.stageInfo.word.length;s++)a(`${i.stageInfo.word[s]}Switch`).addEventListener("click",()=>ie(s));a("currentSwitch").addEventListener("click",()=>a("stageSelect").classList.add("active")),O("reload"),a("body").style.display="",a("loading").style.display="none",N(`Game successfully loaded after ${Date.now()-b.time.started} ms`),te(),document.title=`Fundamental ${b.version}`}catch(e){let r=document.createElement("div");r.innerHTML='<button type="button" id="exportError" style="width: 7em;">Export save</button><button type="button" id="deleteError" style="width: 7em;">Delete save</button>',r.style.cssText="display: flex; column-gap: 0.6em; margin-top: 0.4em;",a("loading").append(r),a("exportError").addEventListener("click",()=>{let n=localStorage.getItem("testing_save");if(n===null)return void R("No save file detected");let s=document.createElement("a");s.href=`data:text/plain,${n}`,s.download="Fundamental post error export",s.click()}),a("deleteError").addEventListener("click",async()=>{!await V(`Press 'Confirm' to delete your save file
This will not be possible to undo, so export save file first`)||!await V("Last warning, press 'Confirm' to delete your save file")||(localStorage.removeItem("testing_save"),window.location.reload(),R("Game will auto refresh. If not then do it manually"))}),R(`Error detected during game loading:
${e}`)}async function Ae(e){switch(e){case"import":{let r=a("file");te(!0);try{let n=await r.files[0].text(),s=tt(JSON.parse(atob(n)));N(`This save is ${g(mt(),{type:"time"})} old. Save file version is ${s}`),a("isSaved").textContent="Imported",i.lastSave=0,O("reload")}catch(n){R(`Incorrect save file format
Full error is: '${n}'`)}finally{te(),r.value=""}return}case"save":{if(t.time.offline<0)return N(`Saving is disabled until ${new Date(Date.now()-t.time.offline*1e3).toLocaleString()}
Reason: possible time manipulation`);try{t.history.stage.list=i.historyStorage.stage.slice(0,t.history.stage.input[0]);let r=btoa(JSON.stringify(t));localStorage.setItem("testing_save",r),clearInterval(i.intervalsId.autoSave),i.intervalsId.autoSave=setInterval(Ae,t.intervals.autoSave,"save"),a("isSaved").textContent="Saved",i.lastSave=0}catch(r){R(`Failed to save file
Full error is: '${r}'`)}return}case"export":{if(t.time.offline<0)return;if(t.history.stage.list=i.historyStorage.stage.slice(0,t.history.stage.input[0]),t.strange[0].total>0&&t.stage.export>0){let s=t.strangeness[5][10],o=Le(),l;s>=1?(l=t.stage.export*o/86400/1e12**s,t.stage.export=0):(l=Math.floor(t.stage.export*o/86400),t.stage.export-=l*86400/o),t.strange[s].current+=l,t.strange[s].total+=l,s===0&&ee()}let r=btoa(JSON.stringify(t)),n=document.createElement("a");n.href=`data:text/plain,${r}`,n.download=gt(),n.click();return}case"delete":{let r=await Xe(`Type 'delete' to confirm delete your save file (there is no reward for doing it)
Or 'clear' to clear local storage (this will delete all data from domain, including other games)`);if(r===null||r==="")return;let n=r.toLowerCase();if(n!=="delete"&&n!=="clear")return N(`Deletion canceled, wrong input '${r}'`);te(!0),n==="delete"?localStorage.removeItem("testing_save"):localStorage.clear(),window.location.reload(),R("Game will auto refresh. If not then do it manually")}}}var Ht=()=>{let e=a("saveFileNameInput"),r=e.value.length===0?b.fileName:e.value.replaceAll(/[\\/:*?"<>|]/g,"_");try{btoa(r),t.fileName=r,e.value=r}catch(n){R(`Save file name is not allowed
Full error is: '${n}'`)}},gt=()=>{let e=t.fileName,r=["[stage]","[true]","[strange]","[matter]","[vacuum]","[date]","[time]"],n=[i.stageInfo.word[t.stage.active],i.stageInfo.word[t.stage.true],`${i.strangeInfo.gain(t.stage.active)}`,`${i.strangeInfo.name[t.strangeness[5][10]]}`,`${t.inflation.vacuum}`,Nt("dateDMY"),Nt("timeHMS")];for(let s=0;s<r.length;s++)e=e.replaceAll(r[s],n[s]);return`${e}.txt`},Nt=e=>{let r=new Date;switch(e){case"dateDMY":{let n=`${r.getDate()}`.padStart(2,"0"),s=`${r.getMonth()+1}`.padStart(2,"0");return`${n}.${s}.${r.getFullYear()}`}case"timeHMS":{let n=`${r.getMinutes()}`.padStart(2,"0"),s=`${r.getSeconds()}`.padStart(2,"0");return`${r.getHours()}-${n}-${s}`}}},ft=async()=>{let{time:e}=t,r=He()/1.5;if(e.offline<600*r)return void R(`Need at least ${g(10*r)} minutes of storaged Offline time to Warp`);let n=Math.min(t.strangeness[1][7]<2?await V(`Do you wish to Warp forward? Current effective Offline time is ${g(e.offline/r,{type:"time"})} (uses ${g(r)} seconds per added second), will be consumed up to half an hour`)?1800:0:Number(await Xe(`How many seconds do you wish to Warp forward? (Minimum value is 10 minutes)
Current effective Offline time is ${g(e.offline/r,{type:"time"})} (uses ${g(r)} seconds per added second)`,"600")),e.offline/r);if(n<600||!isFinite(n))return n===0?void 0:N("Warp failed, input or storage is below minimum value or invalid");e.offline-=n*r;try{De(n/1e3,n)}catch(s){N(`Warp failed due to Error:
${s}`)}},Dt=async()=>{te(!0),await R("Game is currently paused. Press 'confirm' to unpause it. Time spent here will be moved into offline storage"),N(`Game was paused for ${g(mt(),{type:"time"})}`),te(),K(),ae()};})();
//# sourceMappingURL=Code.js.map
