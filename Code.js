"use strict";(()=>{var ee={Limit:e=>{let{technical:s}=ee,r=s.convert(e);return{plus:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++)r=s.add(r,i[l]);return this},minus:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++)r=s.sub(r,i[l]);return this},multiply:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++)r=s.mult(r,i[l]);return this},divide:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++)r=s.div(r,i[l]);return this},power:function(n){return r=s.pow(r,n),this},log:function(n=2.718281828459045){return r=s.log(r,n),this},abs:function(){return r[0]=Math.abs(r[0]),this},trunc:function(){return r=s.trunc(r),this},floor:function(){return r=s.floor(r),this},ceil:function(){return r=s.ceil(r),this},round:function(){return r=s.round(r),this},isNaN:()=>isNaN(r[0])||isNaN(r[1]),isFinite:()=>isFinite(r[0])&&isFinite(r[1]),lessThan:n=>s.less(r,s.convert(n)),lessOrEqual:n=>s.lessOrEqual(r,s.convert(n)),moreThan:n=>s.more(r,s.convert(n)),moreOrEqual:n=>s.moreOrEqual(r,s.convert(n)),notEqual:n=>s.notEqual(r,s.convert(n)),equal:(...n)=>{let i=s.convertAll(n),l=s.equal(r,i[0]);for(let u=1;u<i.length;u++){if(!l)return!1;l=s.equal(i[u-1],i[u])}return l},max:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++){if(isNaN(i[l][0])){r=[NaN,NaN];break}s.less(r,i[l])&&(r=i[l])}return this},min:function(...n){let i=s.convertAll(n);for(let l=0;l<i.length;l++){if(isNaN(i[l][0])){r=[NaN,NaN];break}s.more(r,i[l])&&(r=i[l])}return this},format:(n={})=>s.format(r,n),toNumber:()=>Number(s.convertBack(r)),toString:()=>s.convertBack(r),toArray:()=>s.prepare(r)}},LimitAlt:{abs:e=>e[0]==="-"?e.substring(1):e,isNaN:e=>e.includes("NaN"),isFinite:e=>!e.includes("Infinity")&&!e.includes("NaN"),clone:e=>[e[0],e[1]],sort:(e,s=!1)=>{if(e.length<2)return;let r=ee.technical.convertAll(e),n=s?ee.technical.moreOrEqual:ee.technical.lessOrEqual,i=[[0]];e:for(let g=1;g<r.length;g++){let c=i[i.length-1];if(n(r[g-1],r[g])){do if(c.push(g),g++,g>=r.length)break e;while(n(r[g-1],r[g]));i.push([g])}else{do if(c.push(g),g++,g>=r.length){c.reverse();break e}while(n(r[g],r[g-1]));c.reverse(),i.push([g])}}let l=g=>{if(g.length===1)return g[0];let c=[],d;for(d=0;d<g.length-1;d+=2){c.push([]);let h=c[c.length-1],b=g[d],x=g[d+1],S=0,w=0;for(;S<b.length||w<x.length;)w>=x.length||S<b.length&&n(r[b[S]],r[x[w]])?(h.push(b[S]),S++):(h.push(x[w]),w++)}return d===g.length-1&&c.push(g[d]),c=l(c),c};i=l(i);let u=e.slice(0);e.length=0;for(let g=0;g<u.length;g++)e.push(u[i[g]])}},technical:{add:(e,s)=>{if(s[0]===0)return e;if(e[0]===0)return s;if(!isFinite(e[0])||!isFinite(s[0])){let i=e[0]+s[0];return isNaN(e[0])||isNaN(s[0])||isNaN(i)?[NaN,NaN]:[i,1/0]}let r=e[1]-s[1];if(Math.abs(r)>15)return r>0?e:s;r===0?e[0]+=s[0]:r>0?e[0]+=s[0]/10**r:(s[0]+=e[0]/10**-r,e=s);let n=Math.abs(e[0]);if(n===0)e[1]=0;else if(n>=10)e[0]/=10,e[1]++;else if(n<1){let i=-Math.floor(Math.log10(n));e[0]*=10**i,e[1]-=i}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},sub:(e,s)=>(s[0]*=-1,ee.technical.add(e,s)),mult:(e,s)=>e[0]===0||s[0]===0?[0,0]:(e[1]+=s[1],e[0]*=s[0],Math.abs(e[0])>=10&&(e[0]/=10,e[1]++),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),div:(e,s)=>s[0]===0?[NaN,NaN]:e[0]===0?[0,0]:(e[1]-=s[1],e[0]/=s[0],Math.abs(e[0])<1&&(e[0]*=10,e[1]--),e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e),pow:(e,s)=>{if(s===0)return e[0]===0||isNaN(e[0])?[NaN,NaN]:[1,0];if(e[0]===0)return s<0?[NaN,NaN]:[0,0];if(!isFinite(s))return e[1]===0&&(e[0]===1||e[0]===-1&&!isNaN(s))?[1,0]:s===-1/0&&e[1]>=0||s===1/0&&e[1]<0?[0,0]:isNaN(s)||isNaN(e[0])?[NaN,NaN]:[1/0,1/0];let r=e[0]<0?Math.abs(s)%2:null;if(r!==null){if(Math.floor(s)!==s)return[NaN,NaN];e[0]*=-1}let n=s*(Math.log10(e[0])+e[1]);if(!isFinite(n))return isNaN(e[0])?[NaN,NaN]:n===-1/0?[0,0]:[r===1?-1/0:1/0,1/0];let i=Math.floor(n);return e[0]=10**(n-i),e[1]=i,e[0]=Math.round(e[0]*1e14)/1e14,e[0]===10&&(e[0]=1,e[1]++),r===1&&(e[0]*=-1),e},log:(e,s)=>{if(Math.abs(s)===1||e[0]===-1&&e[1]===0)return[NaN,NaN];if(e[0]===1&&e[1]===0)return[0,0];if(s===0)return[NaN,NaN];if(e[0]===0)return isNaN(s)?[NaN,NaN]:[Math.abs(s)>1?-1/0:1/0,1/0];if(!isFinite(s))return[NaN,NaN];if(!isFinite(e[0]))return isNaN(e[0])||e[0]===-1/0?[NaN,NaN]:[Math.abs(s)<1?-1/0:1/0,1/0];let r=e[0]<0;if(r){if(s>0)return[NaN,NaN];e[0]*=-1}let n=e[1]<0,i=Math.log10(Math.abs(Math.log10(e[0])+e[1])),l=Math.floor(i);if(e[0]=10**(i-l),e[1]=l,n&&(e[0]*=-1),s!==10){e[0]/=Math.log10(Math.abs(s));let u=Math.abs(e[0]);if(u<1||u>=10){let g=Math.floor(Math.log10(u));e[0]/=10**g,e[1]+=g}}if(s<0||r){if(e[1]<0)return[NaN,NaN];let u=e[1]<16?Math.abs(Math.round(e[0]*1e14)/10**(14-e[1]))%2:0;if(s<0&&!r){if(u!==0)return[NaN,NaN]}else if(u!==1)return[NaN,NaN]}return e[0]=Math.round(e[0]*1e14)/1e14,Math.abs(e[0])===10&&(e[0]=1,e[1]++),e},less:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]<s[0]:e[0]>0&&s[0]>0?e[1]<s[1]:e[0]<0&&s[0]>0?!0:s[0]<0&&e[0]>0?!1:e[1]>s[1],lessOrEqual:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]<=s[0]:e[0]>0&&s[0]>0?e[1]<s[1]:e[0]<0&&s[0]>0?!0:s[0]<0&&e[0]>0?!1:e[1]>s[1],more:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]>s[0]:e[0]>0&&s[0]>0?e[1]>s[1]:e[0]<0&&s[0]>0?!1:s[0]<0&&e[0]>0?!0:e[1]<s[1],moreOrEqual:(e,s)=>e[0]===0||s[0]===0||e[1]===s[1]?e[0]>=s[0]:e[0]>0&&s[0]>0?e[1]>s[1]:e[0]<0&&s[0]>0?!1:s[0]<0&&e[0]>0?!0:e[1]<s[1],equal:(e,s)=>e[1]===s[1]?e[0]===s[0]:!1,notEqual:(e,s)=>e[1]!==s[1]?!0:e[0]!==s[0],trunc:e=>e[1]<0?[0,0]:(e[1]===0?e[0]=Math.trunc(e[0]):e[1]<=14&&(e[0]=Math.trunc(e[0]*10**e[1])/10**e[1]),e),floor:e=>e[1]<0?[e[0]<0?-1:0,0]:(e[1]===0?e[0]=Math.floor(e[0]):e[1]<=14&&(e[0]=Math.floor(e[0]*10**e[1])/10**e[1]),e),ceil:e=>e[1]<0?[e[0]<0?0:1,0]:(e[1]===0?e[0]=Math.ceil(e[0]):e[1]<=14&&(e[0]=Math.ceil(e[0]*10**e[1])/10**e[1]),e),round:e=>e[1]<0?[e[1]===-1?Math.round(e[0]/10):0,0]:(e[1]===0?e[0]=Math.round(e[0]):e[1]<=14&&(e[0]=Math.round(e[0]*10**e[1])/10**e[1]),e),format:(e,s)=>{let[r,n]=e;if(!isFinite(r)||!isFinite(n))return ee.technical.convertBack(e);if(!t.inflation.vacuum&&n>=300)return"Infinity";if((n>=1e4||n<=-1e4)&&s.type!=="input"){let g=s.digits!==void 0?s.digits:2,c=Math.floor(Math.log10(Math.abs(n))),d=Math.abs(Math.round(n/10**(c-g))/10**g);return d===10&&(d=1,c++),r<0&&(d*=-1),`${s.padding===!0?d.toFixed(g).replace(".",t.separator[1]):`${d}`.replace(".",t.separator[1])}e${n<0?"-":""}e${c}`}if(n>=6||n<-3){let g=s.digits!==void 0?s.digits:2,c=n,d=Math.round(r*10**g)/10**g;return Math.abs(d)===10&&(d=1,c++),d=s.padding===!0?d.toFixed(g):`${d}`,s.type!=="input"?`${d.replace(".",t.separator[1])}e${c}`:`${d}e${c}`}let i=n>=3?0:s.digits!==void 0?s.digits:n<0?4:2,l=Math.round(r*10**(i+n))/10**i,u=i>0&&s.padding===!0?l.toFixed(i):`${l}`;return s.type==="input"?u:l>=1e3?u.replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0]):u.replace(".",t.separator[1])},convert:e=>{let s;if(typeof e!="object"||e===null){typeof e!="string"&&(e=`${e}`);let n=e.indexOf("e");s=n===-1?[Number(e),0]:[Number(e.slice(0,n)),Number(e.slice(n+1))]}else s=[e[0],e[1]];if(!isFinite(s[0]))return isNaN(s[0])?[NaN,NaN]:[s[0],1/0];let r=Math.abs(s[0]);if(r===0)return[0,0];if(r<1||r>=10){let n=Math.floor(Math.log10(r));s[0]/=10**n,s[1]+=n,Math.abs(s[0])<1&&(s[0]*=10,s[1]--)}return s[0]=Math.round(s[0]*1e14)/1e14,Math.abs(s[0])===10&&(s[0]=1,s[1]++),s},convertAll:e=>{let s=[],{convert:r}=ee.technical;for(let n=0;n<e.length;n++)s[n]=r(e[n]);return s},prepare:e=>isFinite(e[0])&&isFinite(e[1])?e:e[0]===0||e[1]===-1/0?[0,0]:isNaN(e[0])||isNaN(e[1])?[NaN,NaN]:[e[0]<0?-1/0:1/0,1/0],convertBack:e=>(e=ee.technical.prepare(e),isFinite(e[0])?e[1]===0?`${e[0]}`:`${e[0]}e${e[1]}`:`${e[0]}`)}},{Limit:Tt,LimitAlt:Ut}=ee,f=Tt;var re=(e,s=null)=>{switch(e){case"stage":return s==="Advanced"?t.inflation.vacuum||t.milestones[1][0]>=5||t.milestones[2][1]>=4||t.milestones[3][1]>=5||t.milestones[4][1]>=5||t.milestones[5][1]>=8:s==="Structures"||s===null;case"Elements":case"research":return t.stage.resets<1&&t.discharge.current<4?!1:s==="Elements"||e==="Elements"?a.stageInfo.activeAll.includes(4)&&t.upgrades[4][1]===1:s==="Researches"||s===null;case"strangeness":return t.strange[0].total===0?!1:s==="Milestones"?t.strangeness[5][8]>=1||!t.inflation.vacuum:s==="Matter"||s===null;case"settings":return s==="History"?t.strange[0].total>0:s==="Settings"||s==="Stats"||s===null;case"special":return a.screenReader}return!1},lt=(e,s)=>{if(a.buildingsInfo.maxActive[s]<e+1)return!1;if(s===1)return!0;if(s===2)return e===6?t.strangeness[2][9]>=1:!0;if(s===3){if(t.accretion.rank===0)return!1;if(e===1)return!0;if(e===2)return t.upgrades[3][2]===1;if(e===3)return t.upgrades[3][4]===1;if(e===4)return t.upgrades[3][6]===1;if(e===5)return t.upgrades[3][6]===1&&t.strangeness[3][8]>=1&&t.accretion.rank>=5}else if(s===4){if(t.collapse.mass<a.collapseInfo.unlockB[e])return!1;if(e===1||e===4)return!0;if(e===2)return t.inflation.vacuum||t.upgrades[4][1]===1;if(e===3)return t.inflation.vacuum||t.upgrades[4][2]===1;if(e===5)return t.strangeness[4][10]>=1}else if(s===5){if(t.challenges.active===0||t.collapse.mass<a.collapseInfo.unlockG[e])return!1;if(e===1)return t.inflation.vacuum||t.milestones[2][0]>=3;if(e===2)return t.inflation.vacuum||t.milestones[3][0]>=3;if(e===3)return t.strangeness[5][6]>=1;if(e===4)return!1}return!1},Ae=(e,s,r)=>{if(s===3&&t.accretion.rank===0&&r!=="strangeness")return!1;switch(r){case"upgrades":if(a.upgradesInfo[s].maxActive<e+1)return!1;if(s===1)return e===0||e===1?t.inflation.vacuum:e>5?t.discharge.current>=3:!0;if(s===2)return e===6?t.strangeness[2][2]>=3:e===7?t.strangeness[2][9]>=2:!0;if(s===3)return e===8&&t.strangeness[3][2]<3?!1:t.accretion.rank>=a.accretionInfo.rankU[e];if(s===4)return e===3&&t.strangeness[4][2]<1||e>=2&&t.upgrades[4][e-1]!==1?!1:t.collapse.mass>=a.collapseInfo.unlockU[e];if(s===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=3;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=3;if(e===2)return t.buildings[5][3].true>=1}break;case"researches":if(a.researchesInfo[s].maxActive<e+1)return!1;if(s===1)return t.upgrades[1][5]===1;if(s===2)return!0;if(s===3)return t.accretion.rank>=a.accretionInfo.rankR[e];if(s===4)return e===3&&t.strangeness[4][2]<2?!1:t.collapse.mass>=a.collapseInfo.unlockR[e];if(s===5){if(e===0)return t.inflation.vacuum||t.milestones[2][0]>=3;if(e===1)return t.inflation.vacuum||t.milestones[3][0]>=3}break;case"researchesExtra":if(a.researchesExtraInfo[s].maxActive<e+1)return!1;if(s===1)return t.discharge.current<5?!1:e===1?t.researchesExtra[1][2]>=2:e===4?t.accretion.rank>=6:!0;if(s===2)return f(t.vaporization.clouds).moreThan("1");if(s===3)return t.accretion.rank>=a.accretionInfo.rankE[e];if(s===4)return e===1?t.strangeness[4][2]>=3:t.buildings[4][2].trueTotal[0]>0;break;case"researchesAuto":return s===1&&t.upgrades[1][5]<1?!1:s===a.researchesAutoInfo.autoStage[e];case"ASR":return s===1?t.upgrades[1][5]>=1:!0;case"elements":return e>=27?t.upgrades[4][3]===1:e>=11?t.collapse.mass>=10||t.buildings[5][3].true>0:e>=6?t.upgrades[4][2]===1:t.upgrades[4][1]===1;case"strangeness":if(a.strangenessInfo[s].maxActive<e+1)return!1;if(t.inflation.vacuum){if(s===1){if(e===9)return t.challenges.void[1]>=1;if(e===10)return t.challenges.void[1]>=4;if(e===11)return t.challenges.void[4]>=2}else if(s===2){if(e===9)return t.strangeness[2][5]>=5;if(e===10)return t.challenges.void[2]>=3&&t.strangeness[1][11]>=1}else if(s===3){if(e===8)return t.strangeness[3][5]>=4;if(e===10)return t.challenges.void[1]>=2;if(e===11)return t.challenges.void[1]>=3}else if(s===4){if(e===8)return t.strangeness[4][7]>=3;if(e===10)return t.strangeness[4][6]>=4;if(e===11)return t.challenges.void[4]>=3}else if(s===5){if(e===8)return t.challenges.void[4]>=1;if(e===9)return t.challenges.void[3]>=5}return e<10}return(s===1||s===4)&&e<8||(s===2||s===3)&&e<7?!0:s===4&&e===8&&t.stage.true>=6&&t.strangeness[4][7]<3?!1:t.milestones[4][0]>=3}return!1},me=(e,s,r)=>{switch(r){case"structures":if(s===5&&e===3)return!1;break;case"upgrades":if(s===1){if(e===5)return!1}else if(s===2){if(e===1)return!1}else{if(s===4)return!1;if(s===5&&e===2)return t.inflation.vacuum}break;case"researches":if(s===1){if(e===3)return!1}else if(s===2&&e===1)return!1;break;case"researchesExtra":if(s===1){if(e===2)return!1}else if(s===2){if(e===0||e===3)return!1}else if(s===4&&e===0)return!1;break;case"elements":if(e===26||e===27||e===28)return!1}return!0},ct=(e,s)=>{if(t.inflation.vacuum){if(t.strangeness[5][8]<1||t.challenges.active!==0)return!1}else if(t.strange[0].total===0||s===5&&t.strangeness[5][8]<1)return!1;let r=a.milestonesInfo[s].need[e];if(r[0]===0)return!1;if(s===1){if(e===0)return f(t.buildings[1][t.inflation.vacuum?1:0].current).moreOrEqual(r);if(e===1)return f(t.discharge.energy).moreOrEqual(r)}else if(s===2){if(e===0)return f(t.inflation.vacuum?t.vaporization.clouds:t.buildings[2][1].current).moreOrEqual(r);if(e===1)return f(t.buildings[2][2].current).moreOrEqual(r)}else if(s===3){if(e===0)return f(t.buildings[3][0].current).moreOrEqual(r);if(e===1)return f(t.buildings[3][4].true+t.buildings[3][5].true).moreThan(r)}else if(s===4){if(e===0)return f(t.inflation.vacuum?t.buildings[4][0].current:t.collapse.mass).moreOrEqual(r);if(e===1)return f(t.collapse.stars[2]).moreOrEqual(r)}else if(s===5){if(e===0)return f(t.inflation.vacuum?t.buildings[5][0].current:a.collapseInfo.trueStars).moreOrEqual(r);if(e===1)return f(t.buildings[5][t.inflation.vacuum?4:3].current).moreOrEqual(r)}return!1};var N={resetHTML:["",'<span class="bigWord orangeText">Discharge</span>. Reset current Structures and Energy. Will also boost production by <span id="dischargeEffect" class="orangeText"></span>, if to reset with enough Energy.','<span class="bigWord grayText">Vaporization</span>. Structures, upgrades, will be reset. But in return gain <span class="grayText">Clouds</span>. It takes a lot to form more than one.','<img id="rankImage" src="Used_art/Missing.png" alt="Missing">Current <span class="bigWord darkorchidText">Rank</span> is: <span id="rankName" class="blueText"></span>. <span id="rankMessage"></span>','<span class="bigWord orchidText">Collapse</span> - Everything will be lost, but at same time gained. Each of the Stars will produce something unique and special.',""],longestBuilding:7,buildingHTML:[[],[["Preon.png","Preon"],["Quarks.png","Quarks"],["Particle.png","Particle"],["Atom.png","Atom"],["Molecule.png","Molecule"]],[["Drop.png","Drop of water"],["Puddle.png","Puddle"],["Pond.png","Pond"],["Lake.png","Lake"],["Sea.png","Sea"],["Ocean.png","Ocean"]],[["Cosmic%20dust.png","Cosmic dust"],["Planetesimal.png","Planetesimal"],["Protoplanet.png","Protoplanet"],["Natural%20satellite.png","Moon"],["Subsatellite.png","Submoon"]],[["Brown%20dwarf.png","Brown dwarf"],["Orange%20dwarf.png","Orange dwarf"],["Red%20supergiant.png","Red supergiant"],["Blue%20hypergiant.png","Blue hypergiant"],["Quasi%20star.png","Quasi star"]],[["Nebula.png","Nebula"],["Star%20cluster.png","Star cluster"],["Galaxy.png","Galaxy"],["Galaxy%20Filaments.png","Galaxy Filaments"]]],longestUpgrade:13,upgradeHTML:[[],[["UpgradeQ1.png","Weak force"],["UpgradeQ2.png","Strong force"],["UpgradeQ3.png","Electron"],["UpgradeQ4.png","Proton"],["UpgradeQ5.png","Neutron"],["UpgradeQ6.png","Superposition"],["UpgradeQ7.png","Protium"],["UpgradeQ8.png","Deuterium"],["UpgradeQ9.png","Tritium"],["UpgradeQ10.png","Fusion"]],[["UpgradeW1.png","Mole"],["UpgradeW2.png","Vaporization"],["UpgradeW3.png","Tension"],["UpgradeW4.png","Stress"],["UpgradeW5.png","Stream"],["UpgradeW6.png","River"],["UpgradeW7.png","Tsunami"],["UpgradeW8.png","Tide"]],[["UpgradeA1.png","Motion"],["UpgradeA2.png","Gas"],["UpgradeA3.png","Micrometeoroid"],["UpgradeA4.png","Instability"],["UpgradeA5.png","Gravity"],["UpgradeA6.png","Pile"],["UpgradeA7.png","Orbit"],["UpgradeA8.png","Magma"],["UpgradeA9.png","Equilibrium"],["UpgradeA10.png","Atmosphere"],["UpgradeA11.png","Pebble"],["UpgradeA12.png","Tidal force"],["UpgradeA13.png","Ring"]],[["UpgradeS1.png","Collapse"],["UpgradeS2.png","Reaction"],["UpgradeS3.png","CNO"],["UpgradeS4.png","Helium fusion"]],[["UpgradeG1.png","Instability"],["UpgradeG2.png","Super cluster"],["UpgradeG3.png","Quasar"]]],longestResearch:8,researchHTML:[[],[["ResearchQ1.png","Protium+","stage1borderImage"],["ResearchQ2.png","Deuterium+","stage1borderImage"],["ResearchQ3.png","Tritium+","stage1borderImage"],["ResearchQ4.png","Discharge-","stage4borderImage"],["ResearchQ5.png","Discharge+","stage4borderImage"],["ResearchQ6.png","Discharge++","stage4borderImage"]],[["ResearchW1.png","Moles+","stage2borderImage"],["ResearchW2.png","Moles++","stage2borderImage"],["ResearchW3.png","Tension+","stage2borderImage"],["ResearchW4.png","Stress+","stage2borderImage"],["ResearchW5.png","Streams+","stage2borderImage"],["ResearchW6.png","Channel","stage2borderImage"]],[["ResearchA1.png","Mass+","stage3borderImage"],["ResearchA2.png","Adhesion","stage2borderImage"],["ResearchA3.png","Weathering","stage3borderImage"],["ResearchA4.png","Collision","stage3borderImage"],["ResearchA5.png","Binary","stage3borderImage"],["ResearchA6.png","Gravity+","stage1borderImage"],["ResearchA7.png","Layers","stage7borderImage"],["ResearchA8.png","Drag","stage1borderImage"]],[["ResearchS1.png","Orbit","stage5borderImage"],["ResearchS2.png","2 stars","stage5borderImage"],["ResearchS3.png","Protodisc","stage7borderImage"],["ResearchS4.png","Planetary nebula","stage5borderImage"]],[["ResearchG1.png","Density","stage1borderImage"],["ResearchG2.png","Frequency","stage6borderImage"]]],longestResearchExtra:5,researchExtraDivHTML:[[],["Energy%20Researches.png","Energy researches","stage4borderImage"],["Cloud%20Researches.png","Cloud researches","stage2borderImage"],["Rank%20Researches.png","Rank researches","stage6borderImage"],["Star%20Researches.png","Star researches","stage6borderImage"],[]],researchExtraHTML:[[],[["ResearchEnergy1.png","Strong force+","stage1borderImage"],["ResearchEnergy2.png","Radiation+","stage5borderImage"],["ResearchEnergy3.png","Accretion","stage3borderImage"],["ResearchEnergy4.png","Preon Mass","stage1borderImage"],["ResearchEnergy5.png","Impulse","stage6borderImage"]],[["ResearchClouds1.png","Vaporization+","stage3borderImage"],["ResearchClouds2.png","Rain","stage2borderImage"],["ResearchClouds3.png","Storm","stage4borderImage"],["Ocean%20world.png","Ocean world","stage2borderImage"]],[["ResearchRank1.png","Ocean","stage3borderImage"],["ResearchRank2.png","Rank","stage3borderImage"],["ResearchRank3.png","Weight","stage3borderImage"],["ResearchRank4.png","Viscosity","stage2borderImage"],["ResearchRank5.png","Water rank","stage2borderImage"]],[["ResearchStar1.png","Supernova","stage6borderImage"],["ResearchStar2.png","White dwarf","stage1borderImage"]],[]],longestFooterStats:3,footerStatsHTML:[[],[["Energy%20mass.png","Energy mass","stage1borderImage cyanText","Mass"],["Energy.png","Energy","stage4borderImage orangeText","Energy"]],[["Clouds.png","Clouds","stage3borderImage grayText","Clouds"],["Water.png","H2O","stage2borderImage blueText","Moles"],["Drop.png","Drop of water","stage2borderImage blueText","Drops"]],[["Mass.png","Mass","stage3borderImage grayText","Mass"]],[["Main_sequence%20mass.png","Solar mass","stage1borderImage cyanText","Mass"],["Elements.png","Elements","stage4borderImage orangeText","Elements"]],[["Main_sequence%20mass.png","Solar mass","stage1borderImage cyanText","Mass"],["Elements.png","Elements","stage4borderImage orangeText","Elements"],["Stars.png","Stars","stage7borderImage redText","Stars"]]],imageCache:document.createElement("div")},ut=()=>{let{footerStatsHTML:e,buildingHTML:s,upgradeHTML:r,researchHTML:n,researchExtraHTML:i,researchExtraDivHTML:l}=N,u="";for(let g=1;g<=5;g++){for(let c=0;c<e[g].length;c++){if(g===2){if(c===2)continue}else if(g===5&&c<2)continue;u+=`<img src="Used_art/${e[g][c][0]}" loading="lazy">`}for(let c=0;c<s[g].length;c++)u+=`<img src="Used_art/${s[g][c][0]}" loading="lazy">`;for(let c=0;c<r[g].length;c++)u+=`<img src="Used_art/${r[g][c][0]}" loading="lazy">`;for(let c=0;c<n[g].length;c++)u+=`<img src="Used_art/${n[g][c][0]}" loading="lazy">`;for(let c=0;c<i[g].length;c++)g===2&&c===3||(u+=`<img src="Used_art/${i[g][c][0]}" loading="lazy">`);l[g].length>0&&(u+=`<img src="Used_art/${l[g][0]}" loading="lazy">`),u+=`<img src="Used_art/Stage${g}%20border.png" loading="lazy">`}N.imageCache.innerHTML=u},Le=(e,s=!1)=>{s||t.stage.true<e&&(s=!0),s?(a.theme.default=!0,localStorage.removeItem("theme")):(a.theme.default=!1,a.theme.stage=e,localStorage.setItem("theme",`${e}`)),Je()},Je=()=>{let{theme:e}=a,s=document.body.style;e.default?(e.stage=t.stage.active,o("currentTheme").textContent="Default"):o("currentTheme").textContent=a.stageInfo.word[e.stage];let r="",n="";switch(s.setProperty("--transition-all","1s"),s.setProperty("--transition-buttons","700ms"),s.removeProperty("--background-color"),s.removeProperty("--window-color"),s.removeProperty("--window-border"),s.removeProperty("--footer-color"),s.removeProperty("--button-main-color"),s.removeProperty("--button-main-border"),s.removeProperty("--button-main-hover"),s.removeProperty("--building-can-buy"),s.removeProperty("--button-tab-border"),s.removeProperty("--button-tab-active"),s.removeProperty("--button-extra-hover"),s.removeProperty("--button-delete-color"),s.removeProperty("--button-delete-hover"),s.removeProperty("--input-border-color"),s.removeProperty("--input-text-color"),s.removeProperty("--button-text-color"),s.removeProperty("--main-text-color"),s.removeProperty("--white-text-color"),s.removeProperty("--blue-text-color"),s.removeProperty("--orange-text-color"),s.removeProperty("--gray-text-color"),s.removeProperty("--orchid-text-color"),s.removeProperty("--darkorchid-text-color"),s.removeProperty("--darkviolet-text-color"),s.removeProperty("--red-text-color"),s.removeProperty("--green-text-color"),s.removeProperty("--yellow-text-color"),e.stage){case 1:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="",o(`${i}Cost`).style.color="",i!=="upgrade"&&(o(`${i}Text`).style.color="");break;case 2:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--cyan-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="");s.setProperty("--background-color","#070026"),s.setProperty("--window-color","#000052"),s.setProperty("--window-border","blue"),s.setProperty("--footer-color","#0000db"),s.setProperty("--button-main-color","blue"),s.setProperty("--button-main-border","#427be1"),s.setProperty("--button-main-hover","#1515cf"),s.setProperty("--button-tab-border","#376ac5"),s.setProperty("--button-tab-active","#990000"),s.setProperty("--button-extra-hover","#2400d7"),s.setProperty("--input-border-color","#4747ff"),s.setProperty("--input-text-color","dodgerblue"),s.setProperty("--main-text-color","var(--blue-text-color)"),s.setProperty("--gray-text-color","#9b9b9b"),s.setProperty("--darkorchid-text-color","#c71bff"),s.setProperty("--darkviolet-text-color","#8b6bff"),s.setProperty("--green-text-color","#82cb3b"),s.setProperty("--red-text-color","#f70000"),t.stage.active===2&&(r="#3099ff",n="#3099ff");break;case 3:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="",o(`${i}Cost`).style.color="var(--green-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--orange-text-color)");s.setProperty("--background-color","#000804"),s.setProperty("--window-color","#2e1200"),s.setProperty("--window-border","#31373e"),s.setProperty("--footer-color","#221a00"),s.setProperty("--button-main-color","#291344"),s.setProperty("--button-main-border","#404040"),s.setProperty("--button-main-hover","#361f52"),s.setProperty("--button-tab-border","#484848"),s.setProperty("--button-tab-active","#8d4c00"),s.setProperty("--button-extra-hover","#5a2100"),s.setProperty("--button-delete-color","#891313"),s.setProperty("--button-delete-hover","#a10a0a"),s.setProperty("--input-border-color","#8b4a00"),s.setProperty("--input-text-color","#e77e00"),s.setProperty("--main-text-color","var(--gray-text-color)"),s.setProperty("--white-text-color","#dfdfdf"),s.setProperty("--orange-text-color","#f58600"),s.setProperty("--green-text-color","#00db00"),t.stage.active===2&&(r="#3099ff",n="#3099ff");break;case 4:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--cyan-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--blue-text-color)");s.setProperty("--background-color","#140e04"),s.setProperty("--window-color","#4e0000"),s.setProperty("--window-border","#894800"),s.setProperty("--footer-color","#4e0505"),s.setProperty("--button-main-color","#6a3700"),s.setProperty("--button-main-border","#9f6700"),s.setProperty("--button-main-hover","#914b00"),s.setProperty("--building-can-buy","#007f95"),s.setProperty("--button-tab-border","#af5d00"),s.setProperty("--button-tab-active","#008297"),s.setProperty("--button-extra-hover","#605100"),s.setProperty("--button-delete-color","#8f0000"),s.setProperty("--button-delete-hover","#ad0000"),s.setProperty("--input-border-color","#008399"),s.setProperty("--input-text-color","#05c3c3"),s.setProperty("--button-text-color","#d9d900"),s.setProperty("--main-text-color","var(--orange-text-color)"),s.setProperty("--white-text-color","#e5e500"),s.setProperty("--blue-text-color","#2e96ff"),s.setProperty("--gray-text-color","#8b8b8b"),s.setProperty("--darkorchid-text-color","#c71bff"),s.setProperty("--darkviolet-text-color","#9457ff"),s.setProperty("--red-text-color","red"),s.setProperty("--green-text-color","#00e600"),s.setProperty("--yellow-text-color","var(--green-text-color)");break;case 5:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--green-text-color)",o(`${i}Cost`).style.color="var(--red-text-color)",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--orange-text-color)");s.setProperty("--background-color","#060010"),s.setProperty("--window-color","#001d42"),s.setProperty("--window-border","#35466e"),s.setProperty("--footer-color","#2f005c"),s.setProperty("--button-main-color","#4a008f"),s.setProperty("--button-main-border","#8a0049"),s.setProperty("--button-main-hover","#6800d6"),s.setProperty("--building-can-buy","#8603ff"),s.setProperty("--button-tab-border","#9d0054"),s.setProperty("--button-tab-active","#8500ff"),s.setProperty("--button-extra-hover","#3b0080"),s.setProperty("--button-delete-color","#800000"),s.setProperty("--button-delete-hover","#9b1212"),s.setProperty("--input-border-color","#3656a1"),s.setProperty("--input-text-color","#6a88cd"),s.setProperty("--button-text-color","#fc9cfc"),s.setProperty("--main-text-color","var(--darkorchid-text-color)"),s.setProperty("--white-text-color","#ff79ff"),s.setProperty("--orchid-text-color","#ff00f4"),s.setProperty("--darkorchid-text-color","#c000ff"),s.setProperty("--darkviolet-text-color","#9f52ff"),s.setProperty("--yellow-text-color","var(--darkviolet-text-color)");break;case 6:for(let i of["upgrade","research","element"])o(`${i}Effect`).style.color="var(--red-text-color)",o(`${i}Cost`).style.color="",i!=="upgrade"&&(o(`${i}Text`).style.color="var(--orchid-text-color)");s.setProperty("--background-color","black"),s.setProperty("--window-color","#01003c"),s.setProperty("--window-border","#7100ff"),s.setProperty("--footer-color","#00007a"),s.setProperty("--button-main-color","#2b0095"),s.setProperty("--button-main-border","#711bda"),s.setProperty("--button-main-hover","#3d00d6"),s.setProperty("--building-can-buy","#a80000"),s.setProperty("--button-tab-border","#6719c8"),s.setProperty("--button-tab-active","#8d0000"),s.setProperty("--button-extra-hover","#490070"),s.setProperty("--button-delete-color","#930606"),s.setProperty("--button-delete-hover","#b80000"),s.setProperty("--input-border-color","#a50000"),s.setProperty("--input-text-color","red"),s.setProperty("--button-text-color","#efe0ff"),s.setProperty("--main-text-color","var(--darkviolet-text-color)"),s.setProperty("--gray-text-color","#9b9b9b"),s.setProperty("--darkviolet-text-color","#8157ff"),s.setProperty("--white-text-color","#f9f5ff"),s.setProperty("--red-text-color","red"),s.setProperty("--yellow-text-color","var(--red-text-color)")}D("#footerStat2 > p").style.color=r,D("#footerStat3 > p").style.color=n,setTimeout(()=>{s.removeProperty("--transition-all"),s.removeProperty("--transition-buttons")},1e3)},$=e=>{Me(e)},Me=async e=>await new Promise(s=>{let r=o("blocker");if(r.style.display!=="none"){console.warn("Wasn't able to show another window (alert)"),s();return}o("alertText").textContent=e;let n=o("confirmBtn");r.style.display="",n.focus();let i=async u=>{(u.key==="Escape"||u.key==="Enter")&&(u.preventDefault(),l())},l=()=>{r.style.display="none",document.removeEventListener("keydown",i),n.removeEventListener("click",l),s()};document.addEventListener("keydown",i),n.addEventListener("click",l)}),q=async(e,s=!1)=>await new Promise(r=>{let n=o("blocker");if(n.style.display!=="none"){console.warn("Wasn't able to show another window (confirm)"),r(s);return}o("alertText").textContent=e;let i=o("cancelBtn"),l=o("confirmBtn");n.style.display="",i.style.display="",l.focus();let u=()=>{d(!0)},g=()=>{d(!1)},c=h=>{h.key==="Escape"?(h.preventDefault(),g()):h.key==="Enter"&&(h.preventDefault(),u())},d=h=>{n.style.display="none",i.style.display="none",document.removeEventListener("keydown",c),l.removeEventListener("click",u),i.removeEventListener("click",g),r(h)};document.addEventListener("keydown",c),l.addEventListener("click",u),i.addEventListener("click",g)}),Pe=async(e,s="")=>await new Promise(r=>{let n=o("blocker");if(n.style.display!=="none"){console.warn("Wasn't able to show another window (prompt)"),r(null);return}o("alertText").textContent=e;let i=o("inputArea"),l=o("cancelBtn"),u=o("confirmBtn");n.style.display="",l.style.display="",i.style.display="",i.value=s,i.focus();let g=()=>{h(i.value)},c=()=>{h(null)},d=b=>{b.key==="Escape"?(b.preventDefault(),c()):b.key==="Enter"&&(b.preventDefault(),g())},h=b=>{n.style.display="none",l.style.display="none",i.style.display="none",document.removeEventListener("keydown",d),u.removeEventListener("click",g),l.removeEventListener("click",c),r(b)};document.addEventListener("keydown",d),u.addEventListener("click",g),l.addEventListener("click",c)}),de=e=>{let s=document.createElement("p");s.textContent=e,s.style.animation="hideX 1s ease-in-out reverse";let r=o("notifications");r.appendChild(s);let n,i=()=>{s.removeEventListener("click",i),s.style.animation="hideX 1s ease-in-out forwards",setTimeout(()=>r.removeChild(s),1e3),clearTimeout(n)};setTimeout(()=>{s.style.animation="",n=setTimeout(i,9e3),s.addEventListener("click",i)},1e3)},Ne=()=>{let e=o("footer"),s=o("hideToggle"),r=o("hideArrow"),n=()=>{e.style.animation="",r.style.animation="",s.addEventListener("click",Ne)};a.footer=!a.footer,s.removeEventListener("click",Ne),a.footer?(o("footerColor").style.display="",r.style.transform="",e.style.animation="hideY 1s reverse",r.style.animation="rotate 1s reverse",o("hideText").textContent="Hide",setTimeout(n,1e3),G(),se()):(e.style.animation="hideY 1s backwards",r.style.animation="rotate 1s backwards",o("hideText").textContent="Show",setTimeout(()=>{o("footerColor").style.display="none",r.style.transform="rotate(180deg)",n()},1e3))},Ue=(e=!1)=>{let s=Boolean(localStorage.getItem("mobile device")),r=o("mobileDeviceToggle");e&&(s=!s),s&&!a.screenReader?(r.textContent="ON",r.style.color="var(--red-text-color)",r.style.borderColor="crimson",localStorage.setItem("mobile device","true"),a.mobileDevice=!0,e&&$("To enable touchStart events (as example: touching an upgrade to view description), will need to refresh")):(r.textContent="OFF",r.style.color="",r.style.borderColor="",localStorage.removeItem("mobile device"),a.mobileDevice=!1)},Xe=(e=!1)=>{let s=Boolean(localStorage.getItem("screen reader")),r=o("screenReaderToggle");e&&(s=!s),s?(r.textContent="ON",r.style.color="var(--red-text-color)",r.style.borderColor="crimson",localStorage.setItem("screen reader","true"),a.screenReader=!0,e&&$(`To enable focus events (as example: view description of an upgrade by pressing 'tab'), will need to refresh.
Due to no confirmation that anyone is playing this with Screen reader, support is limited`),a.mobileDevice&&Ue()):(r.textContent="OFF",r.style.color="",r.style.borderColor="",localStorage.removeItem("screen reader"),a.screenReader=!1)},Be=(e=!1,s=!1)=>{let r=o("fontSizeToggle"),n=Boolean(localStorage.getItem("fontSize"));if(e&&(n=!n),!n)document.body.style.removeProperty("--font-size"),localStorage.removeItem("fontSize"),r.textContent="OFF",r.style.color="var(--red-text-color)",r.style.borderColor="crimson";else{let i=o("customFontSize"),l=Number(localStorage.getItem("fontSize"));(l<10||l>32||s)&&(l=Math.min(Math.max(Math.floor(Number(i.value)*10)/10,10),32)),document.body.style.setProperty("--font-size",`${l}px`),localStorage.setItem("fontSize",`${l}`),r.textContent="ON",r.style.color="",r.style.borderColor="",i.value=`${l}`}},Ze=e=>{let s=e?o("decimalPoint"):o("thousandSeparator");(![".",","," ","_","^",'"',"'","`","|"].includes(s.value)||(e?t.separator[0]:t.separator[1])===s.value)&&(e&&t.separator[0]==="."&&(o("thousandSeparator").value="",t.separator[0]=""),s.value=e?".":""),e?t.separator[1]=s.value:t.separator[0]=s.value},Y=(e,s)=>{e.textContent=s;let r=`${s.length*.63}em`;r!==e.style.width&&(e.style.width=r)},ft=async()=>{if(o("blocker").style.display!=="none")return;let e=Number(await Pe(`Which event do you want to see again?
(Write a number of that event)`));if(!isFinite(e)||e<=0)return;let s=!1;if([1,2,3,4].includes(e)?s=t.stage.true>e||t.events[0]&&t.stage.true===e:e===5?s=t.events[1]:e===6&&(s=t.events[2]),!s)return $(`Event under number ${e} can't be viewed, because it isn't unlocked`);te(e-1,-1)},te=(e,s)=>{if(o("blocker").style.display==="none")switch(s!==-1&&(t.events[s]=!0),e){case 0:$("Energy that had been spent, can't be obtained again. But doing Discharge will reset spent Energy");break;case 1:$("Cloud density is too high... Getting more will be harder now");break;case 2:if($("Getting more Mass, seems impossible. We need to change our approach, next Rank is going to be Softcapped"),s!==-1&&t.accretion.rank<=4){a.accretionInfo.rankCost[4]=5e29;let r=o("reset1Button");r.textContent==="Max Rank achieved"&&(r.textContent="Next Rank is 5e29 Mass")}break;case 3:$(`Any Collapse reset from now on will give even more rewards. Collapse is only possible when can increase any of rewards.
Rewards effects are unknown, but with more Elements will be revealed`);break;case 4:$("There doesn't seem to be anything here. Let's try going back to start and find what is missing");break;case 5:$(`Galaxy will boost production of Nebulas and Star clusters, but for the cost of every other structure/upgrade.
Elements are disabled until afforded again (will reactivate automatically)`)}};var ke=()=>{let{buildings:e}=y,{buildingsInfo:s,upgradesInfo:r,researchesInfo:n,researchesExtraInfo:i,strangenessInfo:l}=a;if(i[4].startCost[0]=t.challenges.active===0?1e14:1e6,t.inflation.vacuum){N.footerStatsHTML[1][0]=["Energy%20mass.png","Energy mass","stage1borderImage cyanText","Mass"],e[1][0].current=[5.476,-3],e[2][0].current=[0,0],e[3][0].current=[0,0];let u=[6,7,6,6,5];s.maxActive.splice(1,u.length,...u),s.name[1][0]!=="Mass"&&(N.buildingHTML[1].unshift(["Preon.png","Preon"],["Quarks.png","Quarks"]),s.name[1].unshift("Mass","Preons")),s.startCost[1]=[0,.005476,6,3,24,3],s.firstCost[1]=[0,.005476,6,3,24,3],a.dischargeInfo.energyType[1]=[0,1,3,5,10,20],s.type[2][1]="improves",s.type[3][1]="improves",s.increase[5][1]=4,s.increase[5][2]=4;let g=[32,48,60,90,150,400,1600,4e3,32e3,1e5];r[1].startCost.splice(0,g.length,...g),r[2].startCost[0]=10,r[2].maxActive=8;let c=[2500,8e3,4e4,8e3,58e3,36e3],d=[500,4e3,6e3,38e3,0,8e3];n[1].startCost.splice(0,c.length,...c),n[1].scaling.splice(0,d.length,...d),i[3].scaling[3]=1e14,i[1].maxActive=5,i[2].maxActive=4,i[3].maxActive=5,a.accretionInfo.rankCost[5]=247e29,a.researchesAutoInfo.startCost[0]=2e3,a.researchesAutoInfo.scaling[0]=29e3,a.ASRInfo.costRange[1]=[4e3,12e3,24e3,32e3,44e3];let h=[2,1,20,40,2,1,2,4,20],b=[3,3,2,100,3,1.4,1.8,3,1];l[1].startCost.splice(0,h.length,...h),l[1].scaling.splice(0,b.length,...b);let x=[1,2,3,4,20,4,1,4,30],S=[1.5,2,3,3,500,1.6,2,4,1];l[2].startCost.splice(0,x.length,...x),l[2].scaling.splice(0,S.length,...S);let w=[1,2,6,18,30,3,10,20],B=[1.46,2.5,2,1,200,1.8,3,1];l[3].startCost.splice(0,w.length,...w),l[3].scaling.splice(0,B.length,...B);let R=[1,3,5,5,90,20,4,4,24,40],E=[1.8,2,3,4,1,40,1.8,1.8,1,1];l[4].startCost.splice(0,R.length,...R),l[4].scaling.splice(0,E.length,...E);let C=[4,12,4e3,5,10,40,1200,60,1500],p=[1,1,1,1.8,1.75,1,5,1.5,1];l[5].startCost.splice(0,C.length,...C),l[5].scaling.splice(0,p.length,...p),l[1].maxActive=12,l[2].maxActive=11,l[3].maxActive=12,l[4].maxActive=12,l[5].maxActive=10,o("milestonesWelcome").innerHTML='Milestones, can only be done when inside the <span class="darkvioletText">Void</span>';let A=D("#milestone1Stage2Div > img");a.milestonesInfo[2].name[0]="Distant Clouds",A.src=A.src.replace("Drop.png","Clouds.png"),A.alt="Clouds";let T=D("#milestone2Stage5Div > img");T.src=T.src.replace("Galaxy.png","Galaxy%20Filaments.png"),T.alt="Galaxy Filaments",a.milestonesInfo[3].name[0]="Center of gravity",D("#historyMainDiv p").textContent="Stage resets:",o("strange10Stage2").style.display="",o("strange9Stage3").style.display="",o("strange10Stage3").style.display="",o("strange11Stage4").style.display="",o("strangeBoostMain").style.display="",o("strange9Stage1").style.display="",o("strange8Stage2").style.display="",o("strange9Stage2").style.display="",o("strange8Stage3").style.display="",o("strange9Stage4").style.display="",o("strange10Stage4").style.display="",o("strange6Stage5").style.display="";for(let M=2;M<=5;M++)o(`strangenessSection${M}`).style.display="",o(`milestone1Stage${M}Div`).style.display="",M!==5&&(o(`milestone2Stage${M}Div`).style.display="");o("unknownStructures").style.display="none",D("#stageInput ~ span").style.display="none";for(let M of ie("vacuum"))M.style.display=""}else{N.footerStatsHTML[1][0]=["Quarks.png","Quarks","stage1borderImage cyanText","Quarks"],e[1][0].current=[3,0],e[2][0].current=[2.8,-3],e[3][0].current=[1,-19],s.name[1][0]==="Mass"&&(N.buildingHTML[1].splice(0,2),s.name[1].splice(0,2));let u=[4,6,5,5,4];s.maxActive.splice(1,u.length,...u),s.startCost[1]=[0,3,24,3],s.firstCost[1]=[0,3,24,3],a.dischargeInfo.energyType[1]=[0,1,5,20],s.type[2][1]="producing",s.type[3][1]="producing",s.increase[5][1]=2,s.increase[5][2]=2;let g=[0,0,9,12,36,300,800,2e3,8e3,3e4];r[1].startCost.splice(0,g.length,...g),r[2].startCost[0]=1e4,r[1].maxActive=10,r[2].maxActive=7,r[3].maxActive=13,r[4].maxActive=4,r[5].maxActive=3;let c=[1e3,3e3,12e3,6e3,1e4,2e4],d=[500,2e3,2e3,26e3,0,5e3];n[1].startCost.splice(0,c.length,...c),n[1].scaling.splice(0,d.length,...d),n[1].maxActive=6,n[2].maxActive=6,n[3].maxActive=8,n[4].maxActive=4,n[5].maxActive=2,i[3].scaling[3]=100,i[1].maxActive=0,i[2].maxActive=3,i[3].maxActive=4,i[4].maxActive=2,i[5].maxActive=0,a.accretionInfo.rankCost[5]=0,a.researchesAutoInfo.startCost[0]=300,a.researchesAutoInfo.scaling[0]=21850,a.ASRInfo.costRange[1]=[4e3,12e3,2e4];let h=[1,1,2,4,4,1,2,2,10],b=[1.5,1,3,0,2,.25,2,1.5,0];l[1].startCost.splice(0,h.length,...h),l[1].scaling.splice(0,b.length,...b);let x=[1,2,2,1,3,2,1,3,8],S=[.2,.5,1.5,2,0,1,.5,2.5,0];l[2].startCost.splice(0,x.length,...x),l[2].scaling.splice(0,S.length,...S);let w=[1,1,3,4,3,2,5,6],B=[.75,1.5,2.5,0,0,1,3.5,0];l[3].startCost.splice(0,w.length,...w),l[3].scaling.splice(0,B.length,...B);let R=[1,1,3,2,4,3,3,2,4,4],E=[1,1.5,1.5,2,0,0,1,2.5,0,0];l[4].startCost.splice(0,R.length,...R),l[4].scaling.splice(0,E.length,...E);let C=[120,10,20,5,10,20,800,20,40],p=[60,0,0,5,10,0,400,20,0];l[5].startCost.splice(0,C.length,...C),l[5].scaling.splice(0,p.length,...p),l[1].maxActive=9,l[2].maxActive=9,l[3].maxActive=8,l[4].maxActive=10,l[5].maxActive=9,o("milestonesWelcome").innerHTML='For every reached Milestone, will earn <span class="greenText">Strange quarks</span> and maybe more';let A=D("#milestone1Stage2Div > img");a.milestonesInfo[2].name[0]="A Nebula of Drops",A.src=A.src.replace("Clouds.png","Drop.png"),A.alt="Drop of water";let T=D("#milestone2Stage5Div > img");T.src=T.src.replace("Galaxy%20Filaments.png","Galaxy.png"),T.alt="Galaxy",a.milestonesInfo[3].name[0]="Cluster of Mass",D("#historyMainDiv p").textContent="Intergalactic Stage resets:";for(let M of ie("vacuum"))M.style.display="none";for(let M=1;M<l.length;M++)for(let P=l[M].maxActive+1;P<=l[M].startCost.length;P++)o(`strange${P}Stage${M}`).style.display="none";o("rankStat0").style.display="",o("autoToggle8").style.display="none";for(let M=0;M<a.challengesInfo.name.length;M++)o(`challenge${M+1}`).style.display="none";D("#stageInput ~ span").style.display=""}for(let u=1;u<=3;u++){let g=e[u][0].current;e[u][0].total=k(g),e[u][0].trueTotal=k(g),e[u][0].highest=k(g)}},gt=async()=>{if(t.inflation.vacuum)return $("This cannot be undone");let{milestones:e}=t,s=0;if(e[1][0]>=5&&s++,e[2][1]>=4&&s++,e[3][1]>=5&&s++,e[4][1]>=5&&s++,e[5][1]>=8&&s++,s<5)return $(`Universe is still stable. Vacuum state is false. ${5-s} more`);!await q("This will not be possible to undo. Confirm?")||(await Me("Universe is too unstable. Vacuum instability is imminent"),t.inflation.vacuum=!0,t.stage.true<6&&(t.stage.true=6),t.stage.current=1,t.stage.active=1,ke(),dt())},mt=()=>{let{milestones:e}=t,s='<h4 class="darkvioletText">Unknown Structures:</h4>';e[1][0]>=5&&(s+='<img src="Used_art/Preon.png" alt="Unknown Structure" loading="lazy">'),e[2][1]>=4&&(s+='<img src="Used_art/Ocean.png" alt="Unknown Structure" loading="lazy">'),e[3][1]>=5&&(s+='<img src="Used_art/Subsatellite.png" alt="Unknown Structure" loading="lazy">'),e[4][1]>=5&&(s+='<img src="Used_art/Quasi%20star.png" alt="Unknown Structure" loading="lazy">'),e[5][1]>=8&&(s+='<img src="Used_art/Galaxy%20Filaments.png" alt="Unknown Structure" loading="lazy">');let r=o("unknownStructures");r.style.display=e[1][0]>=5||e[2][1]>=4||e[3][1]>=5||e[4][1]>=5||e[5][1]>=8?"":"none",r.innerHTML!==s&&(r.innerHTML=s)};var W=(e,s=null)=>{if(s===null){let r=a.tab;if(o(`${r}Tab`).style.display="none",o(`${r}TabBtn`).classList.remove("tabActive"),Object.hasOwn(a.subtab,`${r}Current`))for(let i of a.tabList[`${r}Subtabs`])o(`${r}SubtabBtn${i}`).style.display="none";a.tab=e;let n=0;if(o(`${e}Tab`).style.display="",o(`${e}TabBtn`).classList.add("tabActive"),Object.hasOwn(a.subtab,`${e}Current`))for(let i of a.tabList[`${e}Subtabs`])re(e,i)?(o(`${e}SubtabBtn${i}`).style.display="",n++):a.subtab[`${e}Current`]===i&&W(e,a.tabList[`${e}Subtabs`][0]);o("subtabs").style.display=n>1?"":"none",o("SRTab").textContent=`Current tab is '${e}'${n>1?` and subtab is '${a.subtab[`${e}Current`]}'`:""}`}else{let r=a.subtab[`${e}Current`];o(`${e}Subtab${r}`).style.display="none",o(`${e}SubtabBtn${r}`).classList.remove("tabActive"),a.subtab[`${e}Current`]=s,o(`${e}Subtab${s}`).style.display="",o(`${e}SubtabBtn${s}`).classList.add("tabActive"),a.screenReader&&(o("SRTab").textContent=`Current subtab is '${s}', part of '${e}' tab`)}if(a.lastActive!==null)ne(a.lastActive),a.lastActive=null;else if(e==="Elements"||e==="research"&&(a.subtab.researchCurrent==="Elements"||s==="Elements")){let r=t.stage.active;r!==4&&r!==5&&(a.lastActive=r,ne(4))}se(),G()},Ee=()=>t.stage.true>=6?28800+28800*t.researchesAuto[1]:(14400+14400*t.researchesAuto[1])*(1+.5*t.strangeness[2][7]),ye=()=>t.stage.true>=6?172800:86400*(1+t.strangeness[4][8]),He=()=>{let e;return t.inflation.vacuum?(e=t.strangeness[4][7]*2,t.strangeness[4][8]>=1&&(e+=t.stage.best/5)):(e=t.strangeness[4][7],t.stage.true>=6&&t.strangeness[4][8]>=1&&(e+=Math.floor(t.stage.best/5))),e},De=!1,Oe=(e=0)=>{let{toggles:s,inflation:r}=t,n;if(e>0){let u=Math.min(60,e);n=u,e-=u}else{let{time:u}=t;if(n=(Date.now()-u.updated)/1e3,u.updated=Date.now(),n<0){u.offline+=n;return}if(a.lastSave+=n,t.stage.export=Math.min(t.stage.export+n,ye()),u.offline>0&&(s.normal[0]||t.researchesAuto[0]<3)){let g=Math.min(Math.max(u.offline/3600,1)*n,u.offline);u.offline-=Math.min(g*(6-(t.stage.true>=6?t.strangeness[2][7]:0)),u.offline),n+=g}}let{buildingsInfo:i,automatization:l}=a;t.stage.time+=n,r.age+=n,pt(0,n),ae(),r.vacuum&&s.auto[0]&&he(5,!0);for(let u of a.stageInfo.activeAll){!r.vacuum&&s.auto[0]&&he(u,!0),u===4?(s.auto[4]&&rt(!0),l.elements.length!==0&&yt()):u===3?s.auto[3]&&st(!0):u===2?s.auto[2]&&tt(!0):u===1&&s.auto[1]&&ze("interval"),l.autoU[u].length!==0&&ht(u),l.autoR[u].length!==0&&et("researches",u),l.autoE[u].length!==0&&et("researchesExtra",u);for(let g=i.maxActive[u]-1;g>=1;g--)s.buildings[u][g]&&t.ASR[u]>=g&&be(g,u,!0),i.type[u][g]==="producing"&&pe(g-1,u,n);if(u===1)t.upgrades[1][8]===1&&pe(r.vacuum?5:3,1,n);else if(u===5){let g=t.researches[5][0];g>=1&&pe(1,5,n),g>=2&&pe(2,5,n),g>=3&&pe(3,5,n)}}if(t.strangeness[1][11]>=1){let{getEnergy:u,energyType:g}=a.dischargeInfo,c=0;for(let d=1;d<g.length;d++){let h=t.buildings[d];for(let b=1;b<g[d].length;b++)c+=u(b,d)*h[b].true}c!==t.discharge.energy&&(De||($("If you seeing this Alert, then report it on Discord, error code is 1 (also check console for numbers)"),De=!0),console.log(c,t.discharge.energy))}{let u=t.buildings[4][1].true+t.buildings[4][2].true+t.buildings[4][3].true+t.buildings[4][4].true+t.buildings[4][5].true;u!==a.collapseInfo.trueStars&&(De||($("If you seeing this Alert, then report it on Discord, error code is 2 (also check console for numbers)"),De=!0),console.log(u,a.collapseInfo.trueStars))}e>0&&Oe(e)},G=()=>{let{tab:e,subtab:s}=a,r=t.stage.active,n=t.buildings[r];if(a.footer&&(r===1?(o("footerStat1Span").textContent=f(n[0].current).format({padding:!0}),o("footerStat2Span").textContent=m(t.discharge.energy)):r===2?(o("footerStat1Span").textContent=f(t.vaporization.clouds).format(),o("footerStat2Span").textContent=t.inflation.vacuum?f(t.buildings[1][5].current).divide("6.02214076e23").format({padding:!0}):f(n[0].current).format({padding:!0}),o("footerStat3Span").textContent=f(n[1].current).format({padding:n[2].current[0]>0})):r===3?o("footerStat1Span").textContent=t.inflation.vacuum?f(t.buildings[1][0].current).multiply("1.78266192e-33").format({padding:!0}):f(n[0].current).format({padding:!0}):(r===4||r===5)&&(o("footerStat1Span").textContent=m(t.collapse.mass),o("footerStat2Span").textContent=f(t.buildings[4][0].current).format({padding:!0}),r===5&&(o("footerStat3Span").textContent=f(n[0].current).format()))),e==="stage")if(s.stageCurrent==="Structures"){let{buildingsInfo:i}=a,l=t.toggles.shop.howMany;for(let u=1;u<i.maxActive[r];u++){let g=o(`building${u}True`);if(Y(o(`building${u}Cur`),f(n[u].current).format({padding:g.style.display!=="none"})),o(`building${u}Prod`).textContent=f(i.producing[r][u]).format({padding:!0}),g.textContent=`[${m(n[u].true)}]`,r===4&&t.collapse.mass<a.collapseInfo.unlockB[u]||r===5&&t.collapse.mass<a.collapseInfo.unlockG[u]){o(`building${u}`).classList.remove("availableBuilding"),o(`building${u}Btn`).textContent=`Unlocked at ${m(a.collapseInfo[r===4?"unlockB":"unlockG"][u])} Mass`,o(`building${u}BuyX`).textContent="Locked";continue}let c,d;if(r===5&&u===3)c="Mass",d=t.collapse.mass;else{let x=u-1,S=r;r===2?u!==1&&(x=1):r>=3&&(x=0,r===5&&(S=4)),c=i.name[S][x],d=t.buildings[S][x].current}let h=1,b=$e(u,r);if(l!==1&&t.researchesAuto[0]>0){let x=i.increase[r][u],S=i.firstCost[r][u],w=n[u].true,B=f(x).power(w).minus("1").divide(x-1).multiply(S).toArray();if(l===-1||!t.toggles.shop.strict){let R=Math.floor(f(B).plus(d).multiply(x-1).divide(S).plus("1").log(10).divide(Math.log10(x)).toNumber())-w;R>1&&(h=l===-1?R:Math.min(R,l))}else h=l;h>1&&(b=f(x).power(h+w).minus("1").divide(x-1).multiply(S).minus(B).toArray())}o(`building${u}BuyX`).textContent=m(h),f(b).lessOrEqual(d)?(o(`building${u}`).classList.add("availableBuilding"),o(`building${u}Btn`).textContent=`Make for: ${f(b).format({padding:!0})} ${c}`):(o(`building${u}`).classList.remove("availableBuilding"),o(`building${u}Btn`).textContent=`Need: ${f(b).format({padding:!0})} ${c}`)}if(r===1){Fe();let u=o("dischargeEffect");u!==null&&(u.textContent=m(a.upgradesInfo[1].effect[5])),o("reset1Button").textContent=`Next goal is ${m(a.dischargeInfo.next)} Energy`}else if(r===2)fe(),o("reset1Button").textContent=`Reset for ${f(a.vaporizationInfo.get).format({padding:!0})} Clouds`;else if(r===4){let{collapse:u}=t,{collapseInfo:g}=a;Ce(),o("reset1Button").textContent=`Collapse to ${m(g.newMass,{padding:!0})} Mass`;for(let c=1;c<=3;c++)o(`starSpecial${c}Cur`).textContent=m(u.stars[c-1]),o(`starSpecial${c}Get`).textContent=m(g.starCheck[c-1])}if(t.time.offline>0&&(t.toggles.normal[0]||t.researchesAuto[0]<3)){let u=Math.max(t.time.offline/3600,1);o("offlineBoostEffect").textContent=`+${m(u*1,{digits:0})} seconds`,o("offlineBoostWaste").textContent=`${m(u*(6-(t.stage.true>=6?t.strangeness[2][7]:0)),{digits:0})} seconds`}a.lastUpgrade[0]&&U(a.lastUpgrade[1],t.stage.active,"upgrades")}else s.stageCurrent==="Advanced"&&(o("universeAge").textContent=m(t.inflation.age,{type:"time"}));else if(e==="research"||e==="Elements"){let i=e==="Elements"?e:s.researchCurrent;i==="Researches"?a.lastResearch[0]&&U(a.lastResearch[1],t.stage.active,a.lastResearch[2]):i==="Elements"&&a.lastElement[0]&&U(a.lastElement[1],4,"elements")}else if(e==="strangeness")s.strangenessCurrent==="Matter"&&(t.challenges.active===-1&&(o("strangeGain").textContent=m(a.strangeInfo.gain(r)/100**t.strangeness[5][9])),o("strangeBoost").textContent=a.strangeInfo.stageBoost[r]!==null?m(a.strangeInfo.stageBoost[r]):"none",o("strange0Cur").textContent=m(t.strange[0].current),o("strange1Cur").textContent=m(t.strange[1].current));else if(e==="settings"){if(s.settingsCurrent==="Settings")Y(o("exportGain"),m(t.stage.export*He()/86400/100**t.strangeness[5][9],{padding:!0})),a.lastSave>=1&&(o("isSaved").textContent=`${m(a.lastSave,{type:"time"})} ago`);else if(s.settingsCurrent==="History")o("stageTime").textContent=m(t.stage.time,{type:"time"});else if(s.settingsCurrent==="Stats"){if(o("firstPlay").textContent=a.timeMode?`${m((Date.now()-t.time.started)/1e3,{type:"time"})} ago`:new Date(t.time.started).toLocaleString(),o("stageResetsCount").textContent=m(t.stage.resets),o("stageBestGain").textContent=m(t.stage.best),o("offlineStat").textContent=m(t.time.offline,{type:"time"}),o("maxOfflineStat").textContent=m(Ee(),{type:"time"}),o("maxExportStat").textContent=m(He()*ye()/86400/100**t.strangeness[5][9]),r===1)o("maxEnergyStat").textContent=m(t.discharge.energyMax),o("dischargeStat").textContent=m(t.discharge.current),o("dischargeStatBonus").textContent=`[+${m(a.dischargeInfo.bonus)}]`,t.inflation.vacuum&&Y(o("preonCapStat"),f(a.inflationInfo.preonCap).format({padding:!0}));else if(r===2){if(o("maxCloudsStat").textContent=f(t.vaporization.cloudsMax).format(),t.inflation.vacuum){let i=t.buildings[1][5];n[0].trueTotal=f(i.trueTotal).divide("6.02214076e23").toArray(),n[0].highest=f(i.highest).divide("6.02214076e23").toArray()}}else if(r===3){if(o("effectiveRank").textContent=m(a.accretionInfo.effective),t.inflation.vacuum){let i=t.buildings[1][0];n[0].total=f(i.total).multiply("1.78266192e-33").toArray(),n[0].trueTotal=f(i.trueTotal).multiply("1.78266192e-33").toArray(),n[0].highest=f(i.highest).multiply("1.78266192e-33").toArray(),Y(o("dustCapStat"),f(a.inflationInfo.dustCap).format({padding:!0})),o("massShiftMin").textContent=m(qe()),o("massShiftMax").textContent=m(ve())}}else if(r===4||r===5){if(o("maxSolarMassStat").textContent=m(t.collapse.massMax),t.inflation.vacuum&&(Ce(),Y(o("mainCapStat"),f(a.buildingsInfo.producing[1][1]).multiply("8.96499278339628e-67",a.inflationInfo.massCap).format({padding:!0})),o("mainCapLimit").textContent=m(a.inflationInfo.massCap,{type:"time"})),r===4){let{starEffect:i,massEffect:l}=a.collapseInfo,u=l();Y(o("starMassStatCurrent"),m(u,{padding:!0})),Y(o("starMassStatAfter"),`x${m(l(!0)/u,{padding:!0})}`);for(let g=0;g<=2;g++){let c=i[g]();Y(o(`star${g+1}StatCurrent`),m(c,{padding:!0})),Y(o(`star${g+1}StatAfter`),`x${m(i[g](!0)/c,{padding:!0})}`)}}else if(r===5){o("starsStatTrue").textContent=m(a.collapseInfo.trueStars);let i=t.buildings[4];n[0].total=f(i[1].total).plus(i[2].total,i[3].total,i[4].total,i[5].total).toArray(),n[0].trueTotal=f(i[1].trueTotal).plus(i[2].trueTotal,i[3].trueTotal,i[4].trueTotal,i[5].trueTotal).toArray(),n[0].highest=f(i[1].highest).plus(i[2].highest,i[3].highest,i[4].highest,i[5].highest).toArray()}}for(let i=0;i<n.length;i++)o(`building${i}StatTotal`).textContent=f(n[i].total).format(),o(`building${i}StatTrueTotal`).textContent=f(n[i].trueTotal).format(),o(`building${i}StatHighest`).textContent=f(n[i].highest).format();for(let i=0;i<t.strange.length;i++)o(`strange${i}StatTotal`).textContent=m(t.strange[i].total)}}},se=()=>{let{tab:e,subtab:s}=a,r=t.stage.active;if(a.mobileDevice&&a.footer){let n=o("footerStats");n.style.justifyContent=n.scrollWidth>n.clientWidth?"start":""}if(r===1?(a.footer&&(o("footerStat2").style.display=t.discharge.unlock?"":"none",t.stage.resets<1&&(o("researchTabBtn").style.display=t.discharge.current>=4?"":"none")),!t.events[0]&&t.upgrades[1][6]===1&&te(0,0)):r===2?(a.footer&&(o("footerStat1").style.display=t.upgrades[2][1]===1?"":"none"),t.events[0]||(fe(),f(a.vaporizationInfo.get).plus(t.vaporization.clouds).moreThan("1e4")&&te(1,0))):r===3?!t.events[0]&&f(t.buildings[3][0].current).moreOrEqual("5e29")&&te(2,0):r===4&&!t.events[0]&&t.researchesExtra[4][0]>=1&&te(3,0),e==="stage")if(s.stageCurrent==="Structures"){let n=t.buildings[r],i=t.researchesAuto[0],l=t.ASR[r];if(!t.inflation.vacuum){let u=r>=4?"Return back to start":r===t.stage.current?"Enter next Stage":"Reset this Stage",g=(r>=4?t.strange[0].total===0:r===t.stage.current)?"Not ready for more":"Not ready for reset";o("stageReset").textContent=(r>=4?t.events[1]&&t.stage.current>=5:he(r))?u:g}o("toggleBuy").style.display=i>=1?"":"none",o("toggleBuilding0").style.display=i>=2?"":"none",o("offlineBoost").style.display=t.time.offline>0&&(t.toggles.normal[0]||t.researchesAuto[0]<3)?"":"none";for(let u=1;u<a.buildingsInfo.maxActive[r];u++)o(`building${u}True`).style.display=f(n[u].current).notEqual(n[u].true)?"":"none",o(`toggleBuilding${u}`).style.display=l>=u?"":"none",o(`building${u}BuyDiv`).style.display=i>0?"":"none";if(r===1){let u=t.discharge.current;o("reset1Main").style.display=t.upgrades[1][5]===1?"":"none",o("building2").style.display=f(n[1].trueTotal).moreOrEqual(t.inflation.vacuum?"4":"11")?"":"none",o("building3").style.display=f(n[2].trueTotal).moreOrEqual("2")?"":"none",t.inflation.vacuum&&(o("building4").style.display=f(n[3].trueTotal).moreOrEqual("8")?"":"none",o("building5").style.display=f(n[4].trueTotal).moreOrEqual("2")?"":"none"),o("upgrades").style.display=t.discharge.unlock?"":"none",o("upgrade7").style.display=u>=3?"":"none",o("upgrade8").style.display=u>=3?"":"none",o("upgrade9").style.display=u>=3?"":"none",o("upgrade10").style.display=u>=3?"":"none",t.stage.true<2&&(o("resetStage").style.display=t.upgrades[1][9]===1?"":"none")}else if(r===2)o("reset1Main").style.display=t.upgrades[2][1]===1?"":"none",o("building2").style.display=f(n[1].trueTotal).moreOrEqual("300")?"":"none",o("building3").style.display=f(n[1].trueTotal).moreOrEqual("2e6")?"":"none",o("building4").style.display=f(n[1].trueTotal).moreOrEqual("2e17")?"":"none",o("building5").style.display=f(n[1].trueTotal).moreOrEqual("2e22")?"":"none",o("upgrade2").style.display=n[3].trueTotal[0]>0?"":"none",o("upgrade3").style.display=n[2].trueTotal[0]>0?"":"none",o("upgrade4").style.display=n[2].trueTotal[0]>0?"":"none",o("upgrade5").style.display=n[3].trueTotal[0]>0?"":"none",o("upgrade6").style.display=n[4].trueTotal[0]>0?"":"none",o("upgrade7").style.display=n[5].trueTotal[0]>0&&t.strangeness[2][2]>=3?"":"none",t.inflation.vacuum&&(o("building6").style.display=t.strangeness[2][9]>=1&&f(n[1].trueTotal).moreOrEqual("4e24")?"":"none",o("upgrade8").style.display=n[6].trueTotal[0]>0&&t.strangeness[2][9]>=2?"":"none");else if(r===3){let u=t.upgrades[3];o("building2").style.display=u[2]===1?"":"none",o("building3").style.display=u[4]===1?"":"none",o("building4").style.display=u[6]===1?"":"none",t.inflation.vacuum&&(o("building5").style.display=u[6]===1&&t.strangeness[3][8]>=1&&t.accretion.rank>=5?"":"none"),o("upgrade4").style.display=n[2].trueTotal[0]>0?"":"none",u[4]===1&&(o("upgrade6").style.display=""),o("upgrade9").style.display=t.accretion.rank>=4&&t.strangeness[3][2]>=3?"":"none"}else if(r===4){let u=t.upgrades[4],g=t.researchesExtra[4][0];o("starsSpecial").style.display=g>=1?"":"none",o("starSpecial2").style.display=g>=2?"":"none",o("starSpecial3").style.display=g>=3?"":"none",o("reset1Main").style.display=u[0]===1?"":"none",t.inflation.vacuum?o("building5").style.display=t.strangeness[4][10]>=1?"":"none":(o("building2").style.display=u[1]===1?"":"none",o("building3").style.display=u[2]===1?"":"none",o("building4").style.display=t.collapse.mass>=10||t.buildings[5][3].true>0?"":"none"),o("upgrade4").style.display=t.strangeness[4][2]>=1?"":"none"}else if(r===5){if(t.inflation.vacuum)o("building4").style.display="none";else{let u=t.milestones[2][0]>=3,g=t.milestones[3][0]>=3;o("buildings").style.display=u||g?"":"none",o("building1").style.display=u?"":"none",o("building2").style.display=g?"":"none",o("upgrades").style.display=u||g?"":"none",o("upgrade1").style.display=u?"":"none",o("upgrade2").style.display=g?"":"none"}o("building3").style.display=t.strangeness[5][6]>=1?"":"none",o("upgrade3").style.display=n[3].true>=1?"":"none"}}else s.stageCurrent==="Advanced"&&t.inflation.vacuum&&(o("challenge1").style.display=t.strangeness[5][0]>=1?"":"none");else if(e==="research"||e==="Elements"){let n=e==="Elements"?e:s.researchCurrent;if(n==="Researches")if(o("researchAuto3").style.display=t.strangeness[3][6]>=1?"":"none",r===1)t.inflation.vacuum&&(o("extraResearch").style.display=t.discharge.current>=5?"":"none",o("researchExtra2").style.display=t.researchesExtra[1][2]>=2?"":"none",o("researchExtra4").style.display=t.researchesExtra[1][2]>=1?"":"none",o("researchExtra5").style.display=t.accretion.rank>=6?"":"none");else if(r===2){let i=t.buildings[2];o("extraResearch").style.display=f(t.vaporization.clouds).moreThan("1")?"":"none",o("research3").style.display=i[2].trueTotal[0]>0?"":"none",o("research4").style.display=i[2].trueTotal[0]>0?"":"none",o("research5").style.display=i[3].trueTotal[0]>0?"":"none",o("research6").style.display=i[4].trueTotal[0]>0?"":"none",o("researchExtra3").style.display=i[5].trueTotal[0]>0?"":"none"}else r===3?(t.upgrades[3][4]===1&&(o("research6").style.display=""),o("research3").style.display=t.buildings[3][2].trueTotal[0]>0?"":"none",o("research4").style.display=t.buildings[3][2].trueTotal[0]>0?"":"none",t.inflation.vacuum&&(o("researchExtra5").style.display=t.accretion.rank>=3&&t.researchesExtra[1][2]>=2?"":"none")):r===4?(o("research4").style.display=t.strangeness[4][2]>=2?"":"none",o("extraResearch").style.display=t.buildings[4][2].trueTotal[0]>0?"":"none",o("researchExtra2").style.display=t.strangeness[4][2]>=3?"":"none"):r===5&&(t.inflation.vacuum||(o("stageResearch").style.display=t.milestones[2][0]>=3||t.milestones[3][0]>=3?"":"none",o("research1").style.display=t.milestones[2][0]>=3?"":"none",o("research2").style.display=t.milestones[3][0]>=3?"":"none"));else if(n==="Elements"){let i=t.collapse.mass>=10||t.buildings[5][3].true>0,l=t.upgrades[4],u=o("elementsGrid");u.style.display=l[2]===1?"":"flex";for(let g=6;g<=10;g++)o(`element${g}`).style.display=l[2]===1?"":"none";l[2]===1&&!i?u.classList.add("Elements10App"):u.classList.remove("Elements10App");for(let g=11;g<=26;g++)o(`element${g}`).style.display=i?"":"none";o("element27").style.display=l[3]===1?"":"none",o("element28").style.display=l[3]===1?"":"none"}}else if(e==="strangeness")if(s.strangenessCurrent==="Matter"){let n=t.inflation.vacuum,i=t.strangeness[5][5]>=1;o("strange1").style.display=t.strangeness[5][9]>=1?"":"none";let l=o("strangeGainType");if(t.challenges.active===-1?(l.style.display="",l.textContent=a.strangeInfo.strangeName[t.strangeness[5][9]]):(l.style.display="none",o("strangeGain").textContent="disabled"),o("strange4Stage5").style.display=(n?i:t.milestones[2][0]>=3)?"":"none",o("strange5Stage5").style.display=(n?i:t.milestones[3][0]>=3)?"":"none",o("strange8Stage5").style.display=(n?i:t.milestones[2][0]>=3||t.milestones[3][0]>=3)?"":"none",o("strange7Stage5").style.display=i?"":"none",n){let u=t.challenges.void;o("strange10Stage1").style.display=u[1]>=1?"":"none",o("strange11Stage1").style.display=u[1]>=4?"":"none",o("strange12Stage1").style.display=u[4]>=2?"":"none",o("strange11Stage2").style.display=u[2]>=3?"":"none",o("strange11Stage3").style.display=u[1]>=2?"":"none",o("strange12Stage3").style.display=u[1]>=3?"":"none",o("strange12Stage4").style.display=u[4]>=3?"":"none",o("strange9Stage5").style.display=u[4]>=1?"":"none",o("strange10Stage5").style.display=u[3]>=5?"":"none"}else{let u=t.milestones[4][0]>=3;o("strangeBoostMain").style.display=u?"":"none",o("strange9Stage1").style.display=u?"":"none",o("strange8Stage2").style.display=u?"":"none",o("strange9Stage2").style.display=u?"":"none",o("strange8Stage3").style.display=u?"":"none",o("strange9Stage4").style.display=u?"":"none",o("strange10Stage4").style.display=u?"":"none",o("strangenessSection5").style.display=u?"":"none",o("strange6Stage5").style.display=t.milestones[2][0]>=3||t.milestones[3][0]>=3?"":"none"}}else s.strangenessCurrent==="Milestones"&&(t.inflation.vacuum?o("milestone2Stage5Div").style.display="none":(o("milestone1Stage5Div").style.display=t.strangeness[5][8]>=1?"":"none",o("milestone2Stage5Div").style.display=t.strangeness[5][8]>=1&&t.strangeness[5][6]>=1?"":"none"));else if(e==="settings"){if(s.settingsCurrent==="Settings"){let{stage:n,researchesAuto:i,strangeness:l}=t;o("toggleAuto0").style.display=l[5][2]>=1?"":"none",o("toggleAuto0Mark").style.display=l[5][2]>=1?"":"none",o("exportSpecial").style.display=l[4][7]>=1?"":"none",o("exportType").textContent=a.strangeInfo.strangeName[l[5][9]],t.inflation.vacuum&&(n.resets<1&&n.current<5&&(o("stageToggleReset").style.display="none",o("stageSwitchHotkey").style.display="none"),o("autoToggle8").style.display=l[4][4]>=1?"":"none"),o("allStructuresHotkey").style.display=i[0]>=2?"":"none",o("toggle0").style.display=i[0]>=3?"":"none",o("offlineHotkey").style.display=i[0]>=3?"":"none",o("autoToggle5").style.display=i[2]>=1?"":"none",o("autoToggle6").style.display=i[2]>=2?"":"none",o("autoToggle7").style.display=i[2]>=3?"":"none",o("toggleAuto1").style.display=l[1][3]>=1?"":"none",o("toggleAuto2").style.display=l[2][4]>=1?"":"none",o("toggleAuto2Mark").style.display=l[2][4]>=1?"":"none",o("toggleAuto3").style.display=l[3][4]>=1?"":"none",o("toggleAuto3Mark").style.display=l[3][9]>=1?"":"none",o("toggleAuto4").style.display=l[4][5]>=1?"":"none",o("toggleAuto4Mark").style.display=l[4][5]>=1?"":"none",n.true<2&&(o("resetToggles").style.display=t.discharge.current>=1?"":"none"),n.true<3&&(o("vaporizationToggleReset").style.display=f(t.vaporization.clouds).moreThan("1")?"":"none"),n.true<5&&(o("collapseToggleReset").style.display=t.collapse.mass>.01235?"":"none")}else if(s.settingsCurrent==="History"){let n=t.history.stage.best;o("stageBestReset1").textContent=`${m(n[0])} ${a.strangeInfo.strangeName[n[2]]}`,o("stageBestReset2").textContent=m(n[1],{type:"time"}),o("stageBestReset3").textContent=`${m(n[0]/n[1],{padding:!0})} per second`,Rt()}else if(s.settingsCurrent==="Stats"){let n=t.buildings[r];o("maxExportStats").style.display=t.strangeness[4][7]>=1?"":"none",o("maxExportType").textContent=a.strangeInfo.strangeName[t.strangeness[5][9]],o("stageBestType").textContent=t.strangeness[5][9]>=1?"True value":"Strange quarks",o("stageResets").style.display=t.stage.resets>0?"":"none";for(let i=1;i<a.buildingsInfo.maxActive[r];i++)o(`building${i}Stats`).style.display=n[i].trueTotal[0]>0?"":"none";for(let i=1;i<t.strange.length;i++)o(`strange${i}Stats`).style.display=t.strange[i].total>0?"":"none";if(t.inflation.vacuum||mt(),r===1)o("energyStats").style.display=t.discharge.unlock?"":"none",o("dischargeStats").style.display=t.discharge.current+a.dischargeInfo.bonus>0?"":"none",o("dischargeStatBonus").style.display=a.dischargeInfo.bonus>0?"":"none";else if(r===2)o("cloudsStats").style.display=t.upgrades[2][1]===1?"":"none";else if(r===3)t.inflation.vacuum&&(o("rankStat0").style.display=t.researchesExtra[2][3]>=1?"":"none",o("massShift").style.display=qe()!==ve()?"":"none");else if(r===4){let i=t.researchesExtra[4][0];o("star1Stats").style.display=i>=1?"":"none",o("star2Stats").style.display=i>=2?"":"none",o("star3Stats").style.display=i>=3?"":"none"}}}},U=(e,s,r)=>{if(r==="upgrades"){let n=a.upgradesInfo[s];a.lastUpgrade=[n.effect[e]!==null,e],o("upgradeText").textContent=`${n.name[e]}.`,o("upgradeEffect").textContent=n.effectText[e](),o("upgradeCost").textContent=t.upgrades[s][e]>=1?"Created.":s===4&&a.collapseInfo.unlockU[e]>t.collapse.mass?`Unlocked at ${m(a.collapseInfo.unlockU[e])} Mass.`:`${m(n.startCost[e])} ${a.stageInfo.priceName}.`}else if(r==="researches"||r==="researchesExtra"){let n=a[`${r}Info`][s];a.lastResearch=[n.effect[e]!==null,e,r],o("researchText").textContent=`${n.name[e]}.`,o("researchEffect").textContent=n.effectText[e](),o("researchCost").textContent=t[r][s][e]>=n.max[e]?"Maxed.":s===4&&r==="researches"&&a.collapseInfo.unlockR[e]>t.collapse.mass?`Unlocked at ${m(a.collapseInfo.unlockR[e])} Mass.`:`${m(n.cost[e])} ${a.stageInfo.priceName}.`}else if(r==="researchesAuto"){let{researchesAutoInfo:n}=a;a.lastResearch=[!1,e,r],o("researchText").textContent=`${n.name[e]}.`,o("researchEffect").textContent=n.effectText[e](),o("researchCost").textContent=t.researchesAuto[e]>=n.max[e]?"Maxed.":s!==n.autoStage[e]?`Can't be created outside of ${a.stageInfo.word[n.autoStage[e]]} stage.`:`${m(n.cost[e])} ${a.stageInfo.priceName}.`}else if(r==="ASR"){let{ASRInfo:n}=a,i=Math.min(t.ASR[s]+1,n.max[s]);a.lastResearch=[!1,e,r],o("researchText").textContent="Structure Automation.",o("researchEffect").textContent=`Will automatically make ${t.buildings[s][i].trueTotal[0]===0?"(unknown)":a.buildingsInfo.name[s][i]}.
(Auto will make them, only when have 2 times of the Structure cost)`,o("researchCost").textContent=t.ASR[s]>=n.max[s]?"Maxed.":`${m(n.cost[s])} ${a.stageInfo.priceName}.`}else if(r==="elements"){let{elementsInfo:n}=a;a.lastElement=[n.effect[e]!==null,e],o("elementText").textContent=`${n.name[e]}.`,o("elementEffect").textContent=t.collapse.show.includes(e)?n.effectText[e]():"Effect is not yet known.",o("elementCost").textContent=t.elements[e]>=1?"Obtained.":`${m(n.startCost[e])} ${a.stageInfo.priceName}.`}else if(r==="strangeness"||r==="milestones"){let n=o(`${r}Stage`);if(n.style.color=a.stageInfo.textColor[s],n.textContent=`${a.stageInfo.word[s]}. `,r==="strangeness"){let i=a.strangenessInfo[s];o("strangenessText").textContent=`${i.name[e]}.`,o("strangenessEffect").textContent=i.effectText[e](),o("strangenessCost").textContent=t.strangeness[s][e]>=i.max[e]?"Maxed.":`${m(i.cost[e])} Strange quarks.`}else{let i=a.milestonesInfo[s];o("milestonesText").textContent=`${i.name[e]}.`,t.inflation.vacuum?o("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${i.needText[e]()}</span></p>
                <p class="darkvioletText">Effect: <span class="greenText">${i.rewardText[e]()}</span></p>`:i.need[e][0]!==0?o("milestonesMultiline").innerHTML=`<p class="orchidText">Requirement: <span class="greenText">${i.needText[e]()}</span></p>
                <p class="darkvioletText">Reward: <span class="greenText">${m(i.reward[e])} Strange quarks for reaching this Milestone.</span></p>
                <p class="darkvioletText">Unlocks: <span class="greenText">${t.milestones[s][e]>=i.unlock[e]?i.rewardText[e]():`Additional reward unlocked after ${i.unlock[e]-t.milestones[s][e]} more completions.`}</span></p>`:o("milestonesMultiline").innerHTML=`<p class="darkvioletText">Unlocks: <span class="greenText">${i.rewardText[e]()}</span></p>`}}},le=e=>{let s;if(e===-1)s=`<h3 class="orchidText">Vacuum state: <span ${t.inflation.vacuum?'class="greenText">true':'class="redText">false'}</span></h3>`;else{let{challengesInfo:r}=a,n=r.color[e];s=`<h3 class="${n} bigWord">${r.name[e]}${t.challenges.active===e?', <span class="greenText">active</span>':""}</h3>
        <p class="whiteText">${r.description[e]}</p>
        <div><h4 class="${n} bigWord">Effect:</h4>
        <p>${r.effectText[e]()}</p></div>`}o("challengeMultiline").innerHTML=s},J=(e,s,r)=>{if(r==="upgrades"){if(s!==t.stage.active)return;let n="green";s===2?n="darkgreen":s===3?n="#0000b1":s===4?n="#1f1f8f":s===5&&(n="#990000"),o(`upgrade${e+1}`).style.backgroundColor=t.upgrades[s][e]>=1?n:""}else{let n="#0000c1";[0,1,2,3,4,11,12,19,20].includes(e)?n="#780000":(e>=5&&e<=10||e>=13&&e<=18)&&(n="#a55900"),o(`element${e}`).style.backgroundColor=t.elements[e]>=1?n:""}},V=(e,s,r)=>{let n,i,l;if(r==="researches"||r==="researchesExtra"){if(s!==t.stage.active)return;n=a[`${r}Info`][s].max[e],i=t[r][s][e];let u=r==="researchesExtra"?"Extra":"";l=o(`research${u}${e+1}Level`),o(`research${u}${e+1}Max`).textContent=`${n}`}else if(r==="researchesAuto")n=a.researchesAutoInfo.max[e],i=t.researchesAuto[e],l=o(`researchAuto${e+1}Level`),o(`researchAuto${e+1}Max`).textContent=`${n}`;else if(r==="ASR"){if(s!==t.stage.active)return;n=a.ASRInfo.max[s],i=t.ASR[s],l=o("ASRLevel"),o("ASRMax").textContent=`${n}`}else n=a.strangenessInfo[s].max[e],i=t.strangeness[s][e],l=o(`strange${e+1}Stage${s}Level`),o(`strange${e+1}Stage${s}Max`).textContent=`${n}`;l.textContent=`${i}`,i>=n?l.style.color="var(--green-text-color)":i===0?l.style.color="":l.style.color="var(--orchid-text-color)"},Rt=()=>{let e=a.historyStorage.stage,s="";if(e.length>0)for(let n=0;n<e.length;n++)s+=`<li class="whiteText"><span class="greenText">${m(e[n][0])} ${a.strangeInfo.strangeName[e[n][2]]}</span>, <span class="blueText">${m(e[n][1],{type:"time"})}</span>, <span class="darkorchidText">${m(e[n][0]/e[n][1],{padding:!0})} per second</span></li>`;else s='<li class="redText">Reference list is empty</li>';let r=o("stageResetsList");r.innerHTML!==s&&(r.innerHTML=s)},m=(e,s={})=>{if(typeof e!="number")return f(e).format(s);let r=s.type!==void 0?s.type:"number";switch(r){case"input":case"number":{if(!isFinite(e))return`${e}`;let n=Math.abs(e);if(n>=1e6||n<.001&&n>0){let i=Math.floor(Math.log10(n)),l=Math.round(e/10**(i-2))/100;Math.abs(l)===10&&(l=1,i++);let u=s.padding===!0?l.toFixed(2):`${l}`;return r==="input"?`${u}e${i}`:`${u.replace(".",t.separator[1])}e${i}`}else{let i=n>=1e3||s.digits===0?0:n<1?4:2,l=Math.round(e*10**i)/10**i,u=s.padding===!0&&i>0?l.toFixed(i):`${l}`;return r==="input"?u:l>=1e3?u.replace(/\B(?=(\d{3})+(?!\d))/,t.separator[0]):u.replace(".",t.separator[1])}}case"time":return e>=864e5?`${Math.round(e/31556952)} years`:e>=36e5?`${Math.round(e/86400)} days`:e>=6e4?`${Math.round(e/3600)} hours`:e>=1e3?`${Math.round(e/60)} minutes`:`${Math.round(e)} seconds`}},_=(e="normal")=>{let{stageInfo:s,buildingsInfo:r}=a,{active:n,current:i,true:l,resets:u}=t.stage,g=t.inflation.vacuum;s.activeAll=[g?1:i];let c=s.activeAll;if(g)t.researchesExtra[1][2]>=2&&c.push(2),t.researchesExtra[1][2]>=1&&c.push(3),t.accretion.rank>=6&&(c.push(4),t.strangeness[5][5]>=1&&c.push(5));else{i===4?t.milestones[5][0]>=4&&c.push(5):i===5&&c.unshift(4);for(let p=t.strangeness[5][0];p>=1;p--)i!==p&&c.unshift(p)}for(let p=1;p<=6;p++){for(let A of ie(`stage${p}Only`))A.style.display=n===p?"":"none";for(let A of ie(`stage${p}Include`))A.style.display=c.includes(p)?"":"none";for(let A of ie(`stage${p}Unlock`))A.style.display=l>=p?"":"none"}if(o("solarMassStats").style.display=n===4||n===5?"":"none",o("stageSelect").style.display=c.length>1?"":"none",t.strange[0].total===0&&(o("strangenessTabBtn").style.display="none",o("strangeAllStats").style.display="none",o("stageBest").style.display="none"),g){o("stageReset").textContent=t.challenges.active!==-1?"Leave all Challenges":i>=5?"Return back to start":"Not ready for reset",u<1&&(i<5&&(o("resetStage").style.display="none"),i<3&&(o("researchAuto2").style.display="none"));for(let p of["discharge","vaporization","rank","collapse"])u>0&&(o(`${p}ToggleReset`).style.display="")}else{for(let p=2;p<=4;p++)o(`strangenessSection${p}`).style.display=u>=p+3?"":"none",o(`milestone1Stage${p}Div`).style.display=u>=p+3?"":"none",o(`milestone2Stage${p}Div`).style.display=u>=p+3?"":"none";n===1?o("preonCap").style.display="none":n===3?(o("dustCap").style.display="none",o("massShift").style.display="none"):n===4&&(o("mainCap").style.display="none")}let d=o("stageWord");if(d.textContent=s.word[i],d.style.color=s.textColor[i],e==="soft"){G(),se();return}for(let p of["upgrade","research","element"])o(`${p}Text`).textContent="Hover to see.",o(`${p}Effect`).textContent="Hover to see.",o(`${p}Cost`).textContent="Resource.";if(e==="reload"){for(let p of["strangeness","milestones"])o(`${p}Stage`).textContent="",o(`${p}Text`).textContent="Hover to see.";o("strangenessEffect").textContent="Hover to see.",o("strangenessCost").textContent="Strange quarks.",o("milestonesMultiline").innerHTML='<p class="orchidText">Requirement: <span class="greenText">Hover to see.</span></p><p class="darkvioletText">Reward: <span class="greenText">Hover to see.</span></p>',le(-1),a.lastActive=null;for(let p=0;p<a.elementsInfo.startCost.length;p++)J(p,4,"elements");ae(),ce("all"),Q("researches","all"),Q("researchesExtra","all"),ue()}a.lastUpgrade[0]=!1,a.lastResearch[0]=!1,a.lastResearch[1]=-1,a.lastElement[0]=!1;for(let p=r.maxActive[n];p<N.longestBuilding;p++)o(`building${p}Stats`).style.display="none",o(`building${p}`).style.display="none";for(let p=a.upgradesInfo[n].maxActive;p<N.longestUpgrade;p++)o(`upgrade${p+1}`).style.display="none";for(let p=a.researchesInfo[n].maxActive;p<N.longestResearch;p++)o(`research${p+1}`).style.display="none";for(let p=a.researchesExtraInfo[n].maxActive;p<N.longestResearchExtra;p++)o(`researchExtra${p+1}`).style.display="none";for(let p=N.footerStatsHTML[n].length;p<N.longestFooterStats;p++)o(`footerStat${p+1}`).style.display="none";let h=[],b=[],x=[],S=[];n===1?(h.push(3,4,5,6),b.push(1,2,3,4,5,6),S.push(1,2),g?(h.unshift(1,2),x.push(1,3)):(o("upgrade1").style.display="none",o("upgrade2").style.display="none",o("extraResearch").style.display="none")):n===2?(h.push(1),b.push(1,2),x.push(1,2),S.push(2,3),g&&x.push(4)):n===3?(o("reset1Main").style.display="",h.push(1,2),b.push(1,2),x.push(1),S.push(1)):n===4?(h.push(1,2,3),b.push(1,2,3),x.push(1),S.push(1,2),g&&(o("building2").style.display="",o("building3").style.display="",o("building4").style.display="")):n===5&&(o("reset1Main").style.display="none",o("extraResearch").style.display="none",S.push(1,2,3),g&&(o("building2").style.display="",h.push(1,2),b.push(1,2))),o("reset1Text").innerHTML=N.resetHTML[n],n===3&&Ie();let w=N.buildingHTML[n];for(let p=1;p<r.maxActive[n];p++){let A=o(`building${p}Image`);A.src=`Used_art/${w[p-1][0]}`,A.alt=w[p-1][1],o(`building${p}StatName`).textContent=r.name[n][p],o(`building${p}Name`).textContent=r.name[n][p],o(`building${p}Type`).textContent=r.type[n][p],z(p,"buildings")}o("building0StatName").textContent=r.name[n][0],z(0,"buildings");let B=N.upgradeHTML[n];for(let p=0;p<a.upgradesInfo[n].maxActive;p++){let A=o(`upgrade${p+1}`);h.includes(p+1)&&(A.style.display=""),A.src=`Used_art/${B[p][0]}`,A.alt=B[p][1],J(p,n,"upgrades")}let R=N.researchHTML[n];for(let p=0;p<a.researchesInfo[n].maxActive;p++){let A=o(`research${p+1}`);b.includes(p+1)&&(A.style.display=""),A.className=R[p][2];let T=o(`research${p+1}Image`);T.src=`Used_art/${R[p][0]}`,T.alt=R[p][1],V(p,n,"researches")}if(n!==5){let p=N.researchExtraHTML[n];for(let M=0;M<a.researchesExtraInfo[n].maxActive;M++){let P=o(`researchExtra${M+1}`);x.includes(M+1)&&(P.style.display=""),P.className=p[M][2];let L=o(`researchExtra${M+1}Image`);L.src=`Used_art/${p[M][0]}`,L.alt=p[M][1],V(M,n,"researchesExtra")}let A=N.researchExtraDivHTML[n],T=D("#extraResearch > img");T.src=`Used_art/${A[0]}`,T.alt=A[1],D("#extraResearch > div").className=A[2]}V(0,n,"ASR");let E=N.footerStatsHTML[n];for(let p=0;p<E.length;p++){S.includes(p+1)&&(o(`footerStat${p+1}`).style.display="");let A=D(`#footerStat${p+1} > img`);A.src=`Used_art/${E[p][0]}`,A.alt=E[p][1],D(`#footerStat${p+1} > p`).className=E[p][2],o(`footerStat${p+1}Name`).textContent=E[p][3]}s.priceName=["","Energy","Drops","Mass","Elements","Elements"][n];let C=document.body.style;n===1?(C.removeProperty("--stage-text-color"),C.removeProperty("--stage-button-color"),C.removeProperty("--stage-button-border"),C.removeProperty("--image-border-main"),C.removeProperty("--image-stage-outer")):(C.setProperty("--stage-text-color",s.textColor[n]),C.setProperty("--stage-button-color",s.buttonBackgroundColor[n]),C.setProperty("--stage-button-border",s.buttonBorderColor[n]),C.setProperty("--image-border-main",`url(Used_art/Stage${n}%20border.png)`),C.setProperty("--image-stage-outer",s.imageBorderColor[n])),o("currentSwitch").textContent=s.word[n],a.lastActive===null&&W(re(a.tab)?a.tab:"stage"),Je(),a.screenReader&&(o("SRTab").textContent=`Current Active Stage is '${s.word[n]}'${e==="reload"&&t.challenges.active!==0?`, also inside '${a.challengesInfo.name[t.challenges.active-1]}' challenge`:""}`)},Ie=()=>{let e=o("rankImage"),s=o("rankName"),{accretionInfo:r}=a,n=t.accretion.rank;if(e!==null){o("rankMessage").textContent=n===0?"Might need more than just water... Increase Rank with Mass.":`Increase it with Mass. (Return back to ${t.inflation.vacuum?"Preons":"Dust"}, but unlock something new)`,o("reset1Button").textContent=r.rankCost[n]===0?"Max Rank achieved":`Next Rank is ${m(r.rankCost[n])} Mass`,e.src=`Used_art/${r.rankImage[n]}`,e.alt=r.rankName[n],s.textContent=r.rankName[n],n===0?s.style.color="":n===1?s.style.color="var(--cyan-text-color)":n===5?s.style.color="var(--darkviolet-text-color)":n===6?s.style.color="var(--orange-text-color)":s.style.color="var(--gray-text-color)",o("buildings").style.display=n>=1?"":"none",o("upgrades").style.display=n>=1?"":"none",o("upgrade3").style.display=n>=2?"":"none",o("upgrade5").style.display=n>=3?"":"none",o("upgrade6").style.display=n>=4?"":"none",o("upgrade7").style.display=n>=4?"":"none",o("upgrade8").style.display=n>=4?"":"none",o("upgrade10").style.display=n>=4?"":"none",o("upgrade11").style.display=n>=5?"":"none",o("upgrade12").style.display=n>=5?"":"none",o("upgrade13").style.display=n>=5?"":"none",o("stageResearch").style.display=n>=1?"":"none",o("research5").style.display=n>=3?"":"none",o("research6").style.display=n>=4?"":"none",o("research7").style.display=n>=4?"":"none",o("research8").style.display=n>=5?"":"none",o("extraResearch").style.display=n>=2?"":"none",o("researchExtra2").style.display=n>=3?"":"none",o("researchExtra3").style.display=n>=4?"":"none",o("researchExtra4").style.display=n>=5?"":"none",t.stage.true<4&&(o("rankToggleReset").style.display=n>=2?"":"none");for(let i=1;i<r.rankImage.length;i++)o(`rankStat${i}`).style.display=n>=i?"":"none"}};var we=(e,s)=>{if((e==="discharge"||t.inflation.vacuum)&&(t.discharge.energy=0),s.includes(4)&&(a.collapseInfo.trueStars=0),e==="galaxy"&&(t.collapse.mass=.01235,t.collapse.stars=[0,0,0]),e==="collapse"&&!t.inflation.vacuum&&t.strangeness[4][4]<1||e==="galaxy"){let{elements:r}=t;for(let n=1;n<r.length;n++)!me(n,4,"elements")||(r[n]=0,J(n,4,"elements"));ue()}for(let r of s){if(r===2&&t.strangeness[2][10]>=1&&e!=="vaporization"&&e!=="discharge")continue;let n=t.buildings[r];n[0].current=k(y.buildings[r][0].current),n[0].total=k(y.buildings[r][0].total);for(let g=1;g<a.buildingsInfo.maxActive[r];g++)!me(g,r,"structures")||(n[g].true=0,n[g].current=[0,0],n[g].total=[0,0]);if(e==="discharge")continue;let i=t.upgrades[r];for(let g=0;g<a.upgradesInfo[r].maxActive;g++)!me(g,r,"upgrades")||(i[g]=0,J(g,r,"upgrades"));if(ce(r),e==="vaporization")continue;let l=t.researches[r];for(let g=0;g<a.researchesInfo[r].maxActive;g++)!me(g,r,"researches")||(l[g]=0,V(g,r,"researches"),Te(g,r,"researches"));if(Q("researches",r),e==="rank")continue;let u=t.researchesExtra[r];for(let g=0;g<a.researchesExtraInfo[r].maxActive;g++)!me(g,r,"researchesExtra")||(u[g]=0,V(g,r,"researchesExtra"),Te(g,r,"researchesExtra"));Q("researchesExtra",r)}s.includes(3)&&t.strangeness[3][10]>=1&&(t.buildings[3][1].current=[1,0]),Se(),ae(),s.includes(t.stage.active)&&G(),se()},Ge=(e,s="normal")=>{for(let r of e){let n=t.buildings[r],i=y.buildings[r];for(let l=1;l<a.buildingsInfo.maxActive[r];l++)n[l].true=0,n[l].current=[0,0],n[l].total=[0,0],n[l].trueTotal=[0,0];if(n[0].current=k(i[0].current),n[0].total=k(i[0].total),n[0].trueTotal=k(i[0].trueTotal),t.upgrades[r]=k(y.upgrades[r]),t.researches[r]=k(y.researches[r]),t.researchesExtra[r]=k(y.researchesExtra[r]),t.ASR[r]=t.strangeness[r][[6,5,5,6,7][r-1]],ce(r),r===1)t.discharge.unlock=!1,t.discharge.energy=0,t.discharge.current=0;else if(r===2)t.vaporization.clouds=[1,0];else if(r===3)t.inflation.vacuum?(t.accretion.rank=1,t.strangeness[3][10]>=1&&(n[1].current=[1,0])):(t.accretion.rank=0,n[0].current=[5.97,27]);else if(r===4){t.stage.time=0,a.collapseInfo.trueStars=0,t.collapse.elementsMax=[1,0],t.collapse.mass=.01235,t.collapse.stars=[0,0,0],t.inflation.vacuum||(t.collapse.show=[]),t.elements=k(y.elements),t.elements[0]=t.strangeness[4][11],ue();for(let l=1;l<t.elements.length;l++)J(l,4,"elements")}else r===5&&t.strangeness[5][6]>=2&&t.ASR[5]++}for(let r of e){for(let n=0;n<a.researchesInfo[r].maxActive;n++)v(n,r,"researches");for(let n=0;n<a.researchesExtraInfo[r].maxActive;n++)v(n,r,"researchesExtra");v(0,r,"ASR"),Q("researches",r),Q("researchesExtra",r)}if(Se(),ae(),s!==!1&&(a.lastActive=null,_(s),s==="soft")){let r=t.stage.active;for(let n=0;n<a.upgradesInfo[r].maxActive;n++)J(n,r,"upgrades");r===3&&Ie()}},dt=()=>{for(let s=1;s<=5;s++){let r=t.buildings[s],n=y.buildings[s];for(let i=1;i<n.length;i++)r[i].true=0,r[i].current=[0,0],r[i].total=[0,0],r[i].trueTotal=[0,0],r[i].highest=[0,0];r[0].current=k(n[0].current),r[0].total=k(n[0].total),r[0].trueTotal=k(n[0].trueTotal),r[0].highest=k(n[0].highest),t.upgrades[s]=k(y.upgrades[s]),t.researches[s]=k(y.researches[s]),t.researchesExtra[s]=k(y.researchesExtra[s]),t.strangeness[s]=k(y.strangeness[s]),t.milestones[s]=k(y.milestones[s]),t.ASR[s]=0}t.discharge.unlock=!1,t.discharge.energy=0,t.discharge.energyMax=0,t.discharge.current=0,t.vaporization.clouds=[1,0],t.vaporization.cloudsMax=[1,0],t.inflation.vacuum?t.accretion.rank=1:(t.accretion.rank=0,t.buildings[3][0].current=[5.97,27]),a.collapseInfo.trueStars=0,t.collapse.elementsMax=[0,0],t.collapse.mass=.01235,t.collapse.massMax=.01235,t.collapse.stars=[0,0,0],t.collapse.show=[],t.elements=k(y.elements),t.time.offline>28800&&(t.time.offline=28800),t.researchesAuto=k(y.researchesAuto),a.historyStorage.stage=[],t.history.stage.best=[0,1,0],t.stage.resets=0,t.stage.best=0,t.stage.time=0;for(let s=0;s<t.strange.length;s++)t.strange[s].current=0,t.strange[s].total=0;for(let s=1;s<=5;s++){for(let r=0;r<a.researchesInfo[s].maxActive;r++)v(r,s,"researches");for(let r=0;r<a.researchesExtraInfo[s].maxActive;r++)v(r,s,"researchesExtra");v(0,s,"ASR")}let e=a.researchesAutoInfo.autoStage;for(let s=0;s<t.researchesAuto.length;s++)v(s,e[s],"researchesAuto");for(let s=1;s<y.strangeness.length;s++)for(let r=0;r<a.strangenessInfo[s].maxActive;r++)v(r,s,"strangeness");for(let s=1;s<y.milestones.length;s++)for(let r=0;r<t.milestones[s].length;r++)Re(r,s);X(),_("reload")};var bt=(e,s)=>Math.log(e)/Math.log(s),ae=()=>{let{upgradesInfo:e,researchesInfo:s,researchesExtraInfo:r,dischargeInfo:n,inflationInfo:i}=a,{buildings:l,upgrades:u,researches:g,researchesExtra:c,strangeness:d}=t,h=a.buildingsInfo.producing,b=a.strangeInfo.stageBoost,x=t.strange[0].current,S=a.stageInfo.activeAll,w=t.inflation.vacuum,B=t.challenges.active===0;if(S.includes(1)){let{discharge:E}=t,C=w?0:2;b[1]=d[1][8]>=1?(x+1)**(w?.12:.26):null,n.bonus=d[1][2],w&&b[1]!==null&&(b[1]-=1,n.bonus+=b[1]);let p=(4+d[1][0])*2**g[1][4];e[1].effect[5]=B?1+p/4:p,e[1].effect[7]=Math.round((1.02+.01*g[1][1])*100)/100,r[1].effect[4]=1+e[1].effect[5]/100;let A=e[1].effect[5]**(E.current+n.bonus)*1.2**d[1][9];w&&(A*=a.milestonesInfo[1].reward[0]);let T=[l[1][5-C].current],M=(w?.2:.3)*A;if(w&&u[1][4]===1&&(M*=5),u[1][7]===1&&T.push(f(e[1].effect[7]).power(l[1][5-C].true).toArray()),h[1][5-C]=f(M).multiply(...T).toArray(),s[1].effect[2]=12+d[1][5]*(w?4:3)/10,r[1].effect[1]=c[1][1]>=1?(21-c[1][1])/10:2.718281828459045,f(h[1][5-C]).moreThan("1")){let oe=s[1].effect[2]**g[1][2];u[1][9]===1&&E.energy>1&&(oe*=E.energy),g[1][5]>=1&&(oe*=(E.current+n.bonus+1)*g[1][5]),!w&&b[1]!==null&&(oe*=b[1]),e[1].effect[8]=f(h[1][5-C]).log(r[1].effect[1]).multiply(oe).toArray()}else e[1].effect[8]=[0,0];let P=[l[1][4-C].current],L=(w?.2:.4)*A;w?u[1][3]===1&&(L*=10):u[1][4]===1&&(L*=5),u[1][7]===1&&P.push(f(e[1].effect[7]).power(l[1][4-C].true).toArray()),h[1][4-C]=f(L).multiply(...P).toArray();let F=[l[1][3-C].current],K=(w?.2:.5)*A;if(u[1][0]===1&&(K*=5),!w&&u[1][3]===1&&(K*=10),u[1][7]===1&&F.push(f(e[1].effect[7]).power(l[1][3-C].true).toArray()),h[1][3-C]=f(K).multiply(...F).toArray(),w){let oe=[l[1][2].current];u[1][7]===1&&oe.push(f(e[1].effect[7]).power(l[1][2].true).toArray()),h[1][2]=f(.2*A).multiply(...oe).toArray();let it=[l[1][1].current];u[1][7]===1&&it.push(f(e[1].effect[7]).power(l[1][1].true).toArray()),h[1][1]=f(.001*A).multiply(...it).toArray(),h[1][1]=f(h[1][1]).power(f(h[1][1]).lessThan("1")?1.1:.1).toArray(),r[1].effect[3]=c[1][3]>=1?(20+5*c[1][3])/100:0,i.preonCap=f(2e13*Math.max(E.energy,1)**r[1].effect[3]).toArray(),t.collapse.stars[2]>=1&&(i.preonCap=f(i.preonCap).multiply(a.collapseInfo.starEffect[2]()).toArray()),f(h[1][1]).moreOrEqual(i.preonCap)&&(h[1][1]=i.preonCap)}}let R=(c[1][4]>=1?r[1].effect[4]**(t.discharge.current+n.bonus):1)*1.05**d[1][10];if(S.includes(2)){let E=l[2][5].true,C=l[2][4].true,p=l[2][3].true,A=l[2][2].true;u[2][7]===1&&(E+=l[2][6].true),u[2][6]===1&&(C+=E),e[2].effect[5]=1+g[2][5],u[2][5]===1&&(p+=C*e[2].effect[5]),e[2].effect[4]=1+g[2][4],u[2][4]===1&&(A+=p*e[2].effect[4]),l[2][5].current=f(E).toArray(),l[2][4].current=f(C).toArray(),l[2][3].current=f(p).toArray(),l[2][2].current=f(A).toArray(),h[2][6]=f(2*R).multiply(l[2][6].current).max("1").toArray();let T=[h[2][6]];r[2].effect[2]=f(t.vaporization.clouds).power(.1).toArray(),c[2][2]>=1&&T.push(r[2].effect[2]),h[2][5]=f(2*E*R).multiply(...T).max("1").toArray(),h[2][4]=f(2*C*R).multiply(h[2][5]).max("1").toArray(),h[2][3]=f(2*p*R).multiply(h[2][4]).max("1").toArray();let M=[h[2][3],t.vaporization.clouds];e[2].effect[2]=.02+g[2][2]*(w?.03:.02),e[2].effect[3]=.02+g[2][3]*(w?.02:.03),r[2].effect[1]=w?1.5**c[2][1]:10**(c[2][1]-1),b[2]=d[2][8]>=1?(x+1)**(w?.22:.32):null;let P=(B?.4*((A-l[2][2].true)**.5+l[2][2].true):4*l[2][2].true)*R*2**d[2][1];u[2][2]===1&&M.push(f(l[2][0][g[2][1]>=2?"total":"current"]).power(e[2].effect[2]).toArray()),u[2][3]===1&&M.push(f(l[2][1][g[2][1]>=1?"total":"current"]).max("1").power(e[2].effect[3]).toArray()),w&&(P*=r[2].effect[1]*a.milestonesInfo[2].reward[1]),b[2]!==null&&(P*=b[2]),h[2][2]=f(P).multiply(...M).toArray();let L=[];if(B)L.push(f(l[2][1].current).moreThan("1")?f(l[2][1].current).power(.1).toArray():l[2][1].current);else if(w){let F=f(l[2][1].current).minus(l[2][1].true).toArray();L.push(f(F).moreThan("1")?f(F).power(.5).plus(l[2][1].true).toArray():l[2][1].current)}else L.push(l[2][1].current);u[2][0]===1&&L.push(f(w?"1.05":"1.1").power(l[2][1].true).toArray()),h[2][1]=f((w?1:6e-4)*R*3**g[2][0]*2**d[2][0]).multiply(...L).toArray(),w&&(h[2][1]=f(h[2][1]).plus("1").toArray(),e[1].effect[8]=f(e[1].effect[8]).multiply(h[2][1]).toArray())}if(S.includes(3)){a.accretionInfo.effective=(B?1:t.accretion.rank)+d[3][11],w&&(b[3]=d[3][7]>=1?(x+1)**.14-1:null,a.accretionInfo.effective+=Number(b[3]));let E=R**.5;h[3][5]=f("1.1").power(l[3][5].true).toArray(),l[3][5].true>0&&(h[3][5]=f(E).multiply(h[3][5]).toArray()),h[3][4]=f(u[3][12]===1?"1.14":"1.1").power(l[3][4].true).toArray(),l[3][4].true>0&&(h[3][4]=f(E).multiply(h[3][4],h[3][5]).toArray());let C=d[3][3]<1?[1,0]:w?f(h[3][4]).power(.36).toArray():h[3][4],p=[l[3][3].current,h[3][4]],A=.1*R*2**d[3][1];u[3][4]===1&&c[3][2]>0&&(A*=2),u[3][8]===1&&p.push(f("1.005").power(l[3][3].true).toArray()),h[3][3]=f(A).multiply(...p).toArray();let T=[l[3][2].current,C];s[3].effect[5]=f(l[3][0].current).power(.025*g[3][5]).toNumber(),w&&s[3].effect[5]>4e3&&(s[3].effect[5]=4e3);let M=.1*R*3**g[3][2]*5**g[3][4]*2**d[3][1];u[3][3]===1&&T.push(f("1.02").power(l[3][2].true).toArray()),u[3][4]===1&&(M*=4),g[3][5]>=1&&(M*=s[3].effect[5]),h[3][2]=f(M).multiply(...T).toArray();let P=[l[3][1].current,C];e[3].effect[0]=1.01+.01*g[3][1],e[3].effect[1]=f(l[3][1].current).power(.05+.01*c[3][3]).toArray(),e[3].effect[7]=2*1.5**g[3][6],e[3].effect[10]=w?3*2**g[3][7]:10*3**g[3][7],r[3].effect[0]=1.1**c[3][0],r[3].effect[1]=(1+.1*c[3][1])**a.accretionInfo.effective;let L=(w?1:1e-19)*R*3**g[3][0]*2**g[3][3]*r[3].effect[0]*2**(Math.min(d[3][0],8)+Math.max((d[3][0]-8)/2,0));if(w&&(L*=a.milestonesInfo[3].reward[0]),u[3][0]===1&&P.push(f(e[3].effect[0]).power(l[3][1].true).toArray()),u[3][1]===1&&P.push(e[3].effect[1]),u[3][2]===1&&(L*=2),u[3][5]===1&&(L*=3),u[3][7]===1&&(L*=e[3].effect[7]),u[3][9]===1&&(L*=2),u[3][10]===1&&(L*=e[3].effect[10]),c[3][1]>=1&&(L*=r[3].effect[1]),h[3][1]=f(L).multiply(...P).toArray(),w){let{elements:F}=t,K=1;F[3]===1&&(K+=.25),F[5]===1&&(K+=.0375*l[4][1].true),F[10]===1&&(K*=2),F[14]===1&&(K*=1.4),K*=1+(F[15]===1?a.collapseInfo.trueStars:l[4][1].true),i.dustCap=f(5e45*(ve()/i.massCap)).multiply(K).toArray(),h[3][1]=f(h[3][1]).plus("1").toArray(),B&&(h[3][1]=f(h[3][1]).power(Math.floor(100-3.3*(t.accretion.rank-1))/100).toArray()),f(h[3][1]).moreOrEqual(i.dustCap)&&(h[3][1]=i.dustCap),h[1][1]=f(h[1][1]).multiply(h[3][1]).toArray(),r[3].effect[4]=r[3].effect[1]*c[3][4],c[3][4]>=1&&(h[2][2]=f(h[2][2]).multiply(r[3].effect[4]).toArray())}else t.accretion.rank>=5&&(h[3][1]=f(h[3][1]).power(f(h[3][1]).lessThan("1")?1.1:.8).toArray())}if(S.includes(4)){let{elements:E}=t,{stars:C}=t.collapse,{starEffect:p}=a.collapseInfo;s[4].effect[1]=f(1+(B?.005*g[4][1]:.01*Math.min(g[4][1],5)+.005*Math.max(g[4][1]-5,0))).power(a.collapseInfo.trueStars).toArray(),f(s[4].effect[1]).moreThan("1e10")&&(s[4].effect[1]=f(s[4].effect[1]).minus("1e10").power(.7).plus("1e10").toArray());let A=[s[4].effect[1]];b[4]=d[4][9]>=1?(x+1)**(w?.2:.36):null;let T=1.1+.2*g[4][2];w&&(T+=a.milestonesInfo[3].reward[1]),s[4].effect[0]=T**g[4][0],a.elementsInfo.effect[12]=10-Math.floor(d[4][11]/2);let M=s[4].effect[0]*R*a.collapseInfo.massEffect()*p[1]()*1.5**d[4][0];E[4]===1&&(M*=1.1),E[19]===1&&(M*=3),E[23]===1&&C[2]>10&&(M*=Math.log10(C[2])),E[24]===1&&A.push(f(l[4][0].current).max("1").power(.01).toArray()),E[26]===1&&(M*=2),w?M*=4*a.milestonesInfo[4].reward[0]:t.milestones[1][1]>=3&&(M*=4),b[4]!==null&&(M*=b[4]);let P=f(M).multiply(...A).toArray();h[4][5]=f("1e11").multiply(l[4][5].current,P).toArray(),h[4][4]=f("2e9").multiply(l[4][4].current,P).toArray(),h[4][3]=f("2.5e7").multiply(l[4][3].current,P).toArray(),a.elementsInfo.effect[6]=c[4][1]>=1?2:1.5;let L=300*p[0]();g[4][3]>=1&&(L*=10),h[4][2]=f(L).multiply(l[4][2].current,P).toArray();let F=22;E[1]===1&&(F*=2),h[4][1]=f(F).multiply(l[4][1].current,P).toArray()}if(S.includes(5)){h[5][3]=f(w?u[5][2]===1?"2":"1.8":"10").power(l[5][3].true).toArray();let E=[l[5][2].current,h[5][3]],C=1.5*3**g[5][1];e[5].effect[1]=6*4**d[5][4],u[5][1]===1&&(C*=e[5].effect[1]),h[5][2]=f(C).multiply(...E).toArray();let p=[l[5][1].current,h[5][3]],A=4**g[5][0];e[5].effect[0]=4*3**d[5][3],u[5][0]===1&&(A*=e[5].effect[0]),h[5][1]=f(A).multiply(...p).toArray();let T=h[5][2];f(T).moreThan("1")&&(h[4][4]=f(h[4][4]).multiply(T).toArray(),g[5][1]>=2&&(h[4][3]=f(h[4][3]).multiply(T).divide("3").toArray()),g[5][1]>=3&&(h[4][2]=f(h[4][2]).multiply(T).divide("9").toArray()),g[5][1]>=4&&(h[4][1]=f(h[4][1]).multiply(T).divide("27").toArray()))}},be=(e,s=t.stage.active,r=!1)=>{if(!lt(e,s))return;let{buildingsInfo:n}=a,i=t.buildings[s][e],l=s===5&&e===3,u=(s===2&&e===1||s===3)&&t.inflation.vacuum,g=e-1,c=s;s===2?e!==1&&(g=1):s>=3&&(g=0,s===5&&(c=4));let d;l?d=t.collapse.mass:u?d=s===2?f(t.buildings[1][5].current).divide("6.02214076e23").toArray():f(t.buildings[1][0].current).multiply("1.78266192e-33").toArray():d=t.buildings[c][g].current;let h=d;if(r&&((s===3||s===1&&e===1)&&t.strangeness[3][4]>=2&&f(n.producing[3][1]).moreOrEqual(a.inflationInfo.dustCap)?h=f(d).divide(a.inflationInfo.massCap).toArray():i.true>0&&!l&&(h=f(d).divide("2").toArray())),f($e(e,s)).moreThan(h))return;let b=t.researchesAuto[0]===0?1:r?-1:t.toggles.shop.howMany,x,S;if(b!==1){let w=n.increase[s][e],B=n.firstCost[s][e],R=i.true,E=f(w).power(R).minus("1").divide(w-1).multiply(B).toArray(),C=Math.floor(f(h).plus(E).multiply(w-1).divide(B).plus("1").log(10).divide(Math.log10(w)).toNumber())-R;if(b!==-1&&C<b&&t.toggles.shop.strict)return;x=b!==-1?Math.min(C,b):C,S=f(w).power(x+R).minus("1").divide(w-1).multiply(B).minus(E).toArray()}else x=1,S=$e(e,s);d=f(d).minus(S).toArray(),i.true+=x,i.current=f(i.current).plus(x).toArray(),i.total=f(i.total).plus(x).toArray(),i.trueTotal=f(i.trueTotal).plus(x).toArray(),f(i.highest).lessThan(i.current)&&(i.highest=k(i.current)),l?we("galaxy",t.inflation.vacuum?[1,2,3,4,5]:[4,5]):(u?s===2?t.buildings[1][5].current=f(d).multiply("6.02214076e23").toArray():t.buildings[1][0].current=f(d).divide("1.78266192e-33").toArray():t.buildings[c][g].current=d,ae(),r||G()),(t.inflation.vacuum||s===1)&&(l||Se(a.dischargeInfo.getEnergy(e,s)*x),O(1,1)),s===2?e!==1&&O(1,2):s===3?e>=4&&O(1,3):s===4?(a.collapseInfo.trueStars+=x,t.buildings[5][0].current=f(t.buildings[5][0].current).plus(x).toArray(),O(0,5)):s===5&&(t.inflation.vacuum?e===4&&O(1,5):e===3&&(O(1,5),t.events[2]||te(5,2))),!r&&a.screenReader&&(o("SRMain").textContent=`Made ${m(x)} '${n.name[s][e]}'`)},Se=(e=null)=>{let{discharge:s}=t;if(e===null){if(t.strangeness[1][11]<1)return;let{getEnergy:r,energyType:n}=a.dischargeInfo;e=0;for(let i=1;i<n.length;i++){let l=t.buildings[i];for(let u=1;u<n[i].length;u++)e+=r(u,i)*l[u].true}s.energy=e}else s.energy+=e;s.unlock||(s.unlock=s.energy>=(t.inflation.vacuum?32:9)),s.energyMax<s.energy&&(s.energyMax=s.energy)},$e=(e,s)=>{let{buildingsInfo:r}=a;return s===1?(a.upgradesInfo[1].effect[6]=(20+t.researches[1][0])/100,r.increase[1][e]=Math.round((1.4-(t.upgrades[1][6]===1?a.upgradesInfo[1].effect[6]:0))*100)/100,e===1?r.firstCost[1][1]=r.startCost[1][1]/(!t.inflation.vacuum&&t.upgrades[1][2]===1?10:1):e===3?r.firstCost[1][3]=r.startCost[1][3]/(t.upgrades[1][1]===1?10:1):e===4&&(r.firstCost[1][4]=r.startCost[1][4],t.inflation.vacuum&&(t.upgrades[1][2]===1&&(r.firstCost[1][4]/=10),t.researchesExtra[1][0]>=1&&t.upgrades[1][1]===1&&(r.firstCost[1][4]/=10)))):s===3?(r.firstCost[3][e]=r.startCost[3][e],t.inflation.vacuum||(a.strangeInfo.stageBoost[3]=t.strangeness[3][7]<1?null:t.strange[0].current<800?(t.strange[0].current+1)**1.66:(t.strange[0].current+1)**.66*800,a.strangeInfo.stageBoost[3]!==null&&(r.firstCost[3][e]/=a.strangeInfo.stageBoost[3])),e===4&&(r.increase[3][4]=t.upgrades[3][11]===1?5:10)):s===4&&(r.increase[4][e]=Math.round((1.4+.15*(e-1)-(t.elements[2]===1?.1:0)-(t.elements[8]===1?.05:0))*100)/100,r.firstCost[4][e]=r.startCost[4][e]/(t.elements[13]===1?1e3:1)/2**t.strangeness[4][1]),f(r.increase[s][e]).power(t.buildings[s][e].true).multiply(r.firstCost[s][e]).toArray()},pe=(e,s,r)=>{let n;if(s===1&&e===(t.inflation.vacuum?5:3)?n=f(a.upgradesInfo[1].effect[8]).multiply(r).toArray():s===5?n=f(a.buildingsInfo.producing[5][1]).multiply(r).toArray():(n=f(a.buildingsInfo.producing[s][e+1]).multiply(r).toArray(),s===2&&e===1&&!t.inflation.vacuum&&t.researchesExtra[2][1]>=1&&(n=f(n).plus(r*a.researchesExtraInfo[2].effect[1]).toArray())),n[0]===0)return;if(!f(n).isFinite())return console.warn("NaN or Infinity detected");let i=s;s===4?e=0:s===5&&(e>0&&(n=f(n).divide(4**e).toArray()),i=4,e++);let l=t.buildings[i][e];l.current=f(l.current).plus(n).toArray(),l.total=f(l.total).plus(n).toArray(),l.trueTotal=f(l.trueTotal).plus(n).toArray(),f(l.highest).lessThan(l.current)&&(l.highest=k(l.current)),t.inflation.vacuum||(f(l.current).moreThan("1e300")&&(l.current=[1,300]),f(l.total).moreThan("1e300")&&(l.total=[1,300]),f(l.trueTotal).moreThan("1e300")&&(l.trueTotal=[1,300]),f(l.highest).moreThan("1e300")&&(l.highest=[1,300])),s===1?t.inflation.vacuum&&(e===0?(t.buildings[3][0].current=f(l.current).multiply("1.78266192e-33").toArray(),O(0,3)):e===5&&(t.buildings[2][0].current=f(l.current).divide("6.02214076e23").toArray(),t.buildings[2][0].total=f(l.total).divide("6.02214076e23").toArray())):s===3?e===0&&(t.accretion.rank<5&&f(l.current).moreThan("1e30")&&(l.current=[1,30]),O(0,3)):s===4?f(t.collapse.elementsMax).lessThan(l.current)&&(t.collapse.elementsMax=k(l.current)):s===5&&(t.buildings[5][0].current=f(t.buildings[5][0].current).plus(n).toArray(),t.inflation.vacuum&&O(0,5))},pt=(e,s)=>{if(t.strangeness[5][9]<=e)return;let r=t.strange[e],n=Math.floor(t.strange[e+1].current*111);r.current>=n||(r.current+=s,r.current>n?(r.total+=s-(r.current-n),r.current=n):r.total+=s)},j=(e,s,r,n=!1)=>{if(!n&&!Ae(e,s,r))return!1;let i;if(r==="strangeness"?i=t.strange[0].current:s===1?i=t.discharge.energy:s===2?i=k(t.buildings[2][1].current):s===3?i=t.inflation.vacuum?f(t.buildings[1][0].current).multiply("1.78266192e-33").toArray():k(t.buildings[3][0].current):i=k(t.buildings[4][0].current),r==="upgrades"){if(t.upgrades[s][e]>=1)return!1;let l=a.upgradesInfo[s];if(f(i).lessThan(l.startCost[e]))return!1;t.upgrades[s][e]++,i=f(i).minus(l.startCost[e]).toArray(),s===4&&e===1&&a.tab==="research"&&W("research"),a.screenReader&&!n&&(o("SRMain").textContent=`New upgrade '${l.name[e]}', has been created`)}else if(r==="researches"||r==="researchesExtra"||r==="researchesAuto"||r==="ASR"){let l,u;if(r==="researchesAuto"||r==="ASR"?(l=a[`${r}Info`],u=t[r],r==="ASR"&&(e=s)):(l=a[`${r}Info`][s],u=t[r][s]),u[e]>=l.max[e]||f(i).lessThan(l.cost[e]))return!1;u[e]++,i=f(i).minus(l.cost[e]).toArray(),r==="researches"?s===4&&e===2&&v(0,4,"researches",!0):r==="researchesExtra"&&s===1&&e===2&&(t.stage.current<4&&(t.stage.current=t.researchesExtra[1][2]>1?2:3),_("soft")),a.screenReader&&!n&&(o("SRMain").textContent=`Research '${r==="ASR"?"Structure Automation":l.name[e]}' level increased, it is now ${u[e]} ${u[e]>=l.max[e]?"maxed":""}`)}else if(r==="elements"){if(t.elements[e]>=1)return!1;let{elementsInfo:l}=a;if(f(i).lessThan(l.startCost[e]))return!1;t.elements[e]=1,i=f(i).minus(l.startCost[e]).toArray(),t.collapse.show.includes(e)||t.collapse.show.push(e),e===7||e===16||e===20||e===25?v(1,4,"researches",!0):e===9||e===17?v(0,4,"researches",!0):e===11?v(2,4,"researches",!0):e===26&&t.stage.current<5&&(t.stage.current=5,t.stage.true===4&&(t.stage.true=5),_("soft")),a.screenReader&&!n&&(o("SRMain").textContent=`New Element '${l.name[e]}' obtained`)}else if(r==="strangeness"){let l=a.strangenessInfo[s];if(t.strangeness[s][e]>=l.max[e]||i<a.strangenessInfo[s].cost[e])return!1;t.strangeness[s][e]++,i-=l.cost[e],s===1?e===6?(t.ASR[1]=Math.max(t.strangeness[1][6],t.ASR[1]),v(0,1,"ASR",!0)):e===7?v(0,1,"researchesAuto",!0):e===11&&(Se(),v(3,1,"strangeness",!0),v(4,2,"strangeness",!0),v(4,3,"strangeness",!0),v(5,4,"strangeness",!0)):s===2?e===2?(t.strangeness[2][2]<3&&v(4,2,"researches",!0),t.strangeness[2][2]===2&&v(5,2,"researches",!0)):e===5?(t.ASR[2]=Math.max(t.strangeness[2][5],t.ASR[2]),v(0,2,"ASR",!0)):e===6?v(1,2,"researchesAuto",!0):e===9&&(v(0,2,"ASR",!0),v(5,2,"strangeness",!0)):s===3?e===2?(v(0,3,"researchesExtra",!0),v(1,3,"researchesExtra",!0)):e===5?(t.ASR[3]=Math.max(t.strangeness[3][5],t.ASR[3]),v(0,3,"ASR",!0)):e===6?v(2,3,"researchesAuto",!0):e===8?(v(0,3,"ASR",!0),v(5,3,"strangeness",!0)):e===9&&X():s===4?e===6?(t.ASR[4]=Math.max(t.strangeness[4][6],t.ASR[4]),v(0,4,"ASR",!0)):e===10?(v(0,4,"ASR",!0),v(6,4,"strangeness",!0)):e===11&&t.elements[0]===0&&(t.elements[0]=1,t.collapse.show.unshift(0),J(0,4,"elements")):s===5&&(e===0?t.inflation.vacuum||_("soft"):e===1?t.stage.input*=2:e===5?t.inflation.vacuum&&_("soft"):e===6||e===7?(t.ASR[5]=t.strangeness[5][7],t.strangeness[5][6]>=2&&t.ASR[5]++,v(0,5,"ASR",!0)):e===8?a.tab==="strangeness"&&W("strangeness"):e===9&&(t.stage.input/=100)),a.screenReader&&(o("SRMain").textContent=`Strangeness of '${l.name[e]}' for ${a.stageInfo.word[s]} Stage is increased, level is now ${t.strangeness[s][e]}${t.strangeness[s][e]>=l.max[e]?"maxed":""}`)}if(r==="strangeness")t.strange[0].current=i;else if(s===1)t.strangeness[1][11]<1&&(t.discharge.energy=f(i).toNumber(),t.toggles.auto[1]&&ze("upgrade"));else if(s===2){if(t.buildings[2][1].current=i,t.buildings[2][2].current[0]===0&&f(t.buildings[2][1].current).lessThan(t.buildings[2][1].true)){let l=t.buildings[2][1].true;t.buildings[2][1].true=Math.floor(f(t.buildings[2][1].current).toNumber()),t.inflation.vacuum?t.discharge.energy-=(l-t.buildings[2][1].true)*a.dischargeInfo.getEnergy(1,2):t.buildings[2][1].current[0]===0&&f(t.buildings[2][0].current).lessThan("2.8e-3")&&(t.buildings[2][0].current=[2.8,-3])}}else s===3?t.inflation.vacuum?t.buildings[1][0].current=f(i).divide("1.78266192e-33").toArray():t.buildings[3][0].current=i:t.buildings[4][0].current=i;return ae(),r==="upgrades"||r==="elements"?J(e,s,r):(Te(e,s,r),V(e,s,r)),n||(U(e,s,r),G()),!0},Te=(e,s,r)=>{if(r==="researches"||r==="researchesExtra"||r==="researchesAuto"){let n=r==="researchesAuto"?a.researchesAutoInfo:a[`${r}Info`][s];if(n.cost[e]=s===1?n.startCost[e]+n.scaling[e]*(r==="researchesAuto"?t.researchesAuto[e]:t[r][s][e]):n.startCost[e]*n.scaling[e]**(r==="researchesAuto"?t.researchesAuto[e]:t[r][s][e]),n.cost[e]<1){let i=10**(-Math.floor(Math.log10(n.cost[e]))+2);n.cost[e]=Math.round(n.cost[e]*i)/i}else n.cost[e]=Math.round(n.cost[e]*100)/100}else r==="ASR"?a.ASRInfo.cost[s]=a.ASRInfo.costRange[s][t.ASR[s]]:r==="strangeness"&&(a.strangenessInfo[s].cost[e]=t.inflation.vacuum?Math.floor(Math.round(a.strangenessInfo[s].startCost[e]*a.strangenessInfo[s].scaling[e]**t.strangeness[s][e]*100)/100):Math.floor(Math.round((a.strangenessInfo[s].startCost[e]+a.strangenessInfo[s].scaling[e]*t.strangeness[s][e])*100)/100))},v=(e,s,r,n=!1)=>{r==="researchesAuto"?e===0?a.researchesAutoInfo.max[0]=(t.inflation.vacuum?2:1)+t.strangeness[1][7]:e===1?a.researchesAutoInfo.max[1]=1+t.strangeness[2][6]:e===2&&(a.researchesAutoInfo.max[2]=t.strangeness[3][6]):r==="ASR"?s===1?a.ASRInfo.max[1]=t.inflation.vacuum?5:3:s===2?a.ASRInfo.max[2]=t.strangeness[2][9]>=1?6:5:s===3?a.ASRInfo.max[3]=t.strangeness[3][8]>=1?5:4:s===4?a.ASRInfo.max[4]=t.strangeness[4][10]>=1?5:4:s===5&&(a.ASRInfo.max[5]=t.strangeness[5][7]+Number(t.strangeness[5][6]>=2)):r==="researches"?s===2?e===4?a.researchesInfo[2].max[4]=(t.inflation.vacuum?1:2)+Math.min(t.strangeness[2][2],2):e===5&&(a.researchesInfo[2].max[5]=(t.inflation.vacuum?1:2)+Number(t.strangeness[2][2]>=2)):s===4&&(e===0?(a.researchesInfo[4].max[0]=3+3*t.researches[4][2],t.elements[9]===1&&(a.researchesInfo[4].max[0]+=12),t.elements[17]===1&&(a.researchesInfo[4].max[0]+=27)):e===1?(a.researchesInfo[4].max[1]=2+Number(t.elements[16]===1)+Number(t.elements[20]===1)+Number(t.elements[25]===1),t.elements[7]===1&&(a.researchesInfo[4].max[1]+=2)):e===2&&(a.researchesInfo[4].max[2]=t.elements[11]===1?2:1)):r==="researchesExtra"?s===3&&(e===0?(a.researchesExtraInfo[3].max[0]=12,t.accretion.rank>=3&&(a.researchesExtraInfo[3].max[0]+=17),t.strangeness[3][2]>=1&&(a.researchesExtraInfo[3].max[0]+=t.inflation.vacuum?11:10*Math.min(t.strangeness[3][2],2))):e===1?(a.researchesExtraInfo[3].max[1]=5,t.inflation.vacuum?t.strangeness[3][2]>=2&&(a.researchesExtraInfo[3].max[1]+=1):t.strangeness[3][2]>=1&&(a.researchesExtraInfo[3].max[1]+=Math.min(t.strangeness[3][2],2))):e===3?a.researchesExtraInfo[3].max[3]=t.inflation.vacuum?2:20:e===4&&(a.researchesExtraInfo[3].max[4]=1,t.accretion.rank>=4&&(a.researchesExtraInfo[3].max[4]+=Math.min(t.accretion.rank-3,2)))):r==="strangeness"&&(s===1?e===3?a.strangenessInfo[1].max[3]=t.strangeness[1][11]>=1?2:1:e===5?a.strangenessInfo[1].max[5]=t.inflation.vacuum?5:10:e===6?a.strangenessInfo[1].max[6]=t.inflation.vacuum?5:3:e===7?a.strangenessInfo[1].max[7]=t.inflation.vacuum?1:2:e===9&&(a.strangenessInfo[1].max[9]=4+Math.min(t.challenges.void[3],4)):s===2?e===0?a.strangenessInfo[2].max[0]=t.inflation.vacuum?6:9:e===1?a.strangenessInfo[2].max[1]=6+Math.min(t.challenges.void[3],4):e===3?a.strangenessInfo[2].max[3]=3+Number(t.challenges.void[2]>=1):e===4?a.strangenessInfo[2].max[4]=t.strangeness[1][11]>=1?2:1:e===5?a.strangenessInfo[2].max[5]=t.strangeness[2][9]>=1?6:5:e===9&&(a.strangenessInfo[2].max[9]=1+Number(t.challenges.void[2]>=2)):s===3?e===0?a.strangenessInfo[3].max[0]=8+Math.min(t.challenges.void[3]*2,8):e===1?a.strangenessInfo[3].max[1]=4+Math.floor(Math.min(t.challenges.void[3]/2,2)):e===4?a.strangenessInfo[3].max[4]=t.strangeness[1][11]>=1?2:1:e===5?a.strangenessInfo[3].max[5]=t.strangeness[3][8]>=1?5:4:e===9&&(a.strangenessInfo[3].max[9]=3+Number(t.challenges.void[4]>=4)):s===4?e===0?a.strangenessInfo[4].max[0]=8+Math.min(t.challenges.void[3],4):e===1?a.strangenessInfo[4].max[1]=4+Math.floor(Math.min(t.challenges.void[3]/2,2)):e===5?a.strangenessInfo[4].max[5]=t.strangeness[1][11]>=1?3:1:e===6&&(a.strangenessInfo[4].max[6]=t.strangeness[4][10]>=1?5:4):s===5&&e===0&&(a.strangenessInfo[5].max[0]=t.inflation.vacuum?1:3)),Te(e,s,r),V(e,s,r),n&&(r==="researches"||r==="researchesExtra")&&Q(r,[s,e])},ce=e=>{if(!t.toggles.auto[5])return;let{autoU:s}=a.automatization;if(e==="all")for(let r=0;r<=5;r++){s[r]=[];for(let i=0;i<a.upgradesInfo[r].maxActive;i++)t.upgrades[r][i]<1&&s[r].push(i);let{startCost:n}=a.upgradesInfo[r];s[r].sort((i,l)=>n[i]-n[l])}else if(typeof e=="number"){s[e]=[];for(let n=0;n<a.upgradesInfo[e].maxActive;n++)t.upgrades[e][n]<1&&s[e].push(n);let{startCost:r}=a.upgradesInfo[e];s[e].sort((n,i)=>r[n]-r[i])}},ht=e=>{if(t.researchesAuto[2]<1||!t.toggles.auto[5])return;let s=a.automatization.autoU[e];for(let r=0;r<s.length;r++){let n=s[r];if(!!Ae(n,e,"upgrades"))if(j(n,e,"upgrades",!0),t.upgrades[e][n]>=1)s.splice(r,1),r--;else break}},Q=(e,s)=>{if(e==="researches"){if(!t.toggles.auto[6])return}else if(e==="researchesExtra"&&!t.toggles.auto[7])return;let{[e==="researches"?"autoR":"autoE"]:r}=a.automatization;if(s==="all")for(let n=0;n<=5;n++){let i=a[`${e}Info`][n];r[n]=[];for(let l=0;l<i.maxActive;l++)t[e][n][l]<i.max[l]&&r[n].push(l);r[n].sort((l,u)=>i.cost[l]-i.cost[u])}else if(typeof s=="number"){let n=a[`${e}Info`][s];r[s]=[];for(let i=0;i<n.maxActive;i++)t[e][s][i]<n.max[i]&&r[s].push(i);r[s].sort((i,l)=>n.cost[i]-n.cost[l])}else r[s[0]].some(n=>n===s[1])||r[s[0]].unshift(s[1])},et=(e,s)=>{if(e==="researches"){if(t.researchesAuto[2]<2||!t.toggles.auto[6])return}else if(e==="researchesExtra"&&(t.researchesAuto[2]<3||!t.toggles.auto[7]))return;let r=a.automatization[e==="researches"?"autoR":"autoE"][s],n=a[`${e}Info`][s],i=!1;for(let l=0;l<r.length;l++){if(!Ae(r[l],s,e))continue;let u=j(r[l],s,e,!0);if(t[e][s][r[l]]>=n.max[r[l]])r.splice(l,1),l--;else if(u)l--;else{if(n.cost[r[l]]>n.cost[r[l+1]]){i=!0;continue}break}}i&&r.sort((l,u)=>n.cost[l]-n.cost[u])},ue=()=>{if(t.inflation.vacuum?!t.toggles.auto[8]:t.buildings[5][3].true<1)return;let{elements:e}=a.automatization,{elements:s}=t;if(t.inflation.vacuum)for(let n=1;n<a.elementsInfo.startCost.length;n++)s[n]===0&&e.push(n);else for(let n of t.collapse.show)s[n]===0&&e.push(n);let{startCost:r}=a.elementsInfo;e.sort((n,i)=>r[n]-r[i])},yt=()=>{if(t.strangeness[4][4]<1||(t.inflation.vacuum?!t.toggles.auto[8]:t.buildings[5][3].true<1))return;let{elements:e}=a.automatization,{elements:s}=t;for(let r=0;r<e.length;r++){let n=e[r];if(!Ae(n,4,"elements"))break;if(j(n,4,"elements",!0),s[n]===1)e.splice(r,1),r--;else break}},z=(e,s,r=!1)=>{let{toggles:n}=t,i;if(s==="normal"?i=o(`toggle${e}`):s==="buildings"?i=o(`toggleBuilding${e}`):i=o(`toggleAuto${e}`),r)if(s==="buildings"){let g=t.stage.active;if(n.buildings[g][e]=!n.buildings[g][e],e===0){if(t.researchesAuto[0]<2)return;for(let c=1;c<n.buildings[g].length;c++)n.buildings[g][c]=n.buildings[g][0],z(c,"buildings")}else{let c=!1;for(let d=1;d<a.buildingsInfo.maxActive[g];d++)if(n.buildings[g][d]&&t.buildings[g][d].highest[0]>0){c=!0;break}n.buildings[g][0]=c,z(0,"buildings")}}else n[s][e]=!n[s][e];let l=s==="buildings"?n.buildings[t.stage.active][e]:n[s][e],u="";s==="buildings"&&e===0?u="All ":s!=="normal"&&(u="Auto "),l?(i.style.color="",i.style.borderColor="",i.textContent=`${u}ON`,a.screenReader&&i.ariaLabel!==null&&(i.ariaLabel=i.ariaLabel.replace("OFF","ON"))):(i.style.color="var(--red-text-color)",i.style.borderColor="crimson",i.textContent=`${u}OFF`,a.screenReader&&i.ariaLabel!==null&&(i.ariaLabel=i.ariaLabel.replace("ON","OFF")))},ge=(e=null)=>{let{shop:s}=t.toggles,r=o("buyAnyInput");switch(e){case"1":s.howMany=1;break;case"max":s.howMany=-1;break;case"any":s.input=Math.max(Math.trunc(Number(r.value)),-1),s.input===0&&(s.input=1),s.howMany=s.input,r.value=m(s.input,{digits:0,type:"input"});break;case"strict":s.strict=!s.strict;break;default:r.value=m(s.input,{digits:0,type:"input"})}let n=o("buyStrict");n.style.borderColor=s.strict?"":"crimson",n.style.color=s.strict?"":"var(--red-text-color)",o("buy1x").style.backgroundColor=s.howMany===1?"green":"",o("buyAny").style.backgroundColor=Math.abs(s.howMany)!==1?"green":"",o("buyMax").style.backgroundColor=s.howMany===-1?"green":"",a.screenReader&&(n.ariaLabel=`Make Structures only when can afford all at once, ${s.strict?"ON":"OFF"}`),G()},he=(e,s=!1)=>{if(t.challenges.active!==-1)return!1;let r=!1;if(e>=5)r=t.stage.current>=5;else{if(e===4)return!1;e===3?r=f(t.buildings[3][0].current).moreOrEqual("2.47e31"):e===2?r=f(t.buildings[2][1].current).moreOrEqual("1.194e29"):e===1&&(r=f(t.buildings[1][3].current).moreOrEqual("1.67e21"))}if(s&&r){if(t.strangeness[5][2]<1||e>=4&&a.strangeInfo.gain(e)/100**t.strangeness[5][9]<t.stage.input)return!1;nt(e)}return r},Ve=async()=>{let{stage:e}=t,s=t.inflation.vacuum?6:e.active===4&&e.current===5&&t.events[1]?5:e.active;if(he(s)){let r=!0;t.toggles.normal[1]&&(r=await q(s===6?`Ready to restart progress for ${m(a.strangeInfo.gain(s)/100**t.strangeness[5][9])} ${a.strangeInfo.strangeName[t.strangeness[5][9]]}?`:s===5?`Return to Microworld? ${t.strange[0].total===0?"Maybe something will be obtained":`Will obtain ${m(a.strangeInfo.gain(s))} Strange quarks`}`:s===e.current?"Ready to enter next Stage? Next one will be harder than current":`Reset this Stage for ${m(a.strangeInfo.gain(s))} Strange quarks?`)),r&&nt(s)}else{if(e.resets<1&&(t.inflation.vacuum?e.current<5:t.upgrades[1][9]<1))return;if(t.challenges.active!==-1)return await q(`Current active Challenge is '${a.challengesInfo.name[t.challenges.active]}', leave it?`)?Mt():$(`'${a.challengesInfo.name[t.challenges.active]}' will remain active for now`);if(s>=5)return $(`"Iron" wasn't obtained yet`);if(s===4)return $("Reach Intergalactic first");if(s===3)return $(`Self sustaining is not yet possible, obtain at least ${m(247e29)} Mass`);if(s===2)return $(`Look's like more Mass expected, need even more Drops, around ${f("1.194e29").minus(t.buildings[2][1].current).format()}`);if(s===1)return $(`Not enough to form a single Drop of water, need ${f("1.67e21").minus(t.buildings[1][3].current).format()} extra Molecules`)}},nt=e=>{let{stage:s,researchesAuto:r}=t;s.resets++;let n="normal",i=t.inflation.vacuum?[1,2,3,4,5]:[e];if(t.inflation.vacuum)s.active=1,s.current=1;else if(e===s.current)if(e<5?(s.current++,s.active===s.current-1?s.active=s.current:n="soft",s.current>s.true&&(s.true=s.current,t.events[0]=!1)):(s.current=1+t.strangeness[5][0],s.active===4&&s.current!==4||s.active===5?s.active=s.current:n="soft"),e===5){if(i.unshift(4),t.strangeness[1][7]<1&&(r[0]=0,v(0,1,"researchesAuto",!0)),t.strangeness[2][6]<1){r[1]=0,v(1,2,"researchesAuto",!0);let l=s.true<6?14400:28800;t.time.offline>l&&(t.time.offline=l)}}else e===2?r[1]===0&&(r[1]=1,v(1,2,"researchesAuto")):e===1&&r[0]===0&&(r[0]=1,v(0,1,"researchesAuto"));else n=e===s.active?"soft":!1;if(s.true>=5){let l=a.strangeInfo.gain(e);l>s.best&&(s.best=l);let u=t.strangeness[5][9],g=l/100**u;if(t.strange[u].current+=g,t.strange[u].total+=g,e>=4){let c=a.historyStorage.stage,d=t.history.stage;c.unshift([g,s.time,u]),c.length>d.input[1]&&(c.length=d.input[1]),g*111**u/s.time>d.best[0]*111**d.best[2]/d.best[1]&&(d.best=[g,s.time,u])}}Ge(i,n)},ne=e=>{if(t.stage.active===e){a.lastActive!==null?a.lastActive=null:o("stageSelect").classList.remove("active");return}if(!!a.stageInfo.activeAll.includes(e)){if((a.tab==="Elements"||a.tab==="research"&&a.subtab.researchCurrent==="Elements")&&e!==4&&e!==5){a.lastActive=e;return}t.stage.active=e,_(),!t.events[1]&&t.stage.active===5&&te(4,1)}},Fe=()=>{a.dischargeInfo.next=Math.round((10-t.researches[1][3]-t.strangeness[1][1])**t.discharge.current)},ze=(e=!1)=>{if(t.upgrades[1][5]<1||t.buildings[1][1].true<=0)return!1;if(Fe(),e!==!1){if(t.strangeness[1][3]<1||e==="interval"&&t.discharge.energy<a.dischargeInfo.next)return!1;vt(!0)}return!0},Qe=async()=>{if(!ze())return;let e=!0;(t.toggles.normal[2]||t.stage.active!==1)&&(e=await q(t.stage.active===1?`This will reset all current Structures and Energy. ${t.discharge.energy>=a.dischargeInfo.next?"Enough Energy to gain boost from new goal":"Not enough Energy, but can reset anyway"}, continue?`:`Discarge attempt while inside '${a.stageInfo.word[t.stage.active]}'.
${t.discharge.energy>=a.dischargeInfo.next?"Enough":"Not enough"} to reach next goal, continue?`)),e&&(a.screenReader&&(o("SRMain").textContent=`Structures and Energy were reset${t.discharge.energy>=a.dischargeInfo.next?" for some":", no"} boost`),Fe(),vt())},vt=(e=!1)=>{if(t.discharge.energy>=a.dischargeInfo.next&&t.discharge.current++,O(0,1),t.challenges.active===0){let s=1+t.researchesExtra[1][2]+Number(t.researchesExtra[1][4]>=1);if(t.challenges.void[1]<s){for(let r=t.challenges.void[1];r<s;r++)de(`New Void reward achieved
Reward: ${a.challengesInfo.rewardText[0][1][r]}`);t.challenges.void[1]=s}}(!e||t.strangeness[1][3]<2)&&we("discharge",t.inflation.vacuum?[1,2,3,4,5]:[1])},We=()=>1e4*a.milestonesInfo[2].reward[0],fe=()=>{let e=f(t.buildings[2][1][t.researchesExtra[2][0]>=1?"total":"current"]).divide(a.vaporizationInfo.effect2U1()).toArray(),s=t.vaporization.clouds,r=(n,i,l)=>{let u=f(n).power(1/i).toArray(),g=f(s).power(1/i).plus(e).toArray();f(g).moreThan(u)?e=f(f(s).moreThan(n)?f(s).minus(n).power(1/l).plus(e).toArray():f(g).minus(u).toArray()).power(l).plus(n).minus(s).toArray():f(e).moreThan("1")&&(e=f(g).minus("1").power(i).plus("1").minus(s).toArray())};t.inflation.vacuum?t.challenges.active!==0?r(We(),.4,.3):r(We(),.38,.28):r("1e4",.6,.36),a.vaporizationInfo.get=e},tt=(e=!1)=>{if(fe(),t.upgrades[2][1]<1||f(a.vaporizationInfo.get).lessThan("1"))return!1;if(e){if(t.strangeness[2][4]<1||f(t.vaporization.clouds).multiply(t.vaporization.input).moreOrEqual(a.vaporizationInfo.get))return!1;wt()}return!0},_e=async()=>{if(!tt())return;let e=!0;(t.toggles.normal[3]||t.stage.active!==2)&&(e=await q(t.stage.active===2?`Reset structures and upgrades for ${f(a.vaporizationInfo.get).format()} Clouds?`:`Vaporization attempt while inside '${a.stageInfo.word[t.stage.active]}'.
Confirm for ${f(a.vaporizationInfo.get).format()} Clouds?`)),e&&(fe(),a.screenReader&&(o("SRMain").textContent=`Progress were reset for ${f(a.vaporizationInfo.get).format()} Clouds`),wt())},wt=()=>{let{vaporization:e}=t;if(e.clouds=f(e.clouds).plus(a.vaporizationInfo.get).toArray(),f(e.cloudsMax).lessThan(e.clouds)&&(e.cloudsMax=k(e.clouds)),O(0,2),t.challenges.active===0){let s=1+Number(f(e.clouds).moreThan("1e4"))+Number(f(e.clouds).moreThan("1e8"));if(t.challenges.void[2]<s){let r=t.challenges.void[2];for(let n=r;n<s;n++)de(`New Void reward achieved
Reward: ${a.challengesInfo.rewardText[0][2][n]}`);t.challenges.void[2]=s,r<1?v(3,2,"strangeness",!0):s>1&&r<2&&v(9,2,"strangeness",!0)}}we("vaporization",t.inflation.vacuum?t.strangeness[2][10]>=1?[1,2]:[1,2,3,4,5]:[2])},st=(e=!1)=>{let s=a.accretionInfo.rankCost[t.accretion.rank];if(s===0)return!1;if(t.inflation.vacuum){if(f(t.buildings[1][0].current).multiply("1.78266192e-33").lessThan(s))return!1}else if(f(t.buildings[3][0].current).lessThan(s))return!1;if(e){if(t.strangeness[3][4]<1)return!1;St()}return!0},je=async()=>{if(!st())return;let e=!0;(t.toggles.normal[4]||t.stage.active!==3)&&t.accretion.rank!==0&&(e=await q(t.stage.active===3?"Increasing Rank will reset structures, upgrades, stage researches. But unlock something new":`Rank increase attempt while inside '${a.stageInfo.word[t.stage.active]}'. Continue anyway?`)),e&&(St(),a.screenReader&&(o("SRMain").textContent=`Rank is now '${a.accretionInfo.rankName[t.accretion.rank]}'`))},St=()=>{if(t.accretion.rank++,t.accretion.rank===6&&(t.stage.current=4,_("soft")),t.challenges.active===0){let e=t.accretion.rank-1;if(t.challenges.void[3]<e){let s=t.challenges.void[3];for(let r=s;r<e;r++)de(`New Void reward achieved
Reward: ${a.challengesInfo.rewardText[0][3][r]}`);t.challenges.void[3]=e,s<4?(v(9,1,"strangeness",!0),v(1,2,"strangeness",!0),v(0,3,"strangeness",!0),v(1,3,"strangeness",!0),v(0,4,"strangeness",!0),v(1,4,"strangeness",!0)):e>4&&s<5&&v(9,3,"strangeness",!0)}}we("rank",t.inflation.vacuum?[1,2,3,4,5]:[3]),v(0,3,"researchesExtra",!0),v(4,3,"researchesExtra",!0),t.stage.active===3&&Ie()},qe=()=>600/2**Math.min(t.strangeness[3][9],3)/(t.strangeness[3][9]>=4?1.25:1),ve=()=>600*a.milestonesInfo[4].reward[1],X=()=>{let e=t.accretion.input,s=qe();e<s||!isFinite(e)?e=s:e>ve()&&(e=ve()),a.inflationInfo.massCap=e},Ce=()=>{let e=t.buildings[4];if(t.inflation.vacuum)a.collapseInfo.newMass=f(a.buildingsInfo.producing[1][1]).multiply(a.inflationInfo.massCap).min(t.buildings[1][0].current).multiply("8.96499278339628e-67").toNumber();else{let{elements:i}=t,l=.004;i[3]===1&&(l+=.001),i[5]===1&&(l+=15e-5*e[1].true),i[10]===1&&(l*=2),i[14]===1&&(l*=1.4),a.collapseInfo.newMass=(i[15]===1?a.collapseInfo.trueStars:e[1].true)*l*a.collapseInfo.starEffect[2]()}let{starCheck:s}=a.collapseInfo,{stars:r}=t.collapse,n=t.researchesExtra[4][0];s[0]=n>=1?Math.max(e[2].true+Math.floor(e[1].true*t.strangeness[4][3]/4)-r[0],0):0,s[1]=n>=2?Math.max(e[3].true-r[1],0):0,s[2]=n>=3?Math.max(e[4].true-r[2],0):0},rt=(e=!1)=>{if(t.upgrades[4][0]<1)return!1;let{collapseInfo:s}=a,{collapse:r}=t;if(Ce(),e){let{starEffect:n}=a.collapseInfo,i=n[0](!0)/n[0]()*(n[1](!0)/n[1]())*(n[2](!0)/n[2]())>=r.input[1];return s.newMass<r.mass*r.input[0]&&!i||t.strangeness[4][5]<1?!1:(xt(),!0)}return s.newMass>r.mass||s.starCheck[0]>0||s.starCheck[1]>0||s.starCheck[2]>0},Ke=async()=>{if(!rt())return;let{collapse:e}=t,{collapseInfo:s}=a,r=t.researchesExtra[4][0],n=!0;if(t.toggles.normal[5]||t.stage.active!==4){let i=t.stage.active===4?`This will reset all non automization researches and upgrades. Total Mass ${s.newMass<=e.mass?"won't change":`will be now ${m(s.newMass)}`}`:`Collapse attempt while inside '${a.stageInfo.word[t.stage.active]}'.
Solar mass will increase by +${m(s.newMass-e.mass)}`;e:if(r>=1){if(i+=`, also will get ${m(s.starCheck[0])} Red giants`,r<2||(i+=`, ${m(s.starCheck[1])} Neutron stars`,r<3))break e;i+=` and ${m(s.starCheck[2])} Black holes`}e.mass>=1e5&&t.buildings[5][3].true>0&&(i+=`.
This ${f($e(3,5)).moreThan(Math.max(t.collapse.mass,s.newMass))?"wont":"will"} be enough Mass for a new Galaxy`),t.stage.active!==4&&(i+=`.
Continue?`),n=await q(i)}if(n&&(Ce(),xt(),a.screenReader)){let i=`Mass has been increased to ${m(e.mass)}`;e:if(r>=1){if(i+=`, Red giants to ${m(e.stars[0])}`,r<2||(i+=`, Neutron stars - ${m(e.stars[1])}`,r<3))break e;i+=` and Black holes - ${m(e.stars[2])}`}o("SRMain").textContent=i}},xt=()=>{let{collapseInfo:e}=a,{collapse:s}=t,r=t.inflation.vacuum?[1,2,3,4,5]:t.strangeness[5][5]<1?[4,5]:[4];if(e.newMass>s.mass&&(s.mass=e.newMass),s.stars[0]+=e.starCheck[0],s.stars[1]+=e.starCheck[1],s.stars[2]+=e.starCheck[2],s.massMax<s.mass&&(s.massMax=s.mass),O(0,4),O(1,4),t.challenges.active===0){let n=1+Number(s.stars[0]>1)+Number(s.stars[1]>1)+Number(s.stars[2]>1)+Number(t.elements[26]===1);if(t.challenges.void[4]<n){let i=t.challenges.void[4];for(let l=i;l<n;l++)de(`New Void reward achieved
Reward: ${a.challengesInfo.rewardText[0][4][l]}`);t.challenges.void[4]=n,n>3&&i<4&&v(9,3,"strangeness",!0)}}we("collapse",r),v(0,4,"researches"),v(1,4,"researches"),v(2,4,"researches")},Re=(e,s)=>{let{need:r,reward:n}=a.milestonesInfo[s],i=t.milestones[s][e];if(t.inflation.vacuum)s===1?e===0?(r[0]=f("1e100").power(i).multiply("1e100").toArray(),n[0]=1.04**i):e===1&&(r[1]=f(5e4+5e4*i).toArray(),n[1]=Math.floor((2*i)**1.11)):s===2?e===0?(r[0]=f("1e2").power(i).multiply("1e2").toArray(),n[0]=3**i):e===1&&(r[1]=f(1e3+1e3*i).toArray(),n[1]=1.12**i):s===3?e===0?(r[0]=f("1e4").power(i).multiply("1e-16").toArray(),n[0]=1.08**i):e===1&&(r[1]=f(5+5*i).toArray(),n[1]=i/200):s===4?e===0?(r[0]=f("1e6").power(i).multiply("1e6").toArray(),n[0]=1.14**i):e===1&&(r[1]=f(50+50*i).toArray(),n[1]=1.03**i):s===5&&(e===0?(r[0]=f("10").power(i).multiply("10").toArray(),n[0]=1.06**i):e===1&&(r[1]=f(2+2*i).toArray(),n[1]=i/10));else{let l=a.milestonesInfo[s].scalingOld[e];r[e]=i<l[0].length?f(l[0][i]).toArray():[0,0],n[e]=i<l[1].length?l[1][i]:0}},O=(e,s,r=0)=>{if(!ct(e,s)){r>0&&(de(`Milestone '${a.milestonesInfo[s].name[e]}' ${r>1?`${m(r)} new tiers`:"new tier"} reached
Total is now: ${m(t.milestones[s][e])}`),t.inflation.vacuum&&(s===1?e===1&&(Se(),O(1,1)):s===4&&e===1&&X()));return}if(!t.inflation.vacuum){let n=a.milestonesInfo[s].reward[e];t.strange[0].current+=n,t.strange[0].total+=n}t.milestones[s][e]++,Re(e,s),O(e,s,r+1)},At=async e=>{if(t.challenges.active===e){await q(`Leave the '${a.challengesInfo.name[e]}'?`)&&Mt(),le(e);return}if(!t.inflation.vacuum||e===0&&t.strangeness[5][0]<1||!await q(`Enter the '${a.challengesInfo.name[e]}'?
Stage reset will be forced`))return;let s=he(5);e===0&&(a.researchesExtraInfo[4].startCost[0]=1e14,X()),t.challenges.active=e,s?nt(5):(t.stage.active=1,t.stage.current=1,Ge([1,2,3,4,5])),le(e),a.screenReader&&(o("SRTab").textContent=`'${a.challengesInfo.name[e]}' is now active`)},Mt=()=>{let e=t.challenges.active;t.challenges.active=-1,e===0&&(a.researchesExtraInfo[4].startCost[0]=1e6,X()),t.stage.active=1,t.stage.current=1,Ge([1,2,3,4,5]),a.screenReader&&(o("SRTab").textContent=`You left the '${a.challengesInfo.name[e]}'`)};console.time("Game loaded in");var t={version:"v0.1.5",fileName:"Fundamental, [date] [time], [stage]",separator:["","."],stage:{true:1,current:1,active:1,resets:0,export:86400,best:0,time:0,input:1},discharge:{unlock:!1,energy:0,energyMax:0,current:0},vaporization:{clouds:[1,0],cloudsMax:[1,0],input:10},accretion:{rank:0,input:600},collapse:{mass:.01235,massMax:.01235,elementsMax:[1,0],stars:[0,0,0],show:[],input:[4,2]},inflation:{vacuum:!1,age:0},intervals:{main:50,numbers:100,visual:1,autoSave:60},time:{updated:Date.now(),started:Date.now(),offline:0},buildings:[[],[{current:[3,0],total:[3,0],trueTotal:[3,0],highest:[3,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[2.8,-3],total:[2.8,-3],trueTotal:[2.8,-3],highest:[2.8,-3]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,-19],total:[1,-19],trueTotal:[1,-19],highest:[1,-19]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[1,0],total:[1,0],trueTotal:[1,0],highest:[1,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}],[{current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]},{true:0,current:[0,0],total:[0,0],trueTotal:[0,0],highest:[0,0]}]],strange:[{current:0,total:0},{current:0,total:0}],upgrades:[],researches:[],researchesExtra:[],researchesAuto:[],ASR:[],elements:[],strangeness:[],milestones:[],challenges:{active:-1,void:[0,0,0,0,0,0]},toggles:{normal:[],buildings:[],auto:[],shop:{howMany:1,input:10,strict:!0}},history:{stage:{best:[0,1,0],list:[],input:[5,10]}},events:[!1,!1,!1]},a={tab:"stage",subtab:{stageCurrent:"Structures",settingsCurrent:"Settings",researchCurrent:"Researches",strangenessCurrent:"Matter"},tabList:{tabs:["stage","research","strangeness","settings"],stageSubtabs:["Structures","Advanced"],settingsSubtabs:["Settings","History","Stats"],researchSubtabs:["Researches","Elements"],strangenessSubtabs:["Matter","Milestones"]},lastActive:null,versionBuild:!1,lastSave:0,timeMode:!0,footer:!0,mobileDevice:!1,screenReader:!1,automatization:{autoU:[[],[],[],[],[],[]],autoR:[[],[],[],[],[],[]],autoE:[[],[],[],[],[],[]],elements:[]},theme:{stage:1,default:!0},dischargeInfo:{getEnergy:(e,s)=>{let r=a.dischargeInfo.energyType[s][e];return s===1&&e===1&&(r+=t.strangeness[1][4]*(t.inflation.vacuum?2:1)),t.inflation.vacuum&&(t.challenges.active===0&&(r-=Math.ceil(r/5)),r+=Math.floor(r/100*a.milestonesInfo[1].reward[1])),r},energyType:[[],[0,1,3,5,10,20],[0,40,60,80,100,125,150],[0,5,15,30,50,80],[0,100,200,300,400,500],[0,600,600,2e3,4e3]],bonus:0,next:1},vaporizationInfo:{effect2U1:()=>a.upgradesInfo[2].effect[1]=1e10/3**t.strangeness[2][3],effect2RE3:()=>a.researchesExtraInfo[2].effect[3]=1+Math.floor(f(t.vaporization.clouds).log(10).toNumber()),get:[0,0]},accretionInfo:{effective:0,rankU:[1,1,2,2,3,3,4,4,4,4,5,5,5],rankR:[1,1,2,2,3,3,4,5],rankE:[2,3,4,5,3],rankCost:[597e25,1e-7,1e10,1e24,5e29,247e29,0],rankName:["Ocean world","Cosmic dust","Meteoroid","Asteroid","Planet","Jovian planet","Protostar"],rankImage:["Ocean%20world.png","Dust.png","Meteoroids.png","Asteroid.png","Planet.png","Giant.png","Protostar.png"]},collapseInfo:{unlockB:[0,.01235,.23,10,40,1e3],unlockG:[0,100,1e3,1e5],unlockU:[.01235,.076,1.3,10],unlockR:[.18,.3,.8,1.3],newMass:0,massEffect:(e=!1)=>{let s=t.collapse.mass;return e&&a.collapseInfo.newMass>s&&(s=a.collapseInfo.newMass),t.elements[21]===1&&(s**=1.1),s},starCheck:[0,0,0],starEffect:[(e=!1)=>{let s=t.collapse.stars[0]+1;return e&&(s+=a.collapseInfo.starCheck[0]),t.elements[6]===1&&(s**=a.elementsInfo.effect[6]),s},(e=!1)=>{let s=t.collapse.stars[1]+1;e&&(s+=a.collapseInfo.starCheck[1]),t.elements[22]===1&&(s+=t.collapse.stars[0],e&&(s+=a.collapseInfo.starCheck[0]));let r=s**(.5+.01*t.strangeness[4][11]);return t.elements[12]===1&&s>10&&(r*=bt(s,a.elementsInfo.effect[12])),r},(e=!1)=>{let s=t.collapse.stars[2];return e&&(s+=a.collapseInfo.starCheck[2]),s<1?1:(s+1)/Math.log10(s+(t.elements[18]===1?9:99))}],trueStars:0},inflationInfo:{preonCap:[2,13],dustCap:[5,45],massCap:600},intervalsId:{main:void 0,numbers:void 0,visual:void 0,autoSave:void 0},stageInfo:{word:["","Microworld","Submerged","Accretion","Interstellar","Intergalactic","Void"],textColor:["","var(--cyan-text-color)","var(--blue-text-color)","var(--gray-text-color)","var(--orange-text-color)","var(--darkorchid-text-color)","var(--darkviolet-text-color)"],buttonBackgroundColor:["","mediumblue","blue","#291344","#6a3700","#4a008f","#2b0095"],buttonBorderColor:["","darkcyan","#427be1","#404040","#9f6700","#8a0049","#711bda"],imageBorderColor:["","#008b8b","#1460a8","#5b5b75","#e87400","#b324e2","#5300c1"],priceName:"Energy",activeAll:[1]},buildingsInfo:{maxActive:[0,4,6,5,5,4],name:[[],["Mass","Preons","Quarks","Particles","Atoms","Molecules"],["Moles","Drops","Puddles","Ponds","Lakes","Seas","Oceans"],["Mass","Cosmic dust","Planetesimals","Protoplanets","Satellites","Subsatellites"],["Elements","Brown dwarfs","Main sequence","Red supergiants","Blue hypergiants","Quasi stars"],["Stars","Nebulas","Clusters","Galaxies","Filaments"]],type:[[],["","producing","producing","producing","producing","producing"],["","producing","producing","improves","improves","improves","improves"],["","producing","producing","producing","improves","improves"],["","producing","producing","producing","producing","producing"],["","producing","improves","improves","improves"]],firstCost:[],startCost:[[],[0,.005476,6,3,24,3],[0,.0028,100,1e7,1e18,1e23,2676e22],[0,1e-19,1e-9,1e21,1e17,1e22],[0,1,1e5,1e16,1e31,1e58],[0,1e30,1e40,1e5,100]],increase:[[],[0,1.4,1.4,1.4,1.4,1.4],[0,1.2,1.2,1.2,1.2,1.2,1.2],[0,1.15,1.15,1.15,10,10],[0,1.4,1.55,1.7,1.85,2],[0,4,4,1.11,1.11]],producing:[[],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0]]]},strangeInfo:{Element28:()=>{let e=f(t.collapse.elementsMax).log(10).toNumber()-52;return!t.inflation.vacuum&&t.upgrades[5][2]===1&&(e**=1.5),a.elementsInfo.effect[28]=Math.max(Math.floor(e),0)},gain:e=>{let s=1;return(e>=4||t.inflation.vacuum)&&(t.elements[27]===1&&(s+=2),t.elements[28]===1&&(s+=a.strangeInfo.Element28())),t.inflation.vacuum&&(s+=3,t.researchesExtra[2][3]>=1&&(s+=a.vaporizationInfo.effect2RE3()),s*=a.milestonesInfo[5].reward[0]),t.strangeness[5][1]>=1&&(s*=2),Math.floor(s)},stageBoost:[null,null,null,null,null,null],strangeName:["Strange quarks","Strangelets"]},upgradesInfo:[{},{name:["Weak force","Strong force","Bigger electrons","Stronger protons","More neutrons","Superposition. Unlock a new reset tier","Protium. Basic","Deuterium. Heavy","Tritium. Radioactive","Nuclear fusion"],effectText:[()=>"Particles produce 5 times more Quarks.",()=>"Gluons now bind Quarks into Particles, which makes Particles 10 times cheaper.",()=>`${t.inflation.vacuum?"Atoms":"Particle"} cost is 10 times cheaper.`,()=>`${t.inflation.vacuum?"Atoms":"Particle"} produce 10 times more ${t.inflation.vacuum?"Particles":"Quarks"}.`,()=>`${t.inflation.vacuum?"Molecules":"Atoms"} produce 5 times more ${t.inflation.vacuum?"Atoms":"Particles"}.`,()=>`Ability to reset at any time, and if had enough Energy, then production for all Structures will also be boosted by ${m(a.upgradesInfo[1].effect[5])} times.
Total boost from reached goals is: ${f(a.upgradesInfo[1].effect[5]).power(t.discharge.current+a.dischargeInfo.bonus).format()}.`,()=>`Cost scaling is decreased by ${m(a.upgradesInfo[1].effect[6])}.`,()=>`Structures (only self-made one's) boost themselves by ${m(a.upgradesInfo[1].effect[7])} times.`,()=>`Molecules produce Molecules. At a reduced rate. (${f(a.upgradesInfo[1].effect[8]).format({padding:!0})} per second)`,()=>"Unspent Energy boost Molecules production of themselves 1 to 1."],effect:[null,null,null,null,null,4,.2,1.01,0,null],startCost:[32,48,60,90,150,400,1600,4e3,32e3,1e5],maxActive:10},{name:["Molecules to Moles","Vaporization. Unlock a new reset tier","Surface tension","Surface stress","Stream","River","Tsunami","Tide"],effectText:[()=>"Drops will produce Moles even more for every self-made Drops.",()=>{fe();let e=f(t.vaporization.clouds).plus(a.vaporizationInfo.get).moreOrEqual(t.inflation.vacuum?We():"1e4"),s;return t.challenges.active===0?s=m(e?.28:.38):t.inflation.vacuum?s=m(e?.3:.4):s=m(e?.36:.6),`Gain ability to convert Drops into Clouds. (Puddles get a boost equal to Cloud amount)
Current Cloud gain is (Drops / ${m(a.vaporizationInfo.effect2U1())})^${s}.${e?" (Softcapped)":""}`},()=>`Puddles get boost based on Moles. (Equal to Moles ^${m(a.upgradesInfo[2].effect[2])})`,()=>`Puddles get boost based on Drops. (Equal to Drops ^${m(a.upgradesInfo[2].effect[3])})`,()=>`Ponds now create extra Puddles. (${m(a.upgradesInfo[2].effect[4])} extra Puddles per Pond)`,()=>`Lakes now create extra Ponds. (${m(a.upgradesInfo[2].effect[5])} extra Ponds per Lake)`,()=>"Spreads enough water to make each Sea create 1 extra Lake.",()=>"Spreads water too fast. 1 extra Sea per Ocean."],effect:[null,1e10,.02,.02,1,1,null,null],startCost:[10,1e10,1e3,1e4,2e9,5e20,1e28,1e44],maxActive:7},{name:["Brownian motion","Gas. New substance for Accretion","Micrometeoroid. Unlock a new Structure","Streaming instability","Gravitational field. Unlock a new Structure","Rubble pile","Satellite system","Magma ocean","Hydrostatic equilibrium","Atmosphere","Pebble accretion","Tidal force","Ring system"],effectText:[()=>`Through random collisions every self-made Dust speeds up Accretion speed. (By ${m(a.upgradesInfo[3].effect[0])})`,()=>`Accretion speed is now quicker based on current Dust amount. (${f(a.upgradesInfo[3].effect[1]).format()} boost)`,()=>"Just a small meteoroid, but it will be a good base for what to come. (Also 2x boost to Dust)",()=>`Small bodies spontaneously concentrate into clumps. (Self-made Planetesimals boost each other by ${m(1.02)})`,()=>"Bodies are now massive enough to affect each other with gravity. (4x boost to Planetesimals)",()=>"Shattered pieces fall back together. Mass production is now even bigger. (By 3x)",()=>"Unlock yet another Structure.",()=>`Core melted, Accretion speed increased. (Mass production increased by ${m(a.upgradesInfo[3].effect[7])})`,()=>"After reaching equilibrium, Protoplanets will boost themselfs, more with each self-made one.",()=>"Accretion speed increased again (because of drag and escape velocity), by 2.",()=>`Accretion speed greatly increased by ${m(a.upgradesInfo[3].effect[10])}.`,()=>"Satellites scaling cost is now 2 times smaller.",()=>"Satellites effect scales better."],effect:[1.01,0,null,null,null,null,null,2,null,null,10,null,null],startCost:[1e-16,1e-13,1e-13,1,1e14,1e17,1e22,1e11,1e22,1e23,1e9,1e26,1e29],maxActive:13},{name:["Gravitational collapse","Proton-proton chain","Carbon-Nitrogen-Oxygen cycle","Helium fusion"],effectText:[()=>"As fuel runs out, each star will boost production in its own special way.",()=>`Fuse with Protium instead of Deuterium. ${t.inflation.vacuum?"Unlock 5 first Elements.":`Unlock a new Structure and something else.
(Somewhere in Research tab)`}`,()=>`CNO cycle is now a better source of Helium and Energy. ${t.inflation.vacuum?"Unlock 5 more Elements":"Unlock a new Structure and more of something else"}.`,()=>"Through Triple-alpha and then Alpha process, unlock a few more Elements."],effect:[null,null,null,null],startCost:[100,1e3,1e9,1e50],maxActive:4},{name:["Jeans instability","Super star cluster","Quasar"],effectText:[()=>`Gravitational collapse within Nebulas will increase speed for production of Stars by ${m(a.upgradesInfo[5].effect[0])} times.`,()=>`A very massive Star clusters, that will boost Stars by ${m(a.upgradesInfo[5].effect[1])}.`,()=>t.inflation.vacuum?`Boost per Galaxy increased by +${m(.2)}`:`'[28] Nickel' Element receives super boost of ^${m(1.5)}.`],effect:[4,6,null],startCost:[1e50,1e60,1e140],maxActive:3}],researchesInfo:[{},{name:["Stronger 'Protium'","Better 'Deuterium'","Bigger 'Tritium'","Discharge requirement decreased","Discharge improved","Radioactive Discharge"],effectText:[()=>`Cost scaling is ${m(.01)} smaller for each level.`,()=>`Each self-made Structure, boost each other by additional ${m(.01)}.`,()=>`Molecules now produce themselves ${m(a.researchesInfo[1].effect[2])} times quicker.`,()=>"Next goal for Discharge bonus scales by -1 less.",()=>"Discharge is now provides 2 times bigger bonus per reached goal.",()=>"Discharge will boost 'Tritium' upgrade for every reached goal + 1."],effect:[null,null,12,null,null,null],cost:[],startCost:[2500,8e3,4e4,8e3,58e3,36e3],scaling:[500,4e3,6e3,38e3,0,8e3],max:[9,3,9,2,1,3],maxActive:6},{name:["Better Mole production","Condensation","Stronger surface tension","Stronger surface stress","More streams","Distributary channel"],effectText:[()=>"Drops produce 3 times more Moles.",()=>`Through condensation bonus to Structure production is now based on total produced, instead of current amount.
Level 1 for Drops, level 2 for Moles.`,()=>`Surface tension upgrade is now +${m(t.inflation.vacuum?.03:.02)} stronger.`,()=>`Surface stress upgrade is now +${m(t.inflation.vacuum?.02:.03)} stronger.`,()=>"With more streams, can have even more extra Puddles. (+1 extra Puddles per Pond)",()=>"Rivers can split now, that allows even more Ponds per Lake. (+1 per)"],effect:[null,null,null,null,null,null],cost:[],startCost:[20,1e12,1e5,1e6,1e14,1e22],scaling:[1.2,1e3,1e3,1e4,1e3,100],max:[9,2,3,3,2,2],maxActive:6},{name:["More massive bodies","Adhesion","Space weathering","Inelastic collisions","Contact binary","Gravity","Planetary differentiation","Aerodynamic drag"],effectText:[()=>"Dust production is increased by 3.",()=>`Dust particles cling to each other. (+${m(.01)} to 'Brownian motion')`,()=>"Planetesimals produce more Dust. (3 times more)",()=>"Slow encounter velocities will result in a more efficient growth, so this research will make bodies lose more energy with each deflection. Mass production increased by 2.",()=>"Some Planetesimals instead of shattering form a contact binary or even trinary. Planetesimals production boosted by 5x.",()=>`Planetesimals attract other bodies with own gravity. Planetesimals get boost to production based on unspent Mass.
(Total boost: ${m(a.researchesInfo[3].effect[5],{padding:!0})}${t.inflation.vacuum&&a.researchesInfo[3].effect[5]>=4e3?", hardcapped":""})`,()=>`'Magma Ocean' upgrade is stronger now. (${m(1.5)}x times)`,()=>`Accretion speed for 'Pebble accretion' increased again, by ${t.inflation.vacuum?2:3}.`],effect:[null,null,null,null,null,0,null,null],cost:[],startCost:[1e-14,1e-15,1e-5,1e5,1e10,1e15,1e13,1e12],scaling:[11,111,22,10,100,10,1e5,1e3],max:[7,3,9,4,2,5,3,3],maxActive:8},{name:["Planetary system","Star system","Protoplanetary disk","Planetary nebula"],effectText:[()=>`From Planetesimals to Planets, will get ${m(a.researchesInfo[4].effect[0])}x boost to all Stars.`,()=>`Each Star boost another Star. (Total to each Star is ${f(a.researchesInfo[4].effect[1]).format({padding:!0})}x${a.researchesInfo[4].effect[1][1]>=10?", softcapped":""})`,()=>"Improve effect of 'Planetary system', as well increases its max level by +3.",()=>"Matter expelled from Red giants, but get 10x boost to Main-sequence stars anyway."],effect:[1.1,1,null,null],cost:[],startCost:[1e3,5e4,1e8,1e12],scaling:[10,200,1e12,0],max:[3,2,1,1],maxActive:4},{name:["Higher density","Type frequency"],effectText:[()=>{let e=Math.min(t.researches[5][0]+2,4);return`Higher density of Nebulas, will allow them to produce higher tier of Stars, but each tier is 4 times slower than previous one. Also will boost Nebulas by 4.
Next tier will be ${t.buildings[4][e].trueTotal[0]===0?"(unknown)":a.buildingsInfo.name[4][e]}.`},()=>{let e=Math.max(3-t.researches[5][1],1);return`More types of Stars are found within Star cluster. Increasing effect by 3, but also boosting lower tier of Stars. (3 times less than higher one)
Next tier will be ${t.buildings[4][e].trueTotal[0]===0?"(unknown)":a.buildingsInfo.name[4][e]}.`}],effect:[null,null],cost:[],startCost:[1e40,1e55],scaling:[1e20,1e15],max:[3,3],maxActive:2}],researchesExtraInfo:[{},{name:["Extra strong force","Better radiation base","Accretion","Later Preons","Impulse"],effectText:[()=>"Mesons now binds Particles to form Atoms as well. Atoms are affected by strong force.",()=>`Improve formula for Radiation, ${t.researchesExtra[1][1]<1?"logE > log2":`log${m(a.researchesExtraInfo[1].effect[1])}${t.researchesExtra[1][1]<10?` > log${m(a.researchesExtraInfo[1].effect[1]-.1)}`:""}`}.`,()=>`First level is to begin the Accretion, second level is to Submerge it.
Everything is connected. All Structures produce Energy on creation.`,()=>`Hardcap for Mass production from Preons is delayed by current Energy ^${m(a.researchesExtraInfo[1].effect[3])}.`,()=>`Discharge goals can now boost all Structures from Submerged, Accretion and Interstellar Stages, but at reduced base.
Current base is ${m(a.researchesExtraInfo[1].effect[4])}, total boost is ${f(a.researchesExtraInfo[1].effect[4]).power(t.discharge.current+a.dischargeInfo.bonus).format()}.`],effect:[null,2,null,1e13,1.04],cost:[],startCost:[12e3,42e3,24e3,46e3,2e5],scaling:[0,8e3,72e3,36e3,0],max:[1,10,2,4,1],maxActive:0},{name:["Natural Vaporization","Rain Clouds","Storm Clouds","Ocean world"],effectText:[()=>"Clouds will now use total produced Drops instead, when formed.",()=>`Some Clouds will start pouring Drops themselves. (${t.inflation.vacuum?`Improves Puddles by ${m(a.researchesExtraInfo[2].effect[1])} in total`:`${m(a.researchesExtraInfo[2].effect[1])} per second`})`,()=>`Seas get a boost based on amount of Clouds. (Equal to ${f(a.researchesExtraInfo[2].effect[2]).format({padding:!0})})`,()=>`On Stage reset gain extra Strange reward${t.strangeness[5][9]>=1?" (true value)":""} for every new digit of Clouds, as well +1. (Currently +${m(a.vaporizationInfo.effect2RE3())})`],effect:[null,0,0,1],cost:[],startCost:[1e16,1e13,1e26,1e10],scaling:[0,100,0,0],max:[1,4,1,1],maxActive:3},{name:["Rank boost","Efficient growth","Weight","Viscosity","Efficient submersion"],effectText:[()=>`Dust production is increased by another ${m(a.researchesExtraInfo[3].effect[0])}.`,()=>`Accretion speed is even quicker. Multiplied by effective Rank. (Total boost to Dust: ${m(a.researchesExtraInfo[3].effect[1])})`,()=>"'Gravitational field' upgrade will boost Protoplanets now as well. (Only half of effect)",()=>"'Gas' upgrade is now stronger.",()=>`'Efficient growth' now boost Puddles as well. (Current boost is: ${m(a.researchesExtraInfo[3].effect[4])})`],effect:[0,0,null,null,0],cost:[],startCost:[1e-18,1e-16,1e26,1e-12,1e21],scaling:[10,100,0,1e14,1e5],max:[12,5,1,2,1],maxActive:4},{name:["Nova","White dwarfs"],effectText:[()=>{let e=Math.min(t.researchesExtra[4][0]+2,4);return`${t.buildings[4][e].trueTotal[0]===0?"(Unknown)":a.buildingsInfo.name[4][e]} Stars are now creating something new, upon collapse reset.`},()=>"Red giants are turning into White dwarfs, this will improve effect of '[6] Carbon' Element."],effect:[null,null],cost:[],startCost:[1e6,1e50],scaling:[1e12,0],max:[3,1],maxActive:2},{name:[],effectText:[],effect:[],cost:[],startCost:[],scaling:[],max:[],maxActive:0}],researchesAutoInfo:{name:["New toggles","Offline storage capacity","Automatic upgrades"],effectText:[()=>!t.inflation.vacuum&&t.strange[0].total===0?"Unlock ability to make multiple Structures at same time.":`First level is for making multiple Structures at same time.
Second level is to turn OFF/ON all auto toggles at once.
Third level improves control for auto/Warp consumption of Offline storage.`,()=>`Research this to increase capacity of Offline storage by +${t.stage.true>=6?8:4} hours.`,()=>`This is going to create all upgrades automatically. Each level increases highest type of upgrades to create.
(Upgrades > Researches > Special researches)`],cost:[],startCost:[2e3,1e9,1],scaling:[29e3,2e4,1e10],max:[1,1,0],autoStage:[1,2,3]},ASRInfo:{cost:[0,4e3,1e10,1e-7,1e6,1],costRange:[[],[4e3,12e3,24e3,32e3,44e3],[1e10,1e13,1e16,1e24,1e28,1e40],[1e-7,1e10,5e29,2e30,1e36],[1e6,1e17,1e28,1e39,1e70],[1,1,1,1]],max:[0,5,5,4,4,0]},elementsInfo:{name:["[0] Neutronium","[1] Hydrogen","[2] Helium","[3] Lithium","[4] Beryllium","[5] Boron","[6] Carbon","[7] Nitrogen","[8] Oxygen","[9] Fluorine","[10] Neon","[11] Sodium","[12] Magnesium","[13] Aluminium","[14] Silicon","[15] Phosphorus","[16] Sulfur","[17] Chlorine","[18] Argon","[19] Potassium","[20] Calcium","[21] Scandium","[22] Titanium","[23] Vanadium","[24] Chromium","[25] Manganese","[26] Iron","[27] Cobalt","[28] Nickel"],effectText:[()=>`Element with no protons, true head of this table.
This one is ${Math.random()<.1?Math.random()<.1?"an illusive Tetraneutron, or maybe even Pentaneutron, wait where did it go? Was it even there?":"a rare Dineutron, but it is already gone...":"a simple Mononeutron, it will stay with you for as long as it can."}`,()=>`Most basic Element, increases Brown dwarf production by 2.
Also Solar mass effect is now known - boost to all Stars.`,()=>`Fusion reaction by product, makes everything Interstellar scale ${m(.1)} less.`,()=>`First metal, Mass ${t.inflation.vacuum?"hardcap for Cosmic dust":""} per Brown dwarf lightly ${t.inflation.vacuum?"delayed":"increased"}.`,()=>`Brittle earth metal, so is brittle increase to production. (${m(1.1)}x to all Stars)`,()=>`A new color, and a new ${t.inflation.vacuum?"delay to Mass hardcap for Cosmic dust":"boost to Mass gain"} that is based on current Dwarf Stars.`,()=>`Base for organics, boost from Red giants is now increased to the power of ${m(a.elementsInfo.effect[6])}.
Red giants effect is now known - boost to all Main-sequence stars.`,()=>"Most abundant uncombined Element in atmosphere of some Planets, also allows to have 2 extra levels of 'Star system'.",()=>`An oxidizing agent, that will make everything Interstellar scale even slower. (${m(.05)} less)`,()=>"Highly toxic and reactive, +12 to max level of 'Planetary system'.",()=>`A noble 2x ${t.inflation.vacuum?"delay to Cosmic dust hardcap":"boost to Mass gain"}.`,()=>"Through leaching, get 1 extra level of 'Protoplanetary disk'.",()=>`Stars are inside you, as well Neutrons stars strength is now increased by ${a.elementsInfo.effect[12]<10?"the decimal logarithm":`log${m(a.elementsInfo.effect[12])}`}.
Neutron stars effect is now known - boost to all Stars.`,()=>`Has a great affinity towards Oxygen and to decrease cost of all Stars by ${m(1e3)}.`,()=>`Number is 14, group is 14, melts at ${m(1414)}\xB0C and so is Mass ${t.inflation.vacuum?"hardcap for Cosmic dust delayed":"gain increased"} by ${m(1.4)}.`,()=>`One of the Fundamentals of Life and to make all of Stars ${t.inflation.vacuum?"delay Mass hardcap (Cosmic dust)":"boost Mass"}.`,()=>"From hot area, to increase max level of 'Star system' by 1.",()=>"Extremely reactive to extend max level of 'Planetary system', by another 27 levels.",()=>`Less noble boost, but Black holes effect scales a little better.
Black holes effect is now known - ${t.inflation.vacuum?"delay for Preon Mass hardcap":"boost to Solar mass gain"}.`,()=>"Don't forget about it and get a 3x boost to all Stars.",()=>"Get stronger with 1 extra level of 'Star system'.",()=>`A new color and a rare bonus of ^${m(1.1)} to Mass effect.`,()=>"New alloy allowing Red giants to be added into effective amount of Neutron stars.",()=>"Catalyst for production of Elements. Black holes boost all Stars by the decimal logarithm.",()=>`No corrosion, only boost to all Stars that is based on unspent Elements^${m(.01)}.`,()=>"Brittle Element, but not the bonus - 1 more level in 'Star system'.",()=>`Any further fusion will be an endothermic process. Gain 2x boost to all Stars, ${t.inflation.vacuum?"unlock Stage reset.":`but what next?
Unlock ability to switch between Stages. (Also enter a new Stage)`}`,()=>"While new Elements won't produce much Energy, this one can create 2 extra Strange quark for this Stage reset.",()=>`Slow to react, but gain extra ${t.strangeness[5][9]>=1?"to Strange reward (true value)":"Strange quarks"} for every new reached digit past 52 anyway.
(+${m(a.strangeInfo.Element28())} for this Stage reset)`],effect:[null,null,null,null,null,null,1.5,null,null,null,null,null,10,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0],startCost:[0,1e3,4e3,2e4,1e5,1e8,1e10,4e11,2e13,1e14,1e16,1e20,1e24,1e25,14e26,1e30,1e31,5e31,5e33,1e35,1e36,1e38,2e39,3e41,4e42,1e45,1e50,1e52,1e55]},strangenessInfo:[{},{name:["Stronger Discharge","Cheaper Discharge","Free Discharge","Automatic Discarge","Increased Energy","Improved 'Tritium'","Keep auto Structures","More toggles","Strange boost","Micro boost","Fundamental boost","Energy recycle"],effectText:[()=>"Base Discharge effect is now +1.",()=>"Discharge goal scales slower. (-1)",()=>"Obtain +1 bonus Discharge goal.",()=>`Automatically Discharge upon creating an upgrade or reaching next goal.${t.strangeness[1][11]>=1?`
Second level - auto Discharge for reaching new goal doesn't cause an reset.`:""}`,()=>`Gain more Energy from creating ${t.inflation.vacuum?"Preons, +2":"Particles, +1"}.`,()=>`Research for improved 'Tritium' upgrade is now better. (+${m(t.inflation.vacuum?.4:.3)})`,()=>`Always have auto for ${a.buildingsInfo.name[1][Math.min(t.strangeness[1][6]+1,a.ASRInfo.max[1])]}.`,()=>`Increase max level of 'New toggles'.${t.inflation.vacuum?"":" Also keep them on Stage reset."}`,()=>`Unspend Strange quarks will boost this Stage. (${t.inflation.vacuum?"Bonus goals":"Stronger radiation"})`,()=>`Minor boost of ${m(1.2)}x per level to all Microworld structures.`,()=>`Minor boost of ${m(1.05)}x per level to Impulse affected Stages. (Doesn't require Impulse to work)`,()=>`Energy is no longer gained on Structure creation, but instead it's based on current self-made amount of Structures.
First step towards something more.`],cost:[],startCost:[2,1,20,40,2,1,2,4,20,2,900,3e3],scaling:[3,3,2,100,3,1.4,1.8,3,1,2.1,2.1,1],max:[4,4,2,1,2,5,3,1,1,4,4,1],maxActive:9},{name:["More Moles","Bigger Puddles","More spread","Cloud density","Automatic Vaporization","Keep auto Structures","Longer offline","Longest offline","Strange boost","New Structure","Isolation"],effectText:[()=>"Mole production increased by 2x.",()=>"Puddles produce 2 times more.",()=>`Increase max level of some researches by +1.
Final level will instead unlock a new upgrade.`,()=>"Decrease requirement per Cloud.",()=>`Automatically Vaporize when reach certain amount.${t.strangeness[1][11]>=1?`
Second level - gain 1% of Clouds per second.`:""}`,()=>`Always have auto for ${a.buildingsInfo.name[2][Math.min(t.strangeness[2][5]+1,a.ASRInfo.max[2])]}.`,()=>`Increase max offline time research level.${t.inflation.vacuum?"":" Also keep them on Stage reset."}`,()=>t.stage.true<6?"Max offline time is now 50% longer. (Additive)":"Offline time being wasted less, -1 second per level.",()=>"Unspend Strange quarks will boost this Stage. (Puddle production)",()=>`Unlock a new Structure. (Requires level 5 of 'Keep auto Structures')${t.challenges.void[2]>=2?`
Second level will unlock new upgrade instead.`:""}`,()=>"Submerged is no longer affected by or affects non Microworld Stage reset types. (Requires level 1 of 'Energy recycle')"],cost:[],startCost:[1,2,3,4,20,4,1,4,30,32,5e3],scaling:[1.5,2,3,3,500,1.6,2,4,1,11,1],max:[6,6,3,3,1,5,4,2,1,1,1],maxActive:9},{name:["Faster Accretion","Intense weathering","More levels","Improved Satellites","Automatic Rank","Keep auto Structures","Automatization for Upgrades","Strange boost","New Structure","Mass shift","One dust","Massive Ranks"],effectText:[()=>`Accretion speed is 2 times faster. (Affected by ${t.inflation.vacuum?"hard":"soft"}cap)${a.strangenessInfo[3].max[0]>8?`
Softcapped after 8 levels, each new level will be only half as effective.`:""}`,()=>"All Accretion Structures that produce another Structure now do it 2 times faster.",()=>`Some Rank researches receive extra Max level.
Final level will instead unlock a new upgrade.`,()=>`Satellites now improve all Accretion Structures${t.inflation.vacuum?" with reduced strength":""}.`,()=>`Automatically increase Rank when available.${t.strangeness[1][11]>=1?`
Second level - once hardcap for Cosmic dust is reached, all Mass related Structures will be made only when cost is times of Solar hardcap.`:""}`,()=>`Always have auto for ${a.buildingsInfo.name[3][Math.min(t.strangeness[3][5]+1,a.ASRInfo.max[3])]}.`,()=>`Unlock automatization for Upgrades / Researches.${t.inflation.vacuum?"":" (Not affected by Stage reset)"}`,()=>`Unspend Strange quarks will boost this Stage. (${t.inflation.vacuum?"Effective Rank":`Cheaper Accretion)
(Scales slower past 800 Strange quarks`})`,()=>"Unlock a new Structure. (Requires level 4 of 'Keep auto Structures')",()=>`Allows to shift Cosmic dust and Solar mass hardcaps (in Rank settings). Extra levels allow for 2 times bigger shift.${t.challenges.void[4]>=4?`
Final level is ${m(1.6)} times weaker`:""}`,()=>"After any reset, there will always remain at least one.",()=>"Increase effective Rank by +1 for each level."],cost:[],startCost:[1,2,6,18,30,3,10,20,24,36,12,60],scaling:[1.46,2.5,2,1,200,1.8,3,1,1,4,1,4],max:[8,4,3,1,1,4,3,1,1,3,1,2],maxActive:8},{name:["Hotter Stars","Cheaper Stars","New Upgrade","Main giants","Remnants of past","Automatic Collapse","Keep auto Structures","Daily gain","Max gain","Strange boost","New Structure","Neutronium"],effectText:[()=>`All Stars produce ${m(1.5)} times more Elements.`,()=>"Stars are 2 times cheaper.",()=>`Unlock a new Upgrade.
First one is extra good.`,()=>"25% of Brown dwarfs will turn into Red giants now.",()=>`Elements in Research tab will be ${t.inflation.vacuum?"auto created":"preserved through Collapse reset"}.`,()=>`Stars will Collapse automatically.${t.strangeness[1][11]>=1?`
Second level - Non Solar mass Collapse rewards gained slowly without causing reset.
Third level - Solar mass slowly gained without causing reset.`:""}`,()=>`Always have auto for ${a.buildingsInfo.name[4][Math.min(t.strangeness[4][6]+1,a.ASRInfo.max[4])]}.`,()=>`Creates +${t.inflation.vacuum?2:1} ${t.strangeness[5][9]>=1?"to Strange reward (true value)":"Strange quarks"} per day, can ${t.strangeness[5][9]>=1?"be claimed":"claim only full one's"} only with export.`,()=>t.stage.true>=6?`Reward from Export is now increased by 20% of best Stage reset.
Requires level 3 of 'Daily gain'.`:"Unclaimed Strange quarks max storage is now 1 day longer.",()=>"Unspend Strange quarks will boost this Stage. (All Stars production)",()=>"Unlock a new Structure. (Requires level 4 of 'Keep auto Structures')",()=>"Improve Neutron Stars strength and improve scaling of '[12] Magnesium' effect with every second level."],cost:[],startCost:[1,3,5,5,90,20,4,4,24,40,32,900],scaling:[1.8,2,3,4,1,40,1.8,1.8,1,1,1,1.3],max:[8,4,3,2,1,1,4,3,1,1,1,10],maxActive:10},{name:["Omnipresent reality","Strange gain","Auto Stage","Bigger Nebulas","Denser Clusters","Gravitational bound","Hypercompact stellar system","Auto Structures","New Milestones","Strange growth"],effectText:[()=>t.inflation.vacuum?"Unlock the Void. (Advanced subtab)":`Gain ability to be inside multiple Stages at once. (Next one to always be inside is ${a.stageInfo.word[t.strangeness[5][0]+1]})`,()=>`Gain 2 times more ${a.strangeInfo.strangeName[t.strangeness[5][9]]} from Stage resets.`,()=>"Allows to auto reset Stage, has some special settings.",()=>"Bigger Nebulas, more matter for Accretion. 'Jeans instability' upgrade is 3 times stronger.",()=>"'Super star cluster' is now even bigger. Effect increased by 4.",()=>t.inflation.vacuum?"Unlock Intergalactic Stage.":"Intergalactic is no longer affected by Collapse reset.",()=>"With this, a new Structure, can be created. Second level unlocks auto for it.",()=>"Increase permanent level of auto Structures. It's the only way to do it.",()=>`Unlock ${t.inflation.vacuum?"Void":"Intergalactic"} Milestones.`,()=>`Unlock a new Strange Structure, but it will replace current Stage reward type.
New conversion requires 100 times more of a Strange reward.`],cost:[],startCost:[4,12,4e3,5,10,40,1200,60,1500,800],scaling:[1,1,1,1.8,1.75,1,5,1.5,1,1],max:[3,1,1,9,9,1,2,2,1,1],maxActive:9}],lastUpgrade:[!1,-1],lastResearch:[!1,-1,"researches"],lastElement:[!1,-1],milestonesInfo:[{},{name:["Endless Matter","Energized"],needText:[()=>`Discharge at least ${f(a.milestonesInfo[1].need[0]).format()} ${t.inflation.vacuum?"Preons":"Quarks"} at once.`,()=>`Have current Energy reach ${f(a.milestonesInfo[1].need[1]).format()}.`],rewardText:[()=>t.inflation.vacuum?`All Microworld Structures receive ${m(a.milestonesInfo[1].reward[0])}x boost.`:`Unknown Structure, it doesn't belong to this Universe.
You can view it in stats.`,()=>t.inflation.vacuum?`Energy from creating Stuctures increased by ${m(a.milestonesInfo[1].reward[1])}%. (Rounds down)`:"Stars produce 4 times more Elements."],need:[[1,220],[4,4]],reward:[1,1],scalingOld:[[[1e220,1e240,1e260,1e280,1e300],[1,1,1,1,2]],[[4e4,46e3,52e3,58e3],[1,1,1,2]]],unlock:[5,3]},{name:["A Nebula of Drops","Just a bigger Puddle"],needText:[()=>`Vaporize ${t.inflation.vacuum?"to at least":""} ${f(a.milestonesInfo[2].need[0]).format()} ${t.inflation.vacuum?"Clouds":"Drops at once"}.`,()=>`Have at least ${f(a.milestonesInfo[2].need[1]).format()} Puddles at same time.`],rewardText:[()=>t.inflation.vacuum?`Clouds softcap starts ${m(a.milestonesInfo[2].reward[0])} times later.`:"A new Intergalactic Structure.",()=>t.inflation.vacuum?`Puddles are even stronger, boost is ${m(a.milestonesInfo[2].reward[1])}x.`:`Unknown Structure, it doesn't belong to this Universe.
You can view it in stats.`],need:[[1,30],[3,3]],reward:[1,1],scalingOld:[[[1e30,1e35,1e40,1e45,1e50],[1,1,1,2,3]],[[3e3,5e3,9e3,18e3],[1,2,2,3]]],unlock:[3,4]},{name:["Cluster of Mass","Satellites of Satellites"],needText:[()=>`Have at least ${f(a.milestonesInfo[3].need[0]).format()} Mass at once.`,()=>`Have more Satellites ${t.inflation.vacuum?"and Subsatellites":""} than ${f(a.milestonesInfo[3].need[1]).format()}.`],rewardText:[()=>t.inflation.vacuum?`Accretion speed increased by ${m(a.milestonesInfo[3].reward[0])}x. (Affected by hardcap)`:"A new Intergalactic Structure.",()=>t.inflation.vacuum?`Improve effect of 'Planetary system' base by +${m(a.milestonesInfo[3].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
You can view it in stats.`],need:[[1,30],[2.5,1]],reward:[1,1],scalingOld:[[[1e30,1e35,1e40,1e46,1e52,1e58],[1,1,1,2,2,3]],[[25,40,55,70,85],[1,2,2,3,3]]],unlock:[3,5]},{name:["Supermassive","Biggest of all"],needText:[()=>`Collapse ${t.inflation.vacuum?"":"to"} at least ${f(a.milestonesInfo[4].need[0]).format()} ${t.inflation.vacuum?"Elements":"Solar mass"}.`,()=>`Collapse to ${f(a.milestonesInfo[4].need[1]).format()} Black holes or more.`],rewardText:[()=>t.inflation.vacuum?`Stars produce ${m(a.milestonesInfo[4].reward[0])} times more Elements.`:"New Intergalactic themed Strangenesses.",()=>t.inflation.vacuum?`Max Mass shift value increased by ${m(a.milestonesInfo[4].reward[1])}.`:`Unknown Structure, it doesn't belong to this Universe.
You can view it in stats.`],need:[[9,3],[1,2]],reward:[1,1],scalingOld:[[[9e3,15e3,22e3,3e4,4e4,6e4,8e4],[1,2,3,4,5,6,8]],[[100,150,200,250,300],[1,2,3,4,5]]],unlock:[3,5]},{name:["Light in the dark","Greatest of the walls"],needText:[()=>`Have ${t.inflation.vacuum?"all":"self-made"} Stars count reach at least ${f(a.milestonesInfo[5].need[0]).format()}.`,()=>`Have ${f(a.milestonesInfo[5].need[1]).format()} Galaxies or more.`],rewardText:[()=>t.inflation.vacuum?`Strange reward increased by ${m(a.milestonesInfo[5].reward[0])}x.`:"Intergalactic is always unlocked with Interstellar.",()=>t.inflation.vacuum?`Boost per Filament is now +${m(a.milestonesInfo[5].reward[1])} bigger.`:`Unknown Structure, it doesn't belong to this Universe.
You can view it in stats.`],need:[[1.2,3],[1,0]],reward:[5,25],scalingOld:[[[1200,1400,1600,1800,2e3,2200,2400],[5,5,10,10,20,20,50]],[[1,2,4,8,12,16,20,24],[25,25,50,50,100,100,200,0]]],unlock:[4,8]}],challengesInfo:{name:["Void"],description:["Result of Vacuum Instabillity, investigate at your own will"],effectText:[()=>{let e=t.challenges.void;if(e[1]===0)return'<span class="orangeText">- Unknown, but maybe if more Energy</span>';let s=`<span class="orangeText">- Energy gain is decreased by 20%
- Discharge base reduced</span>`;return e[1]>=3&&(s+=`<span class="blueText">

- ${e[2]>0?`Mole softcap no longer delayed by self-made amount and is much stronger (^${m(.5)} > ^${m(.1)})
- Excessive Puddles are now softcapped ^${m(.5)} (delayed by self-made amount)
- Clouds gain is a little weaker (-${m(.02)})
- Puddles are 10 times weaker`:"Unknown, but maybe if deeper"}</span>`),e[1]>=2&&(s+=`<span class="grayText">

- ${e[3]>0?`Cosmic dust production softcapped ^${m(Math.floor(100-3.3*(t.accretion.rank-1))/100)}
- Increasing Rank doesn't increase effective Rank`:"Unknown, but maybe if more Mass"}</span>`),e[3]>=5&&(s+=`<span class="darkorchidText">

- ${e[4]>0?`'Star system' effective level softcapped instanly
- 'Nova' cost increased
- Intergalactic unlocked later`:"Unknown, but maybe if far enough"}</span>`),e[4]>=5&&(s+=`<span class="cyanText">

- </span>`),s}],rewardText:[[[],["'Micro boost' (Microworld)","'One dust' (Accretion)","'Massive Ranks' (Accretion)","'Fundamental boost' (Microworld)"],["'Cloud density' max level increased","'New Structure' max level increased","'Isolation' (Submerged)"],["Multiple max level increases","Multiple max level increases","Multiple max level increases","Multiple max level increases","'Strange growth' (Intergalactic)"],["Unlocked 'New Milestones'","'Energy recycle' (Microworld)","'Neutronium' (Interstellar)","'Mass shift' max level increased"],[]]],color:["darkvioletText"]},historyStorage:{stage:[]}},k=e=>e.slice(0),H=e=>{if(typeof e!="object"||e===null)return e;let s;if(Array.isArray(e)){s=[];for(let r=0;r<e.length;r++)s.push(H(e[r]))}else{s={};for(let r in e)s[r]=H(e[r])}return s},I=(e,s)=>{let r=[];for(let n=0;n<e;n++)s==="toggle"?r.push(!0):s==="toggleAuto"?r.push(!1):s==="upgrade"&&r.push(0);return r};for(let e=0;e<a.buildingsInfo.startCost.length;e++)a.buildingsInfo.firstCost[e]=k(a.buildingsInfo.startCost[e]);a.researchesAutoInfo.cost=k(a.researchesAutoInfo.startCost);for(let e of["researches","researchesExtra","strangeness"]){let s=a[`${e}Info`];for(let r=1;r<s.length;r++)s[r].cost=k(s[r].startCost)}Object.assign(t,{upgrades:[[],I(a.upgradesInfo[1].startCost.length,"upgrade"),I(a.upgradesInfo[2].startCost.length,"upgrade"),I(a.upgradesInfo[3].startCost.length,"upgrade"),I(a.upgradesInfo[4].startCost.length,"upgrade"),I(a.upgradesInfo[5].startCost.length,"upgrade")],researches:[[],I(a.researchesInfo[1].startCost.length,"upgrade"),I(a.researchesInfo[2].startCost.length,"upgrade"),I(a.researchesInfo[3].startCost.length,"upgrade"),I(a.researchesInfo[4].startCost.length,"upgrade"),I(a.researchesInfo[5].startCost.length,"upgrade")],researchesExtra:[[],I(a.researchesExtraInfo[1].startCost.length,"upgrade"),I(a.researchesExtraInfo[2].startCost.length,"upgrade"),I(a.researchesExtraInfo[3].startCost.length,"upgrade"),I(a.researchesExtraInfo[4].startCost.length,"upgrade"),I(a.researchesExtraInfo[5].startCost.length,"upgrade")],researchesAuto:I(a.researchesAutoInfo.startCost.length,"upgrade"),ASR:I(a.ASRInfo.costRange.length,"upgrade"),elements:I(a.elementsInfo.startCost.length,"upgrade"),strangeness:[[],I(a.strangenessInfo[1].startCost.length,"upgrade"),I(a.strangenessInfo[2].startCost.length,"upgrade"),I(a.strangenessInfo[3].startCost.length,"upgrade"),I(a.strangenessInfo[4].startCost.length,"upgrade"),I(a.strangenessInfo[5].startCost.length,"upgrade")],milestones:[[],I(a.milestonesInfo[1].need.length,"upgrade"),I(a.milestonesInfo[2].need.length,"upgrade"),I(a.milestonesInfo[3].need.length,"upgrade"),I(a.milestonesInfo[4].need.length,"upgrade"),I(a.milestonesInfo[5].need.length,"upgrade")]});Object.assign(t.toggles,{normal:I(document.getElementsByClassName("toggle").length,"toggle"),buildings:[[],I(t.buildings[1].length,"toggleAuto"),I(t.buildings[2].length,"toggleAuto"),I(t.buildings[3].length,"toggleAuto"),I(t.buildings[4].length,"toggleAuto"),I(t.buildings[5].length,"toggleAuto")],auto:I(document.getElementsByClassName("toggleAuto").length,"toggleAuto")});var y=H(t),Ye=e=>{let s=["stage","discharge","vaporization","accretion","collapse","inflation","time","buildings","strange","upgrades","researches","researchesExtra","researchesAuto","ASR","elements","strangeness","milestones","challenges"],r=["t1","testing1","t2","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17"];for(let c in e)if(r.includes(c)){let d=s[r.indexOf(c)];e[d]=e[c],delete e[c]}Object.hasOwn(e,"player")&&(e=e.player);for(let c in y)if(!Object.hasOwn(e,c)){if(c==="discharge")throw new ReferenceError("This save file is missing important information and is most likely not from this game");c!=="version"?e[c]=H(y[c]):e.version="0.0.0"}let n=e.version;if(n!==y.version){if(e.version==="0.0.0"&&(e.version="v0.0.1",Object.hasOwn(e,"energy")&&(e.discharge.energy=e.energy.current)),e.version==="v0.0.1"&&(e.version="v0.0.2",e.stage.resets=e.stage.current-1),e.version==="v0.0.2"&&(e.version="v0.0.3",e.toggles=H(y.toggles)),e.version==="v0.0.3"&&(e.version="v0.0.4",delete e.energy,delete e.buyToggle),(e.version==="v0.0.4"||e.version==="v0.0.5")&&(e.version="v0.0.6",e.events=[!1]),e.version==="v0.0.6"&&(e.version="v0.0.7",e.vaporization.input=10,e.stage.input=1),e.version==="v0.0.7"&&(e.version="v0.0.8",e.stage.export=1),e.version==="v0.0.8"){e.version="v0.0.9",e.stage.active=Math.min(e.stage.current,4);let c=e.stage.active,d=e.buildings;e.buildings=H(y.buildings),e.buildings[c]=d;let h=e.upgrades;e.upgrades=H(y.upgrades),e.upgrades[c]=h;let b=e.researches;e.researches=H(y.researches),e.researches[c]=b;let x=e.researchesExtra;e.researchesExtra=H(y.researchesExtra),e.researchesExtra[c]=x,e.strangeness.length<5&&e.strangeness.unshift([]),e.stage.export*=86400,e.ASR[c]=e.researchesAuto.splice(1,1)[0]}if(e.version==="v0.0.9"&&(e.version="v0.1.0",e.upgrades[3].length===12&&e.upgrades[3].splice(8,0,0),e.collapse.show=[]),e.version==="v0.1.0"&&(e.version="v0.1.1",Object.hasOwn(e.discharge,"energyCur")&&(e.discharge.energy=e.discharge.energyCur),delete e.discharge.energyCur,e.collapse.massMax=e.collapse.mass),e.version==="v0.1.1"){e.version="v0.1.2";for(let c=1;c<e.buildings.length;c++)for(let d=0;d<e.buildings[c].length;d++)e.buildings[c][d].current=f(e.buildings[c][d].current).toArray(),e.buildings[c][d].total=f(e.buildings[c][d].total).toArray(),e.buildings[c][d].trueTotal=f(e.buildings[c][d].total).toArray(),e.buildings[c][d].highest=[0,0];e.discharge.unlock=e.stage.current===1&&e.discharge.energy>=9,e.vaporization.clouds=f(e.vaporization.clouds).toArray(),e.collapse.elementsMax=k(e.buildings[4][0].current),Object.hasOwn(e.strange[0],"true")&&(e.strange[0].current=e.strange[0].true),e.upgrades[1].length<10&&e.upgrades[1].unshift(0,0),delete e.vaporization.current,delete e.strange[0].true,e.time.offline=0}if(e.version==="v0.1.2"&&(e.version="v0.1.3",e.stage.best=0,e.stage.time=0,e.inflation.age=0,e.accretion.input=600,e.discharge.energyMax=e.discharge.energy,e.vaporization.cloudsMax=k(e.vaporization.clouds)),e.version==="v0.1.3"&&(e.version="v0.1.4",e.collapse.input=[4,2],delete e.collapse.disabled,delete e.collapse.inputM,delete e.collapse.inputS,!e.inflation.vacuum)){e.strangeness[5]===void 0&&(e.strangeness[5]=[0]);for(let c=1+e.strangeness[5][0];c<=(e.stage.current===5?4:5);c++)Math.min(e.stage.current,4)!==c&&(e.buildings[c]=H(y.buildings[c]),e.upgrades[c]=k(y.upgrades[c]),e.researches[c]=k(y.researches[c]),e.researchesExtra[c]=k(y.researchesExtra[c]),c!==5&&(e.ASR[c]=0),c===1?(e.buildings[1][0].current=[3,0],e.discharge.energy=0,e.discharge.current=0):c===2?(e.buildings[2][0].current=[2.8,-3],e.vaporization.clouds=[1,0]):c===3?(e.buildings[3][0].current=[1,-19],e.accretion.rank=1):c===4&&(e.buildings[4][0].current=[1,0],e.collapse.mass=.01235,e.collapse.stars=[0,0,0],e.elements=k(y.elements)))}if(e.version==="v0.1.4"){e.version="v0.1.5",e.history.stage.best[2]=0;for(let c=0;c<e.history.stage.list.length;c++)e.history.stage.list[c][2]=0;e.inflation.vacuum&&e.strangeness[5]!==void 0&&e.strangeness[5][2]!==0&&(e.strangeness[5][2]=0,e.strange[0].current+=50)}if(e.version!==y.version)throw new ReferenceError("Save file version is higher than game version")}for(let c=1;c<y.buildings.length;c++)if(!Array.isArray(e.buildings[c]))e.buildings[c]=H(y.buildings[c]);else for(let d=e.buildings[c].length;d<y.buildings[c].length;d++)e.buildings[c][d]=H(y.buildings[c][d]);for(let c=e.strange.length;c<y.strange.length;c++)e.strange[c]=H(y.strange[c]);for(let c=1;c<y.upgrades.length;c++)if(!Array.isArray(e.upgrades[c]))e.upgrades[c]=k(y.upgrades[c]);else for(let d=e.upgrades[c].length;d<y.upgrades[c].length;d++)e.upgrades[c][d]=0;for(let c=1;c<y.researches.length;c++)if(!Array.isArray(e.researches[c]))e.researches[c]=k(y.researches[c]);else for(let d=e.researches[c].length;d<y.researches[c].length;d++)e.researches[c][d]=0;for(let c=1;c<y.researchesExtra.length;c++)if(!Array.isArray(e.researchesExtra[c]))e.researchesExtra[c]=k(y.researchesExtra[c]);else for(let d=e.researchesExtra[c].length;d<y.researchesExtra[c].length;d++)e.researchesExtra[c][d]=0;for(let c=e.researchesAuto.length;c<y.researchesAuto.length;c++)e.researchesAuto[c]=0;for(let c=e.ASR.length;c<y.ASR.length;c++)e.ASR[c]=0;for(let c=e.elements.length;c<y.elements.length;c++)e.elements[c]=0;for(let c=0;c<y.strangeness.length;c++)if(!Array.isArray(e.strangeness[c]))e.strangeness[c]=k(y.strangeness[c]);else for(let d=e.strangeness[c].length;d<y.strangeness[c].length;d++)e.strangeness[c][d]=0;for(let c=0;c<y.milestones.length;c++)if(!Array.isArray(e.milestones[c]))e.milestones[c]=k(y.milestones[c]);else for(let d=e.milestones[c].length;d<y.milestones[c].length;d++)e.milestones[c][d]=0;for(let c=1;c<y.toggles.buildings.length;c++)if(!Array.isArray(e.toggles.buildings[c]))e.toggles.buildings[c]=k(y.toggles.buildings[c]);else for(let d=e.toggles.buildings[c].length;d<y.toggles.buildings[c].length;d++)e.toggles.buildings[c][d]=!1;for(let c=e.toggles.normal.length;c<y.toggles.normal.length;c++)e.toggles.normal[c]=y.toggles.normal[c];for(let c=e.toggles.auto.length;c<y.toggles.auto.length;c++)e.toggles.auto[c]=!1;for(let c=e.events.length;c<y.events.length;c++)e.events[c]=!1;Object.assign(t,e),ke();let i=t.buildings[4];a.collapseInfo.trueStars=i[1].true+i[2].true+i[3].true+i[4].true+i[5].true,a.accretionInfo.rankCost[4]=t.stage.true<3||t.stage.true===3&&!t.events[0]?0:5e29,a.historyStorage.stage=t.history.stage.list;for(let c=1;c<y.milestones.length;c++)for(let d=0;d<y.milestones[c].length;d++)Re(d,c);for(let c=1;c<y.strangeness.length;c++){let d=t.strangeness[c],h=a.strangenessInfo[c].max;for(let b=0;b<a.strangenessInfo[c].maxActive;b++)v(b,c,"strangeness"),d[b]>h[b]&&(d[b]=h[b],V(b,c,"strangeness"),console.warn(`Strangeness (${b+1} of ${c}) level reduced`))}let l=t.researchesAuto,{max:u,autoStage:g}=a.researchesAutoInfo;for(let c=0;c<y.researchesAuto.length;c++)v(c,g[c],"researchesAuto"),l[c]>u[c]&&(l[c]=u[c],V(c,g[c],"researchesAuto"),console.warn(`Automatization research (${c+1}) level reduced`));for(let c=1;c<=5;c++){v(0,c,"ASR");let d=t.researchesExtra[c],h=a.researchesExtraInfo[c].max;for(let S=0;S<a.researchesExtraInfo[c].maxActive;S++)v(S,c,"researchesExtra"),d[S]>h[S]&&(d[S]=h[S],console.warn(`Special research (${S+1} of ${c}) level reduced`));let b=t.researches[c],x=a.researchesInfo[c].max;for(let S=0;S<a.researchesInfo[c].maxActive;S++)v(S,c,"researches"),b[S]>x[S]&&(b[S]=x[S],console.warn(`Stage research (${S+1} of ${c}) level reduced`))}return X(),n},kt=()=>{if(a.versionBuild)return;let e=n=>{let i="";switch(n){case"v0.0.1":i=`- Stage 2 full rework
- Introduced automatic changelog
- Auto Structures do not wait for 2x cost if making the 1st one

`,i+=`- Mobile device support

`,i+=`- Tritium now shows how much Molecules being produced per second
- Upgrades auto update description`;break;case"v0.0.2":i=`- Added stats subtab
- Added Stage resets into save file`;break;case"v0.0.3":i=`- Added new content (Stage 3)
- Stage 2 extended
- Max offline time base and from research is now 2 times longer
- Offline time calculated better
- Toggles have been reset due to change in the way they are saved
- Researches auto update description
- Some new stats`;break;case"v0.0.4":i=`- Buffed all Stages
- Added events for early Stages
- Update to stats visuals
- Intervals have been reset due to change in save file saving

`,i+=`- Numbers are now formated

`,i+="- New stat for Stage 3";break;case"v0.0.5":i=`- New content (Stage 4)
- Basic loading screen
- Full visual update
- New formula for multi making Structures
- Visual indication for how many Structures can be made

`,i+=`- Created Elements will still show effects, after Collapse
- Improved transition when changing themes
- Fixed being able to create automatization research when can't afford them

`,i+=`- Added hotkeys
- Stage event reset due to small changes

`,i+="- Fixed unable to progress in Stage 1, but rework is coming";break;case"v0.0.6":i=`- List of hotkeys can be seen now

`,i+=`- Option to remove text movement
- Ability to rename save file`;break;case"v0.0.7":i=`- New content (Stage 5)
- Stage 1 rework
- Self-made Structures stat moved into Stage tab
- Hotkeys for Resets
- Pressing keyboard (unless tab) no longer highlights buttons
- Removed old number format (it was painfully slow) in favor of self-made one

`,i+=`- Numpad can now be used as digits for hotkeys

`,i+="- Save file name can now display in game stats";break;case"v0.0.8":i="- Minor speed up to almost all Stages (not first one)";break;case"v0.0.9":i=`- New content (Milestones)
- Stage 4 speed up
- Fixed export reward not being saved into exported file
- Auto Structures toggles have been reset

`,i+=`- Fix being unable to play with save file that was recently created

`,i+=`- Fixed F1 - F12 buttons working as digits
- Milestones are now unlocked instanly (with Stage 5)
- New event that must be triggered to progress, for changing Active Stage for the first time

`,i+=`- Max offline base and research is increased by 2 times, related Strangeness cost and max level have been balanced

`,i+="- Some quick balance changes for Stage 3 and 5";break;case"v0.1.0":i=`- New content and balance for end of Stage 5
- New stats for Stage 5`;break;case"v0.1.1":i=`- More balance for Stage 5
- New stats for Stage 2 and 4, max energy no longer resets
- New hotkeys to change Active Stage`;break;case"v0.1.2":i=`- New content (Vacuum)
- Some descriptions have been expanded
- Added self-made break infinity
- Heavy optimization
- Offline time been reworked
- Added version window (removed automatic change log)
- Removed option to remove text movement, because it's now always on

`,i+=`- New color theme
- Offline warp now unlocked instantly, while Offline storage control toggle isn't
- New stats for Stage 4

`,i+="- Auto Structures now correctly spend currency";break;case"v0.1.3":i=`- Puddles production base increased from 3 to 4, Clouds gain decreased by -1 (formula fix)
- New stats for Stage 3, 4 and 5
- More Stage 6 balance (Strangeness, reduced max level and adjusted cost; Submerged proper balance; Strange boost new effects)
- Replay event button

`,i+=`- History for Stage resets
- New hotkeys (A - toggle all Structures, O - toggle Offline)

`,i+=`- Added requirement to unlock better control over Warp (also Warp now has a minimum value)
- Automatically made Structures/Upgrades no longer visually update numbers`;break;case"v0.1.4":i=`- Warps now waste offline (half of normal); Max offline from upgrades decreased, cost adjusted
- Custom scrolls
- Notifications
- Fixed and updated special supports
- Auto Collapse settings reset`;break;case"v0.1.5":i=`- New content (Void)
- Stage 6 minor balance changes
-Images should no longer unload on Stage change
- Many small changes to improve quality of life
- Small visual update`}o("versionText").textContent=i,o("currentVesion").textContent=n},s=15,r="";for(let n=1;n<=s;n++){let i=n<10?`0${n}`:`${n}`,l=`v0.${i[0]}.${i[1]}`;r+=`<button id="${l}">${l}</button>`}o("versionInfo").innerHTML=`<div style="display: flex; flex-direction: column; justify-content: space-between; align-items: center; width: clamp(42vw, 36em, 80vw); height: clamp(26vh, 36em, 90vh); background-color: var(--window-color); border: 3px solid var(--window-border); border-radius: 12px; padding: 1em 1em 0.8em; row-gap: 1em;">
        <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 0.06em;">${r}</div>
        <div style="width: 100%; overflow-y: auto;">
            <label id="currentVesion" class="bigWord"></label>
            <p id="versionText" class="whiteText" style="white-space: pre-line; line-height: 1.3em; margin-top: 0.4em;"></p>
        </div>
        <button id="closeVersionInfo" style="width: 6em; border-radius: 4px; font-size: 0.92em;">Close</button>
    </div>`,document.head.appendChild(document.createElement("style")).textContent="#versionInfo > div > div:first-of-type > button { width: 3.8em; height: 2em; font-size: 0.88em; }",o("closeVersionInfo").addEventListener("click",()=>{o("versionInfo").style.display="none"});for(let n=1;n<=s;n++){let i=n<10?`0${n}`:`${n}`,l=`v0.${i[0]}.${i[1]}`;o(l).addEventListener("click",()=>e(l))}e(y.version),a.versionBuild=!0};var Ct=e=>{if(e.code==="Tab"){document.body.classList.add("outlineOnFocus");return}else{let i=document.activeElement.type;if(i==="text"||i==="number")return;document.body.classList.remove("outlineOnFocus")}if(e.ctrlKey||e.altKey)return;let s=e.shiftKey,r=!isNaN(Number(e.code.slice(-1))),n=!t.toggles.normal[6]||r&&s?e.code:e.key;if(r){if(e.code[0]==="F")return;let i=Number(n.slice(-1));!s&&i>=1&&be(i);return}else if(e.key.length===1){let i=n.replace("Key","").toLowerCase();s||(i==="a"?z(0,"buildings",!0):i==="o"?z(0,"normal",!0):i==="w"?(e.preventDefault(),at()):i==="s"?Ve():i==="d"?a.stageInfo.activeAll.includes(1)&&Qe():i==="v"?a.stageInfo.activeAll.includes(2)&&_e():i==="r"?a.stageInfo.activeAll.includes(3)&&je():i==="c"&&a.stageInfo.activeAll.includes(4)&&Ke());return}if(!e.repeat){if(s){if(n==="ArrowLeft"||n==="ArrowRight"){let{activeAll:i}=a.stageInfo;if(i.length===1)return;let l=i.indexOf(t.stage.active);n==="ArrowLeft"?(l<=0?l=i.length-1:l--,ne(i[l])):(l>=i.length-1?l=0:l++,ne(i[l]))}}else if(n==="ArrowLeft"||n==="ArrowRight"){let{tabs:i}=a.tabList,l=i.indexOf(a.tab);if(n==="ArrowLeft"){do l<=0?l=i.length-1:l--;while(!re(i[l]));W(i[l])}else{do l>=i.length-1?l=0:l++;while(!re(i[l]));W(i[l])}}else if(n==="ArrowDown"||n==="ArrowUp"){if(!Object.hasOwn(a.subtab,`${a.tab}Current`))return;let i=a.tabList[`${a.tab}Subtabs`],l=i.indexOf(a.subtab[`${a.tab}Current`]);if(n==="ArrowDown"){do l<=0?l=i.length-1:l--;while(!re(a.tab,i[l]));W(a.tab,i[l])}else{do l>=i.length-1?l=0:l++;while(!re(a.tab,i[l]));W(a.tab,i[l])}}}};var o=e=>document.getElementById(e),ie=e=>document.getElementsByClassName(e),D=e=>document.querySelector(e),$t=(e=!1)=>{if(e){ut();let r=localStorage.getItem("testing_save");if(r!==null){let n=JSON.parse(atob(r)),i=Ye(n),{time:l}=t,u=(Date.now()-l.updated)/1e3,g=Ee();l.updated=Date.now(),a.lastSave+=u,l.offline=Math.min(l.offline+u,g),t.stage.export=Math.min(t.stage.export+Math.min(u,g),ye()),$(`Welcome back, you were away for ${m(u,{type:"time"})}.${l.offline>=g?" (Offline storage is full)":""}
${i!==t.version?`Game have been updated from ${i} to ${t.version}`:`Current version is ${t.version}`}`)}else ke(),Ye(H(y)),t.buildings[3][0].current=[5.97,27],$(`Welcome to 'Fundamental'.
This is a test-project made by awWhy. Should be supported by modern browsers, phones and screen readers (need to turn support ON in settings).
Was inspired by 'Synergism', 'Antimatter Dimensions' and others.
Current version is ${t.version}`);Ue(),Xe(),Be()}let s=localStorage.getItem("theme");Le(Number(s),s===null),_("reload"),e&&(o("body").style.display="",o("loading").style.display="none"),o("saveFileNameInput").value=t.fileName,o("mainInterval").value=`${t.intervals.main}`,o("numbersInterval").value=`${t.intervals.numbers}`,o("visualInterval").value=`${t.intervals.visual}`,o("autoSaveInterval").value=`${t.intervals.autoSave}`,o("thousandSeparator").value=t.separator[0],o("decimalPoint").value=t.separator[1],o("stageInput").value=m(t.stage.input,{type:"input"}),o("vaporizationInput").value=m(t.vaporization.input,{type:"input"}),o("rankShiftInput").value=m(t.accretion.input,{type:"input"}),o("collapseMassInput").value=m(t.collapse.input[0],{type:"input"}),o("collapseStarsInput").value=m(t.collapse.input[1],{type:"input"}),o("stageResetsSave").value=`${t.history.stage.input[0]}`,o("stageResetsKeep").value=`${t.history.stage.input[1]}`,o("stageSelect").classList.remove("active");for(let r=0;r<y.toggles.normal.length;r++)z(r,"normal");for(let r=0;r<y.toggles.auto.length;r++)z(r,"auto");ge(),Z()};$t(!0);{let{screenReader:e}=a,s=a.mobileDevice?"touchstart":"mouseover";document.addEventListener("keydown",r=>Ct(r));for(let r=0;r<y.toggles.normal.length;r++)o(`toggle${r}`).addEventListener("click",()=>z(r,"normal",!0));for(let r=0;r<N.longestBuilding;r++)o(`toggleBuilding${r}`).addEventListener("click",()=>z(r,"buildings",!0));for(let r=0;r<y.toggles.auto.length;r++)o(`toggleAuto${r}`).addEventListener("click",()=>z(r,"auto",!0));if(!t.toggles.normal[7]){let r=o("researchSubtabElements");r.remove(),r.id="ElementsTab",o("researchTab").insertAdjacentElement("afterend",r);let n=o("researchSubtabBtnElements");n.remove(),n.id="ElementsTabBtn",n.classList.add("stage4Include"),n.style.display=a.stageInfo.activeAll.includes(4)?"":"none",o("researchTabBtn").insertAdjacentElement("afterend",n);let i=a.tabList;i.researchSubtabs.splice(i.researchSubtabs.indexOf("Elements"),1),i.tabs.splice(i.tabs.indexOf("research")+1,0,"Elements")}for(let r=1;r<N.longestBuilding;r++)o(`building${r}Btn`).addEventListener("click",()=>be(r));for(let r=0;r<N.longestUpgrade;r++){let n=o(`upgrade${r+1}`);e&&n.addEventListener("focus",()=>U(r,t.stage.active,"upgrades")),n.addEventListener(s,()=>U(r,t.stage.active,"upgrades")),n.addEventListener("click",()=>j(r,t.stage.active,"upgrades"))}o("stageReset").addEventListener("click",()=>{Ve()}),o("reset1Button").addEventListener("click",()=>{let{active:r}=t.stage;r===1?Qe():r===2?_e():r===3?je():r===4&&Ke()}),o("buy1x").addEventListener("click",()=>ge("1")),o("buyAny").addEventListener("click",()=>ge("any")),o("buyAnyInput").addEventListener("blur",()=>ge("any")),o("buyMax").addEventListener("click",()=>ge("max")),o("buyStrict").addEventListener("click",()=>ge("strict"));for(let r=-1;r<a.challengesInfo.name.length;r++){let n=o(`challenge${r+1}`);e&&n.addEventListener("focus",()=>le(r)),n.addEventListener(s,()=>le(r)),n.addEventListener("click",r===-1?gt:()=>{At(r)})}for(let r=0;r<N.longestResearch;r++){let n=o(`research${r+1}Image`);e&&n.addEventListener("focus",()=>U(r,t.stage.active,"researches")),n.addEventListener(s,()=>U(r,t.stage.active,"researches")),n.addEventListener("click",()=>j(r,t.stage.active,"researches"))}for(let r=0;r<N.longestResearchExtra;r++){let n=o(`researchExtra${r+1}Image`);e&&n.addEventListener("focus",()=>U(r,t.stage.active,"researchesExtra")),n.addEventListener(s,()=>U(r,t.stage.active,"researchesExtra")),n.addEventListener("click",()=>j(r,t.stage.active,"researchesExtra"))}for(let r=0;r<a.researchesAutoInfo.startCost.length;r++){let n=o(`researchAuto${r+1}Image`);e&&n.addEventListener("focus",()=>U(r,t.stage.active,"researchesAuto")),n.addEventListener(s,()=>U(r,t.stage.active,"researchesAuto")),n.addEventListener("click",()=>j(r,t.stage.active,"researchesAuto"))}{let r=o("ASRImage");e&&r.addEventListener("focus",()=>U(0,t.stage.active,"ASR")),r.addEventListener(s,()=>U(0,t.stage.active,"ASR")),r.addEventListener("click",()=>j(0,t.stage.active,"ASR"))}o("element0").addEventListener("dblclick",()=>U(0,4,"elements"));for(let r=1;r<a.elementsInfo.startCost.length;r++){let n=o(`element${r}`);e&&n.addEventListener("focus",()=>U(r,4,"elements")),n.addEventListener(s,()=>U(r,4,"elements")),n.addEventListener("click",()=>j(r,4,"elements"))}for(let r=1;r<a.strangenessInfo.length;r++)for(let n=0;n<a.strangenessInfo[r].startCost.length;n++){let i=o(`strange${n+1}Stage${r}Image`);e&&i.addEventListener("focus",()=>U(n,r,"strangeness")),i.addEventListener(s,()=>U(n,r,"strangeness")),i.addEventListener("click",()=>j(n,r,"strangeness"))}for(let r=1;r<a.milestonesInfo.length;r++)for(let n=0;n<a.milestonesInfo[r].need.length;n++){let i=D(`#milestone${n+1}Stage${r}Div > img`);e&&i.addEventListener("focus",()=>U(n,r,"milestones")),i.addEventListener(s,()=>U(n,r,"milestones"))}o("vaporizationInput").addEventListener("blur",()=>{let r=o("vaporizationInput");t.vaporization.input=Math.max(Number(r.value),0),r.value=m(t.vaporization.input,{type:"input"})}),o("rankShiftInput").addEventListener("blur",()=>{let r=o("rankShiftInput");t.accretion.input=Number(r.value),r.value=m(t.accretion.input,{type:"input"}),X()}),o("collapseMassInput").addEventListener("blur",()=>{let r=o("collapseMassInput");t.collapse.input[0]=Math.max(Number(r.value),1),r.value=m(t.collapse.input[0],{type:"input"})}),o("collapseStarsInput").addEventListener("blur",()=>{let r=o("collapseStarsInput");t.collapse.input[1]=Math.max(Number(r.value),1),r.value=m(t.collapse.input[1],{type:"input"})}),o("stageInput").addEventListener("blur",()=>{let r=o("stageInput");t.stage.input=Math.max(Math.floor(Number(r.value)),1),r.value=m(t.stage.input,{type:"input"})}),o("versionButton").addEventListener("click",()=>{kt(),o("versionInfo").style.display=""}),o("save").addEventListener("click",()=>{xe("save")}),o("file").addEventListener("change",()=>{xe("load")}),o("export").addEventListener("click",()=>{xe("export")}),o("delete").addEventListener("click",()=>{xe("delete")}),o("switchTheme0").addEventListener("click",()=>Le(0,!0));for(let r=1;r<a.stageInfo.word.length;r++)o(`switchTheme${r}`).addEventListener("click",()=>Le(r));o("toggleAuto8").addEventListener("click",()=>ue()),o("toggleAuto5").addEventListener("click",()=>ce("all")),o("toggleAuto6").addEventListener("click",()=>Q("researches","all")),o("toggleAuto7").addEventListener("click",()=>Q("researchesExtra","all")),o("saveFileNameInput").addEventListener("blur",()=>Nt());{let r=o("saveFileHoverButton");e&&r.addEventListener("focus",()=>o("saveFileNamePreview").textContent=ot()),r.addEventListener(s,()=>o("saveFileNamePreview").textContent=ot())}o("mainInterval").addEventListener("blur",()=>{let r=o("mainInterval");t.intervals.main=Math.min(Math.max(Math.trunc(Number(r.value)),20),100),r.value=`${t.intervals.main}`,Z()}),o("numbersInterval").addEventListener("blur",()=>{let r=o("numbersInterval");t.intervals.numbers=Math.min(Math.max(Math.trunc(Number(r.value)),50),200),r.value=`${t.intervals.numbers}`,Z()}),o("visualInterval").addEventListener("blur",()=>{let r=o("visualInterval");t.intervals.visual=Math.min(Math.max(Math.trunc(Number(r.value)*10)/10,.2),4),r.value=`${t.intervals.visual}`,Z()}),o("autoSaveInterval").addEventListener("blur",()=>{let r=o("autoSaveInterval");t.intervals.autoSave=Math.max(Math.trunc(Number(r.value)),10),r.value=`${t.intervals.autoSave}`,Z()}),o("thousandSeparator").addEventListener("blur",()=>Ze(!1)),o("decimalPoint").addEventListener("blur",()=>Ze(!0)),o("mobileDeviceToggle").addEventListener("click",()=>Ue(!0)),o("screenReaderToggle").addEventListener("click",()=>Xe(!0)),o("pauseGame").addEventListener("click",()=>{Lt()}),o("reviewEvents").addEventListener("click",()=>{ft()}),o("offlineWarp").addEventListener("click",()=>{at()}),o("fontSizeToggle").addEventListener("click",()=>Be(!0)),o("customFontSize").addEventListener("blur",()=>Be(!1,!0)),o("stageResetsSave").addEventListener("blur",()=>{let r=o("stageResetsSave"),{input:n}=t.history.stage;n[0]=Math.min(Math.max(Math.floor(Number(r.value)),0),20),r.value=`${n[0]}`,n[1]<n[0]&&(o("stageResetsKeep").value=r.value,n[1]=n[0])}),o("stageResetsKeep").addEventListener("blur",()=>{let r=o("stageResetsKeep");t.history.stage.input[1]=Math.min(Math.max(Math.floor(Number(r.value)),t.history.stage.input[0],3),100),r.value=`${t.history.stage.input[1]}`}),o("firstPlay").addEventListener("click",()=>{a.timeMode=!a.timeMode}),o("hideToggle").addEventListener("click",Ne);for(let r of a.tabList.tabs)if(o(`${r}TabBtn`).addEventListener("click",()=>W(r)),!!Object.hasOwn(a.tabList,`${r}Subtabs`))for(let n of a.tabList[`${r}Subtabs`])o(`${r}SubtabBtn${n}`).addEventListener("click",()=>W(r,n));for(let r=1;r<a.stageInfo.word.length;r++)o(`${a.stageInfo.word[r]}Switch`).addEventListener("click",()=>ne(r));o("currentSwitch").addEventListener("click",()=>o("stageSelect").classList.add("active"))}console.timeEnd("Game loaded in");function Z(e=!1){let{intervalsId:s}=a,{intervals:r}=t;clearInterval(s.main),clearInterval(s.numbers),clearInterval(s.visual),clearInterval(s.autoSave),s.main=e?void 0:setInterval(Oe,r.main),s.numbers=e?void 0:setInterval(G,r.numbers),s.visual=e?void 0:setInterval(se,r.visual*1e3),s.autoSave=e?void 0:setInterval(xe,r.autoSave*1e3,"save")}var Et=()=>{let e=H(t),s=["stage","discharge","vaporization","accretion","collapse","inflation","time","buildings","strange","upgrades","researches","researchesExtra","researchesAuto","ASR","elements","strangeness","milestones","challenges"],r=["t1","testing1","t2","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17"];for(let n in e)if(s.includes(n)){let i=r[s.indexOf(n)];e[i]=e[n],delete e[n]}return e};async function xe(e){switch(e){case"load":{let s=o("file");Z(!0);try{let r=JSON.parse(atob(await s.files[0].text())),n=Ye(r),{time:i}=t,l=(Date.now()-i.updated)/1e3,u=Ee();i.updated=Date.now(),i.offline=Math.min(i.offline+l,u),t.stage.export=Math.min(t.stage.export+Math.min(l,u),ye()),$(`This save is ${m(l,{type:"time"})} old${i.offline>=u?", Offline storage is maxed":""}.
${n!==t.version?`Also save file version is ${n}, while game version is ${t.version}`:`Save file version is ${t.version}`}`),o("isSaved").textContent="Imported",a.lastSave=0,$t()}catch(r){Z(),$(`Incorrect save file format.
Full error is: '${r}'`)}finally{s.value=""}return}case"save":{try{t.history.stage.list=a.historyStorage.stage.slice(0,t.history.stage.input[0]);let s=btoa(JSON.stringify(Et()));localStorage.setItem("testing_save",s),clearInterval(a.intervalsId.autoSave),a.intervalsId.autoSave=setInterval(xe,t.intervals.autoSave*1e3,"save"),o("isSaved").textContent="Saved",a.lastSave=0}catch(s){$(`Failed to save file.
Full error is: '${s}'`)}return}case"export":{if(t.history.stage.list=a.historyStorage.stage.slice(0,t.history.stage.input[0]),t.strangeness[4][7]>=1){let n=t.strangeness[5][9],i=He(),l;n>=1?(l=t.stage.export*i/86400/100**n,t.stage.export=0):(l=Math.floor(t.stage.export*i/86400),t.stage.export-=l*86400/i),t.strange[n].current+=l,t.strange[n].total+=l}let s=btoa(JSON.stringify(Et())),r=document.createElement("a");r.href=`data:text/plain;charset=utf-8,${s}`,r.download=ot(),r.click();return}case"delete":{let s=await Pe(`This will truly delete your save file and clear local storage!
Type 'delete' to confirm.`);if(s===null||s==="")return;s.toLowerCase()==="delete"?(Z(!0),localStorage.removeItem("testing_save"),$("Game will auto refresh. If not then do it manually"),window.location.reload()):$(`You wrote '${s}', so save file wasn't deleted`)}}}var Nt=()=>{let e=o("saveFileNameInput"),s=e.value.length===0?y.fileName:e.value.replaceAll(/[\\/:*?"<>|]/g,"_");try{btoa(s),t.fileName=s,e.value=s}catch(r){$(`Save file name is not allowed.
Full error is: '${r}'`)}},ot=()=>{let e=t.fileName,s=["[stage]","[true]","[date]","[time]"],r=[a.stageInfo.word[t.stage.active],a.stageInfo.word[t.stage.true],It("dateDMY"),It("timeHMS")];for(let n=0;n<s.length;n++)e=e.replaceAll(s[n],r[n]);return`${e}.txt`},It=e=>{let s=new Date;switch(e){case"dateDMY":{let r=s.getDate(),n=s.getMonth()+1;return`${r<10?`0${r}`:r}.${n<10?`0${n}`:n}.${s.getFullYear()}`}case"timeHMS":{let r=s.getMinutes(),n=s.getSeconds();return`${s.getHours()}-${r<10?`0${r}`:r}-${n<10?`0${n}`:n}`}}},at=async()=>{let{time:e}=t,s=(6-(t.stage.true>=6?t.strangeness[2][7]:0))/2;if(e.offline<1200*s)return $(`Need at least ${m(1200*s,{type:"time"})} (20 minutes effective) of Storaged Offline time to Warp`);let r=Math.min(t.researchesAuto[0]<3?await q(`Do you wish to Warp forward? Current effective Offline time is ${m(e.offline/s,{type:"time"})}, will be consumed up to 1 hour (uses ${m(s)} seconds per added second)
Calculates a minute per tick`)?3600:0:Number(await Pe(`How many seconds do you wish to Warp forward? Current effective Offline time is ${m(e.offline/s,{type:"time"})} (uses ${m(s)} seconds per added second, minimum value is 10 minutes)
Bigger number will result in more lag (calculates a minute per tick)`,"1200")),e.offline/s);if(r<1200||!isFinite(r))return r===0?void 0:$("Warp failed, possible reason: not enough offline time or incorrect value");e.offline-=r*s,Oe(r)},Lt=async()=>{Z(!0),await Me("Game is currently paused. Press 'confirm' to unpause it. Time spend here will be moved into offline storage");let{time:e}=t,s=(Date.now()-e.updated)/1e3,r=Ee();e.updated=Date.now(),a.lastSave+=s,e.offline=Math.min(e.offline+s,r),t.stage.export=Math.min(t.stage.export+Math.min(s,r),ye()),Z(),G(),se()};})();
//# sourceMappingURL=Code.js.map
